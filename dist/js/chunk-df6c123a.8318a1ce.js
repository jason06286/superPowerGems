(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df6c123a"],{"046f":function(t,e,c){"use strict";c("641e")},4438:function(t,e,c){"use strict";c.r(e);c("a4d3"),c("e01a"),c("b0c0"),c("b64b");var a=c("7a23"),n=Object(a["U"])("data-v-59493441");Object(a["z"])("data-v-59493441");var s=Object(a["i"])("div",{style:{height:"68px"}},null,-1),r={class:"container-lg",style:{"min-height":"calc(100vh - 212px)"}},i={class:"py-5 p-lg-5"},l={key:0,class:"cart-content"},o=Object(a["i"])("div",{class:"empty-cart"},null,-1),b=Object(a["i"])("p",{class:"mb-0 fs-4"},"購物車內無東西",-1),u=Object(a["h"])("請選購商品"),d=Object(a["h"])(" 你可能會喜歡 "),j={key:2,class:"row"},O=Object(a["i"])("div",{class:"col-md-1"},null,-1),p={class:"mb-4 col-md-2 col-12"},f={class:" d-flex align-items-center justify-content-center justify-content-lg-start h-100"},m={key:0,class:"pb-2 mb-0 border-2 border-bottom border-darkred text-title"},v={key:1,class:"pb-2 mb-0 border-2 border-bottom border-darkred text-title"},h={class:"mb-4 col-md-8"},y={class:"d-flex justify-content-center justify-content-md-end"},g=Object(a["i"])("p",{class:"mb-0"},"1",-1),w=Object(a["i"])("p",{class:"mb-0"},"購物車",-1),k=Object(a["i"])("p",{class:"mb-0"},"2",-1),x=Object(a["i"])("p",{class:"mb-0"},"確認訂單",-1),P=Object(a["i"])("div",{class:"step"},[Object(a["i"])("p",{class:"mb-0"},"3"),Object(a["i"])("p",{class:"mb-0"},"確認付款")],-1),V=Object(a["i"])("div",{class:"col-md-1"},null,-1),C={key:3,class:"row"},S=Object(a["i"])("div",{class:"col-md-1"},null,-1),_={key:0,class:"p-3 bg-black p-lg-5 col-md-10 col-12"},B={class:"table text-center text-content"},D=Object(a["i"])("thead",null,[Object(a["i"])("tr",null,[Object(a["i"])("th",{scope:"col",width:"80"}),Object(a["i"])("th",{scope:"col",width:"200"},"商品名稱"),Object(a["i"])("th",{scope:"col",width:"120"},"數量"),Object(a["i"])("th",{scope:"col",class:"text-end",width:"120"},"小計"),Object(a["i"])("th",{scope:"col",width:"30"})])],-1),I={class:"align-middle"},U={class:"align-middle"},F={class:"align-middle"},q={class:"input-group input-group-sm"},$={class:"align-middle text-end"},Q={class:"align-middle text-end"},G={key:0,class:"btn btn-outline-danger btn-sm",type:"button",disabled:""},A=Object(a["i"])("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),E=Object(a["i"])("span",{class:"visually-hidden"},"Loading...",-1),L=Object(a["i"])("i",{class:"bi bi-trash-fill"},null,-1),N={class:"text-darkred"},z=Object(a["i"])("td",{colspan:"4",class:"text-end"},"折扣優惠",-1),J={class:"line-through text-end"},M=Object(a["i"])("td",{colspan:"4",class:"text-end"},"總金額",-1),T={class:"text-end",width:"120"},H={class:"d-flex justify-content-end"},K={key:0,class:"input-group coupon"},R={class:"mt-5 d-flex justify-content-between"},W=Object(a["h"])("繼續購物"),X=Object(a["i"])("div",{class:"col-md-1"},null,-1),Y={key:4,class:"row"},Z=Object(a["i"])("div",{class:"col-md-1"},null,-1),tt={class:"p-3 bg-black col-md-10 col-12 p-lg-5"},et={class:"col-md-6 col-12"},ct={class:"mb-3 form-group"},at=Object(a["i"])("label",{for:"name",class:"mb-2"},[Object(a["i"])("span",{class:"text-darkred"},"*"),Object(a["h"])(" 聯絡人 ")],-1),nt={class:"mb-3 form-group"},st=Object(a["i"])("label",{for:"email",class:"mb-2"},[Object(a["i"])("span",{class:"text-darkred"},"*"),Object(a["h"])(" 信箱 ")],-1),rt={class:"mb-3 form-group"},it=Object(a["i"])("label",{for:"tel",class:"mb-2"},[Object(a["i"])("span",{class:"text-darkred"},"*"),Object(a["h"])(" 電話 ")],-1),lt={class:"mb-3 form-group"},ot=Object(a["i"])("label",{for:"address",class:"mb-2"},[Object(a["i"])("span",{class:"text-darkred"},"*"),Object(a["h"])(" 地址 ")],-1),bt={class:"mb-3 form-group"},ut=Object(a["i"])("label",{for:"message",class:"mb-2"},"留言",-1),dt={class:"p-3 col-md-6 col-12 p-lg-5"},jt=Object(a["i"])("h4",{class:"pb-3 mb-3 border-bottom"},"總金額",-1),Ot={class:"mb-3 d-flex justify-content-between"},pt=Object(a["i"])("p",{class:"mb-0"},"小計",-1),ft={class:"mb-0"},mt={class:"mb-3 d-flex justify-content-between"},vt=Object(a["i"])("p",{class:"mb-0"},"折扣優惠",-1),ht={class:"mb-0 line-through"},yt={class:"mb-5 text-end"},gt={class:"d-grid"},wt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},kt=Object(a["h"])(" 送出訂單 "),xt=Object(a["i"])("div",{class:"col-md-1"},null,-1);Object(a["x"])();var Pt=n((function(t,e,c,Pt,Vt,Ct){var St,_t,Bt,Dt,It,Ut,Ft,qt,$t,Qt,Gt=Object(a["F"])("router-link"),At=Object(a["F"])("BaseSwiper"),Et=Object(a["F"])("Field"),Lt=Object(a["F"])("ErrorMessage"),Nt=Object(a["F"])("Form");return Object(a["w"])(),Object(a["e"])(a["a"],null,[s,Object(a["i"])("div",r,[Object(a["i"])("div",i,[0===(null===(St=Pt.carts.arr)||void 0===St||null===(_t=St.carts)||void 0===_t?void 0:_t.length)?(Object(a["w"])(),Object(a["e"])("div",l,[o,b,Object(a["i"])(Gt,{to:"/frontDesk/products",class:"d-block text-lightred fs-4"},{default:n((function(){return[u]})),_:1})])):Object(a["f"])("",!0),0===(null===(Bt=Pt.carts.arr)||void 0===Bt||null===(Dt=Bt.carts)||void 0===Dt?void 0:Dt.length)?(Object(a["w"])(),Object(a["e"])(At,{key:1,products:t.products.arr},{default:n((function(){return[d]})),_:1},8,["products"])):Object(a["f"])("",!0),0!==(null===(It=Pt.carts.arr)||void 0===It||null===(Ut=It.carts)||void 0===Ut?void 0:Ut.length)?(Object(a["w"])(),Object(a["e"])("div",j,[O,Object(a["i"])("div",p,[Object(a["i"])("div",f,[t.isGoPay?(Object(a["w"])(),Object(a["e"])("h4",v," 確認訂單 ")):(Object(a["w"])(),Object(a["e"])("h4",m," 購物車 "))])]),Object(a["i"])("div",h,[Object(a["i"])("div",y,[Object(a["i"])("div",{class:["step",{"bg-darkred":!t.isGoPay}]},[g,w],2),Object(a["i"])("div",{class:["step",{"bg-darkred":t.isGoPay}]},[k,x],2),P])]),V])):Object(a["f"])("",!0),t.isGoPay?(Object(a["w"])(),Object(a["e"])("div",Y,[Z,Object(a["i"])("div",tt,[Object(a["i"])(Nt,{class:"row",onSubmit:t.onSubmit},{default:n((function(c){var n=c.errors;return[Object(a["i"])("div",et,[Object(a["i"])("div",ct,[at,Object(a["i"])(Et,{id:"name",name:"聯絡人",type:"text",class:["form-control",{"is-invalid":n["聯絡人"]}],placeholder:"請輸入聯絡人",rules:"required",modelValue:t.user.user.name,"onUpdate:modelValue":e[4]||(e[4]=function(e){return t.user.user.name=e})},null,8,["class","modelValue"]),Object(a["i"])(Lt,{name:"聯絡人",class:"invalid-feedback"})]),Object(a["i"])("div",nt,[st,Object(a["i"])(Et,{id:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":n["信箱"]}],placeholder:"請輸入信箱",rules:"email|required",modelValue:t.user.user.email,"onUpdate:modelValue":e[5]||(e[5]=function(e){return t.user.user.email=e})},null,8,["class","modelValue"]),Object(a["i"])(Lt,{name:"信箱",class:"invalid-feedback"})]),Object(a["i"])("div",rt,[it,Object(a["i"])(Et,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":n["電話"]}],placeholder:"請輸入電話",rules:t.isPhone,modelValue:t.user.user.tel,"onUpdate:modelValue":e[6]||(e[6]=function(e){return t.user.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["i"])(Lt,{name:"電話",class:"invalid-feedback"})]),Object(a["i"])("div",lt,[ot,Object(a["i"])(Et,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":n["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:t.user.user.address,"onUpdate:modelValue":e[7]||(e[7]=function(e){return t.user.user.address=e})},null,8,["class","modelValue"]),Object(a["i"])(Lt,{name:"地址",class:"invalid-feedback"})]),Object(a["i"])("div",bt,[ut,Object(a["S"])(Object(a["i"])("textarea",{class:"form-control",id:"message",placeholder:"有什麼話想對我們說呢?",rows:"3","onUpdate:modelValue":e[8]||(e[8]=function(e){return t.message=e})},null,512),[[a["N"],t.message]])])]),Object(a["i"])("div",dt,[jt,Object(a["i"])("div",Ot,[pt,Object(a["i"])("p",ft,"$ "+Object(a["I"])(Pt.currency(Pt.carts.arr.total)),1)]),Object(a["i"])("div",mt,[vt,Object(a["i"])("p",ht," $ "+Object(a["I"])(Pt.currency(Pt.carts.arr.total-Pt.carts.arr.final_total)),1)]),Object(a["i"])("h4",yt," $ "+Object(a["I"])(Pt.currency(Pt.carts.arr.final_total)),1),Object(a["i"])("div",gt,[Object(a["i"])("button",{class:["btn btn-lightred",{"not-allowed":Object.keys(t.user.user).length<4}],type:"submit"},["submit"===Pt.isLoading?(Object(a["w"])(),Object(a["e"])("span",wt)):Object(a["f"])("",!0),kt],2)])])]})),_:1},8,["onSubmit"])]),xt])):(Object(a["w"])(),Object(a["e"])("div",C,[S,0!==(null===(Ft=Pt.carts.arr)||void 0===Ft||null===(qt=Ft.carts)||void 0===qt?void 0:qt.length)?(Object(a["w"])(),Object(a["e"])("div",_,[Object(a["i"])("table",B,[D,Object(a["i"])("tbody",null,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(Pt.carts.arr.carts,(function(e){return Object(a["w"])(),Object(a["e"])("tr",{key:e.id},[Object(a["i"])("td",I,[Object(a["i"])("img",{src:e.product.imageUrl,alt:e.product.description,class:"img-fluid",style:{heigt:"3rem"}},null,8,["src","alt"])]),Object(a["i"])("td",U,Object(a["I"])(e.product.title),1),Object(a["i"])("td",F,[Object(a["i"])("div",q,[Object(a["i"])("button",{class:["btn btn-outline-content",{disabled:e.qty<=1||Pt.isChangeQty}],type:"button",onClick:function(c){return t.minusQty(e)}}," - ",10,["onClick"]),Object(a["S"])(Object(a["i"])("input",{type:"number",class:"text-center form-control",min:"1",disabled:"","onUpdate:modelValue":function(t){return e.qty=t}},null,8,["onUpdate:modelValue"]),[[a["N"],e.qty,void 0,{number:!0}]]),Object(a["i"])("button",{class:["btn btn-outline-content",{disabled:Pt.isChangeQty}],type:"button",onClick:function(c){return t.addQty(e)}}," + ",10,["onClick"])])]),Object(a["i"])("td",$," $ "+Object(a["I"])(Pt.currency(e.total)),1),Object(a["i"])("td",Q,[Pt.isLoading===e.id?(Object(a["w"])(),Object(a["e"])("button",G,[A,E])):(Object(a["w"])(),Object(a["e"])("button",{key:1,type:"button",class:"btn btn-sm btn-trash",onClick:function(c){return t.delProduct(e)}},[L],8,["onClick"]))])])})),128))]),Object(a["i"])("tfoot",null,[Object(a["S"])(Object(a["i"])("tr",N,[z,Object(a["i"])("td",J," $ "+Object(a["I"])(Pt.currency(Pt.carts.arr.total-Pt.carts.arr.final_total)),1)],512),[[a["O"],Pt.carts.arr.total>Pt.carts.arr.final_total]]),Object(a["i"])("tr",null,[M,Object(a["i"])("td",T," $ "+Object(a["I"])(Pt.currency(Pt.carts.arr.final_total)),1)])])]),Object(a["i"])("div",H,[0!=(null===($t=Pt.carts.arr)||void 0===$t||null===(Qt=$t.carts)||void 0===Qt?void 0:Qt.length)?(Object(a["w"])(),Object(a["e"])("div",K,[Object(a["S"])(Object(a["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠券代碼","aria-label":"請輸入優惠券代碼","aria-describedby":"button-addon2","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.coupon=e})},null,512),[[a["N"],t.coupon]]),Object(a["i"])("button",{class:["btn btn-outline-title",{disabled:""===t.coupon}],type:"button",id:"button-addon2",onClick:e[2]||(e[2]=function(){return t.useCoupon&&t.useCoupon.apply(t,arguments)})}," 套用優惠券 ",2)])):Object(a["f"])("",!0)]),Object(a["i"])("div",R,[Object(a["i"])(Gt,{type:"button",class:"btn btn-outline-content me-3",to:"/frontDesk/products"},{default:n((function(){return[W]})),_:1}),Object(a["i"])("button",{class:"btn btn-lightred",type:"submit",onClick:e[3]||(e[3]=Object(a["T"])((function(e){return t.isGoPay=!0}),["prevent"]))}," 前往結帳 ")])])):Object(a["f"])("",!0),X]))])])],64)})),Vt=c("5530"),Ct=(c("99af"),c("b441")),St=c("bc3a"),_t=c.n(St),Bt=c("1336"),Dt=c("cfb9"),It=c("98e4"),Ut=c("6c02"),Ft={components:{BaseSwiper:Ct["a"]},setup:function(){var t=Object(Ut["d"])(),e=Object(a["A"])({arr:[]}),c=Object(a["B"])(""),n=Object(a["B"])(!1),s=Object(a["B"])(!1),r=Object(a["A"])({arr:[]});function i(){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/products/all");_t.a.get(t).then((function(t){t.data.success?r.arr=t.data.products:Object(It["a"])(t,"取得所有商品資料")})).catch((function(t){Object(It["a"])(t,"取得所有商品資料")}))}function l(){var t=Object(a["B"])(""),i=function(){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart");_t.a.get(t).then((function(t){t.data.success?e.arr=t.data.data:Object(It["a"])(t,"取得購物車")})).catch((function(t){Object(It["a"])(t,"取得購物車")}))},l=function(t){c.value=t.id;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(t.id);_t.a.delete(e).then((function(t){t.data.success&&(Dt["a"].emit("update-cart"),i(),c.value=""),Object(It["a"])(t,"刪除商品")})).catch((function(t){Object(It["a"])(t,"刪除商品")}))},o=function(t,e){n.value=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(e);_t.a.put(c,{data:{product_id:e,qty:t}}).then((function(t){t.data.success&&(n.value=!1,Dt["a"].emit("update-cart"),i()),Object(It["a"])(t,"修改商品")})).catch((function(t){Object(It["a"])(t,"修改商品")}))},b=function(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/coupon");_t.a.post(e,{data:{code:t.value}}).then((function(t){t.data.success&&(Dt["a"].emit("update-cart"),i()),Object(It["a"])(t,"套用優惠券")})).catch((function(t){Object(It["a"])(t,"套用優惠券")}))};return Object(a["t"])((function(){i()})),{products:r,coupon:t,getCarts:i,delProduct:l,editCart:o,useCoupon:b,isGoPay:s}}function o(){var t=l(),e=t.editCart,c=function(t){var c=t.qty+1;e(c,t.id)},a=function(t){var c=t.qty-1;e(c,t.id)};return{addQty:c,minusQty:a}}function b(){var e=Object(a["A"])({user:{}}),n=Object(a["B"])(""),s=function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},r=function(){c.value="submit";var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/order");_t.a.post(a,{data:{user:e.user,message:n.value}}).then((function(e){c.value="",e.data.success?(t.push("/frontDesk/pay/".concat(e.data.orderId)),Dt["a"].emit("update-cart")):Object(It["a"])(e,"送出表單")})).catch((function(t){Object(It["a"])(t,"送出表單")}))};return{user:e,message:n,isPhone:s,onSubmit:r}}return Object(a["t"])((function(){i()})),Object(Vt["a"])(Object(Vt["a"])(Object(Vt["a"])({carts:e,isChangeQty:n,isLoading:c,currency:Bt["a"]},l()),o()),b())}};c("046f");Ft.render=Pt,Ft.__scopeId="data-v-59493441";e["default"]=Ft},"4de4":function(t,e,c){"use strict";var a=c("23e7"),n=c("b727").filter,s=c("1dde"),r=s("filter");a({target:"Array",proto:!0,forced:!r},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,c){"use strict";c.d(e,"a",(function(){return s}));c("b64b"),c("a4d3"),c("4de4"),c("e439"),c("159b"),c("dbb4");function a(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function n(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,a)}return c}function s(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?n(Object(c),!0).forEach((function(e){a(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):n(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}},"641e":function(t,e,c){},"9b20":function(t,e,c){"use strict";c("a04b")},a04b:function(t,e,c){},b0c0:function(t,e,c){var a=c("83ab"),n=c("9bf2").f,s=Function.prototype,r=s.toString,i=/^\s*function ([^ (]*)/,l="name";a&&!(l in s)&&n(s,l,{configurable:!0,get:function(){try{return r.call(this).match(i)[1]}catch(t){return""}}})},b441:function(t,e,c){"use strict";c("a4d3"),c("e01a");var a=c("7a23"),n=Object(a["U"])("data-v-262d4bfe");Object(a["z"])("data-v-262d4bfe");var s={class:"my-5"},r={class:"container"},i={class:"d-flex justify-content-center"},l={class:"pb-3 mb-3 border-bottom border-3 border-darkred d-inline-block"},o={class:"p-1 mb-0 text-title bg-darkred position-absolute"},b={class:"content"},u={class:"text-center text-title"},d=Object(a["i"])("div",{class:"d-flex justify-content-center align-items-center w-100"},null,-1);Object(a["x"])();var j=n((function(t,e,c,j,O,p){var f=Object(a["F"])("swiper-slide"),m=Object(a["F"])("swiper");return Object(a["w"])(),Object(a["e"])("section",s,[Object(a["i"])("div",r,[Object(a["i"])("div",i,[Object(a["i"])("h4",l,[Object(a["E"])(t.$slots,"default",{},void 0,!0)])]),Object(a["i"])(m,{autoplay:!0,breakpoints:j.swiperBreakpoints.breakpoints,class:"mb-3"},{default:n((function(){return[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(j.props.products,(function(t){return Object(a["w"])(),Object(a["e"])(f,{key:t.id},{default:n((function(){return[Object(a["i"])("div",{class:"img-card",onClick:function(e){return j.forwardingProduct(t.id)}},[Object(a["i"])("p",o,Object(a["I"])(t.category),1),Object(a["i"])("img",{src:t.imagesUrl[0],alt:t.description,class:"image"},null,8,["src","alt"]),Object(a["i"])("div",b,[Object(a["i"])("h3",u,Object(a["I"])(t.title),1),d])],8,["onClick"])]})),_:2},1024)})),128))]})),_:1},8,["breakpoints"])])])})),O=c("6d3b"),p=c("5dc8"),f=c("d17a"),m=c("90ea"),v=c("a16a"),h=(c("5f67"),c("6c02"));O["a"].use([p["a"],f["a"]]);var y={components:{Swiper:m["a"],SwiperSlide:v["a"]},props:{products:{type:Object,default:function(){return{}}}},setup:function(t){var e=Object(h["d"])(),c=Object(a["A"])({breakpoints:{575:{slidesPerView:1,spaceBetween:0},767:{slidesPerView:2,spaceBetween:20},991:{slidesPerView:3,spaceBetween:30},1190:{slidesPerView:4,spaceBetween:40}}});function n(t){e.push("/frontDesk/product/".concat(t))}return{props:t,swiperBreakpoints:c,forwardingProduct:n}}};c("9b20");y.render=j,y.__scopeId="data-v-262d4bfe";e["a"]=y},b64b:function(t,e,c){var a=c("23e7"),n=c("7b0b"),s=c("df75"),r=c("d039"),i=r((function(){s(1)}));a({target:"Object",stat:!0,forced:i},{keys:function(t){return s(n(t))}})},dbb4:function(t,e,c){var a=c("23e7"),n=c("83ab"),s=c("56ef"),r=c("fc6a"),i=c("06cf"),l=c("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,c,a=r(t),n=i.f,o=s(a),b={},u=0;while(o.length>u)c=n(a,e=o[u++]),void 0!==c&&l(b,e,c);return b}})},e439:function(t,e,c){var a=c("23e7"),n=c("d039"),s=c("fc6a"),r=c("06cf").f,i=c("83ab"),l=n((function(){r(1)})),o=!i||l;a({target:"Object",stat:!0,forced:o,sham:!i},{getOwnPropertyDescriptor:function(t,e){return r(s(t),e)}})}}]);
//# sourceMappingURL=chunk-df6c123a.8318a1ce.js.map