(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c5dddfa"],{4438:function(t,e,c){"use strict";c.r(e);c("b0c0"),c("b64b");var r=c("7a23"),n=Object(r["U"])("data-v-772d6e31");Object(r["z"])("data-v-772d6e31");var a=Object(r["i"])("div",{class:"bg-dark",style:{height:"68px"}},null,-1),o={class:"bg-dark container-lg",style:{"min-height":"calc(100vh - 212px)"}},s={class:"py-5 p-lg-5"},i={key:0,class:"cart-content"},l=Object(r["i"])("p",{class:"mb-0 fs-4"},"購物車內無東西",-1),u=Object(r["h"])("請選購商品"),b={class:"row"},d=Object(r["i"])("div",{class:"col-md-1"},null,-1),O={key:0,class:"col-md-6 col-12"},j=Object(r["i"])("h4",{class:"pb-2 mb-3 border-2 border-bottom border-title text-title"}," 購物車內容 ",-1),f={class:"table text-center table-responsive-lg text-content"},p=Object(r["i"])("thead",null,[Object(r["i"])("tr",null,[Object(r["i"])("th",{scope:"col"},"商品名稱"),Object(r["i"])("th",{scope:"col",width:"120"},"數量"),Object(r["i"])("th",{scope:"col",class:"text-end"},"小計"),Object(r["i"])("th",{scope:"col"})])],-1),m={class:"align-middle"},h={class:"align-middle"},v={class:"input-group input-group-sm"},g={class:"align-middle text-end"},y={class:"text-end"},w={key:0,class:"btn btn-outline-danger btn-sm",type:"button",disabled:""},k=Object(r["i"])("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),x=Object(r["i"])("span",{class:"visually-hidden"},"Loading...",-1),C=Object(r["i"])("i",{class:"bi bi-trash-fill"},null,-1),V={class:"text-darkred"},P=Object(r["i"])("td",{colspan:"3",class:"text-end"},"折扣優惠",-1),E={class:"line-through text-end"},S=Object(r["i"])("td",{colspan:"3",class:"text-end"},"總金額",-1),D={class:"text-end"},q={key:0,class:"mb-3 input-group"},U={class:"col-md-4 col-12"},_={key:0},F=Object(r["i"])("h4",{class:"pb-2 mb-3 border-2 border-bottom border-title text-title"}," 收件人資訊 ",-1),Q={class:"mb-3 form-group"},I=Object(r["i"])("label",{for:"name",class:"mb-2"},[Object(r["i"])("span",{class:"text-darkred"},"*"),Object(r["h"])(" 聯絡人 ")],-1),B={class:"mb-3 form-group"},L=Object(r["i"])("label",{for:"email",class:"mb-2"},[Object(r["i"])("span",{class:"text-darkred"},"*"),Object(r["h"])(" 信箱 ")],-1),$={class:"mb-3 form-group"},A=Object(r["i"])("label",{for:"tel",class:"mb-2"},[Object(r["i"])("span",{class:"text-darkred"},"*"),Object(r["h"])(" 電話 ")],-1),N={class:"mb-3 form-group"},J=Object(r["i"])("label",{for:"address",class:"mb-2"},[Object(r["i"])("span",{class:"text-darkred"},"*"),Object(r["h"])(" 地址 ")],-1),z={class:"mb-3 form-group"},M=Object(r["i"])("label",{for:"message",class:"mb-2"},"留言",-1),G={class:"d-flex justify-content-end"},H=Object(r["h"])("繼續購物"),K={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},R=Object(r["h"])(" 送出訂單 "),T=Object(r["i"])("div",{class:"col-md-1"},null,-1);Object(r["x"])();var W=n((function(t,e,c,W,X,Y){var Z,tt,et,ct,rt,nt,at,ot,st=Object(r["F"])("router-link"),it=Object(r["F"])("Field"),lt=Object(r["F"])("ErrorMessage"),ut=Object(r["F"])("Form");return Object(r["w"])(),Object(r["e"])(r["a"],null,[a,Object(r["i"])("div",o,[Object(r["i"])("div",s,[0===(null===(Z=W.carts.arr)||void 0===Z||null===(tt=Z.carts)||void 0===tt?void 0:tt.length)?(Object(r["w"])(),Object(r["e"])("div",i,[l,Object(r["i"])(st,{to:"/frontDesk/products",class:"d-block text-darkred fs-4"},{default:n((function(){return[u]})),_:1})])):Object(r["f"])("",!0),Object(r["i"])("div",b,[d,0!==(null===(et=W.carts.arr)||void 0===et||null===(ct=et.carts)||void 0===ct?void 0:ct.length)?(Object(r["w"])(),Object(r["e"])("div",O,[j,Object(r["i"])("table",f,[p,Object(r["i"])("tbody",null,[(Object(r["w"])(!0),Object(r["e"])(r["a"],null,Object(r["D"])(W.carts.arr.carts,(function(e){return Object(r["w"])(),Object(r["e"])("tr",{key:e.id},[Object(r["i"])("td",m,Object(r["I"])(e.product.title),1),Object(r["i"])("td",h,[Object(r["i"])("div",v,[Object(r["i"])("button",{class:["btn btn-outline-content",{disabled:W.isChangeQty}],type:"button",onClick:function(c){return t.addQty(e)}}," + ",10,["onClick"]),Object(r["S"])(Object(r["i"])("input",{type:"number",class:"text-center form-control",min:"1",disabled:"","onUpdate:modelValue":function(t){return e.qty=t}},null,8,["onUpdate:modelValue"]),[[r["N"],e.qty,void 0,{number:!0}]]),Object(r["i"])("button",{class:["btn btn-outline-content",{disabled:e.qty<=1||W.isChangeQty}],type:"button",onClick:function(c){return t.minusQty(e)}}," - ",10,["onClick"])])]),Object(r["i"])("td",g," $ "+Object(r["I"])(W.currency(e.total)),1),Object(r["i"])("td",y,[W.isLoading===e.id?(Object(r["w"])(),Object(r["e"])("button",w,[k,x])):(Object(r["w"])(),Object(r["e"])("button",{key:1,type:"button",class:"btn btn-sm btn-trash",onClick:function(c){return t.delProduct(e)}},[C],8,["onClick"]))])])})),128))]),Object(r["i"])("tfoot",null,[Object(r["S"])(Object(r["i"])("tr",V,[P,Object(r["i"])("td",E," $ "+Object(r["I"])(W.currency(W.carts.arr.total-W.carts.arr.final_total)),1)],512),[[r["O"],W.carts.arr.total>W.carts.arr.final_total]]),Object(r["i"])("tr",null,[S,Object(r["i"])("td",D," $ "+Object(r["I"])(W.currency(W.carts.arr.final_total)),1)])])]),0!=(null===(rt=W.carts.arr)||void 0===rt||null===(nt=rt.carts)||void 0===nt?void 0:nt.length)?(Object(r["w"])(),Object(r["e"])("div",q,[Object(r["S"])(Object(r["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠券代碼","aria-label":"請輸入優惠券代碼","aria-describedby":"button-addon2","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.coupon=e})},null,512),[[r["N"],t.coupon]]),Object(r["i"])("button",{class:["btn btn-outline-title",{disabled:""===t.coupon}],type:"button",id:"button-addon2",onClick:e[2]||(e[2]=function(){return t.useCoupon&&t.useCoupon.apply(t,arguments)})}," 套用優惠券 ",2)])):Object(r["f"])("",!0)])):Object(r["f"])("",!0),Object(r["i"])("div",U,[0!=(null===(at=W.carts.arr)||void 0===at||null===(ot=at.carts)||void 0===ot?void 0:ot.length)?(Object(r["w"])(),Object(r["e"])("div",_,[F,Object(r["i"])(ut,{onSubmit:t.onSubmit},{default:n((function(c){var a=c.errors;return[Object(r["i"])("div",Q,[I,Object(r["i"])(it,{id:"name",name:"聯絡人",type:"text",class:["form-control",{"is-invalid":a["聯絡人"]}],placeholder:"請輸入聯絡人",rules:"required",modelValue:t.user.user.name,"onUpdate:modelValue":e[3]||(e[3]=function(e){return t.user.user.name=e})},null,8,["class","modelValue"]),Object(r["i"])(lt,{name:"聯絡人",class:"invalid-feedback"})]),Object(r["i"])("div",B,[L,Object(r["i"])(it,{id:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":a["信箱"]}],placeholder:"請輸入信箱",rules:"email|required",modelValue:t.user.user.email,"onUpdate:modelValue":e[4]||(e[4]=function(e){return t.user.user.email=e})},null,8,["class","modelValue"]),Object(r["i"])(lt,{name:"信箱",class:"invalid-feedback"})]),Object(r["i"])("div",$,[A,Object(r["i"])(it,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":a["電話"]}],placeholder:"請輸入電話",rules:t.isPhone,modelValue:t.user.user.tel,"onUpdate:modelValue":e[5]||(e[5]=function(e){return t.user.user.tel=e})},null,8,["class","rules","modelValue"]),Object(r["i"])(lt,{name:"電話",class:"invalid-feedback"})]),Object(r["i"])("div",N,[J,Object(r["i"])(it,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":a["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:t.user.user.address,"onUpdate:modelValue":e[6]||(e[6]=function(e){return t.user.user.address=e})},null,8,["class","modelValue"]),Object(r["i"])(lt,{name:"地址",class:"invalid-feedback"})]),Object(r["i"])("div",z,[M,Object(r["S"])(Object(r["i"])("textarea",{class:"form-control",id:"message",placeholder:"有什麼話想對我們說呢?",rows:"3","onUpdate:modelValue":e[7]||(e[7]=function(e){return t.message=e})},null,512),[[r["N"],t.message]])]),Object(r["i"])("div",G,[Object(r["i"])(st,{type:"button",class:"btn btn-outline-content me-3",to:"/frontDesk/products"},{default:n((function(){return[H]})),_:1}),Object(r["i"])("button",{class:["btn btn-darkred",{"not-allowed":Object.keys(t.user.user).length<4}],type:"submit"},["submit"===W.isLoading?(Object(r["w"])(),Object(r["e"])("span",K)):Object(r["f"])("",!0),R],2)])]})),_:1},8,["onSubmit"])])):Object(r["f"])("",!0)]),T])])])],64)})),X=c("5530"),Y=(c("99af"),c("bc3a")),Z=c.n(Y),tt=c("1336"),et=c("cfb9"),ct=c("98e4"),rt=c("6c02"),nt={setup:function(){var t=Object(rt["d"])(),e=Object(r["A"])({arr:[]}),c=Object(r["B"])(""),n=Object(r["B"])(!1);function a(){var t=Object(r["B"])(""),a=function(){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart");Z.a.get(t).then((function(t){t.data.success?e.arr=t.data.data:console.error=function(){throw new Error(t.data.message)}})).catch((function(t){console.error=function(){throw new Error(t)}}))},o=function(t){c.value=t.id;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(t.id);Z.a.delete(e).then((function(t){t.data.success?(et["a"].emit("update-cart"),a(),c.value=""):console.error=function(){throw new Error(t.data.message)},Object(ct["a"])(t,"刪除商品")})).catch((function(t){console.error=function(){throw new Error(t)}}))},s=function(t,e){n.value=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(e);Z.a.put(c,{data:{product_id:e,qty:t}}).then((function(t){t.data.success?(n.value=!1,et["a"].emit("update-cart"),a()):console.error=function(){throw new Error(t.data.message)},Object(ct["a"])(t,"修改商品")})).catch((function(t){console.error=function(){throw new Error(t)}}))},i=function(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/coupon");Z.a.post(e,{data:{code:t.value}}).then((function(t){t.data.success?(et["a"].emit("update-cart"),a()):console.error=function(){throw new Error(t.data.message)},Object(ct["a"])(t,"套用優惠券")})).catch((function(t){console.error=function(){throw new Error(t)}}))};return Object(r["t"])((function(){a()})),{coupon:t,getCarts:a,delProduct:o,editCart:s,useCoupon:i}}function o(){var t=a(),e=t.editCart,c=function(t){var c=t.qty+1;e(c,t.id)},r=function(t){var c=t.qty-1;e(c,t.id)};return{addQty:c,minusQty:r}}function s(){var e=Object(r["A"])({user:{}}),n=Object(r["B"])(""),a=function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},o=function(){c.value="submit";var r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/order");Z.a.post(r,{data:{user:e.user,message:n.value}}).then((function(e){c.value="",e.data.success?(t.push("/frontDesk/pay/".concat(e.data.orderId)),et["a"].emit("update-cart")):console.error=function(){throw new Error(e.data.message)}})).catch((function(t){console.error=function(){throw new Error(t)}}))};return{user:e,message:n,isPhone:a,onSubmit:o}}return Object(X["a"])(Object(X["a"])(Object(X["a"])({carts:e,isChangeQty:n,isLoading:c,currency:tt["a"]},a()),o()),s())}};c("c585");nt.render=W,nt.__scopeId="data-v-772d6e31";e["default"]=nt},"4de4":function(t,e,c){"use strict";var r=c("23e7"),n=c("b727").filter,a=c("1dde"),o=a("filter");r({target:"Array",proto:!0,forced:!o},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,c){"use strict";c.d(e,"a",(function(){return a}));c("b64b"),c("a4d3"),c("4de4"),c("e439"),c("159b"),c("dbb4");function r(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function n(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,r)}return c}function a(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?n(Object(c),!0).forEach((function(e){r(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):n(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}},b0c0:function(t,e,c){var r=c("83ab"),n=c("9bf2").f,a=Function.prototype,o=a.toString,s=/^\s*function ([^ (]*)/,i="name";r&&!(i in a)&&n(a,i,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},b64b:function(t,e,c){var r=c("23e7"),n=c("7b0b"),a=c("df75"),o=c("d039"),s=o((function(){a(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return a(n(t))}})},c585:function(t,e,c){"use strict";c("dad8")},dad8:function(t,e,c){},dbb4:function(t,e,c){var r=c("23e7"),n=c("83ab"),a=c("56ef"),o=c("fc6a"),s=c("06cf"),i=c("8418");r({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,c,r=o(t),n=s.f,l=a(r),u={},b=0;while(l.length>b)c=n(r,e=l[b++]),void 0!==c&&i(u,e,c);return u}})},e439:function(t,e,c){var r=c("23e7"),n=c("d039"),a=c("fc6a"),o=c("06cf").f,s=c("83ab"),i=n((function(){o(1)})),l=!s||i;r({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(t,e){return o(a(t),e)}})}}]);
//# sourceMappingURL=chunk-6c5dddfa.72a6224d.js.map