(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24bc772e"],{"241e":function(e,t,o){"use strict";var n=o("7a23"),a=Object(n["U"])("data-v-9ae1be70");Object(n["z"])("data-v-9ae1be70");var c={class:"d-flex align-items-center"},i={class:"overflow-hidden"},l={class:"position-relative btn-container"},b=Object(n["h"])(" 刪除 "),u=Object(n["i"])("i",{class:"bi bi-trash-fill"},null,-1),s=Object(n["h"])(" 確定 "),r=Object(n["i"])("i",{class:"bi bi-question-circle-fill"},null,-1);Object(n["x"])();var d=a((function(e,t,o,a,d,p){return Object(n["w"])(),Object(n["e"])("div",c,[Object(n["i"])("div",i,[Object(n["i"])("div",l,[Object(n["i"])("button",{type:"button",class:["btn btn-outline-darkred",{"btn-sm":a.props.btnSmall}]},[b,u],2),Object(n["i"])("button",{type:"button",class:["position-absolute btn btn-darkred w-100",{"btn-sm":a.props.btnSmall}]},[s,r],2)])])])})),p={props:{btnSmall:{Boolean:Boolean,default:!1}},setup:function(e){return{props:e}}};o("7812");p.render=d,p.__scopeId="data-v-9ae1be70";t["a"]=p},"2d24":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o("7a23");function a(){return Object(n["m"])("$swal")}},4431:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),a={class:"my-2"},c=Object(n["i"])("h4",{class:"pb-3 mb-3 fw-bold border-bottom border-3 border-darkred"}," 優惠券 ",-1),i={class:"text-end"},l={class:"table-responsive-lg"},b={class:"table mt-4 table-dark table-hover"},u=Object(n["i"])("thead",{class:"text-title"},[Object(n["i"])("tr",null,[Object(n["i"])("th",null,"優惠券名稱"),Object(n["i"])("th",null,"優惠"),Object(n["i"])("th",null,"到期時間"),Object(n["i"])("th",null,"折扣碼"),Object(n["i"])("th",null,"是否啟用"),Object(n["i"])("th",null,"編輯"),Object(n["i"])("th",null,"刪除")])],-1),s={class:"text-content"},r={class:"text-center"},d={class:"text-center"},p={class:"text-center"},j={class:"text-center"},O={key:0,class:"text-success"},f={key:1,class:"text-content"},m=Object(n["h"])(" 編輯 "),v=Object(n["i"])("i",{class:"bi bi-pen-fill"},null,-1),g={class:"mt-5 d-flex justify-content-center"},h=Object(n["h"])(" 優惠券 ");function C(e,t,o,C,w,k){var x=Object(n["F"])("BaseLoading"),y=Object(n["F"])("BaseDelteButton"),_=Object(n["F"])("BasePagination"),M=Object(n["F"])("BaseCouponModal"),B=Object(n["F"])("BaseDeleteCouponModal");return Object(n["w"])(),Object(n["e"])(n["a"],null,[Object(n["i"])(x,{isLoading:e.isLoading},null,8,["isLoading"]),Object(n["i"])("div",a,[c,Object(n["i"])("div",i,[Object(n["i"])("button",{class:"text-white btn btn-darkred",type:"button",onClick:t[1]||(t[1]=function(t){return e.openCouponModal({},!0)})}," 新增優惠券 ")]),Object(n["i"])("div",l,[Object(n["i"])("table",b,[u,Object(n["i"])("tbody",s,[(Object(n["w"])(!0),Object(n["e"])(n["a"],null,Object(n["D"])(C.coupons.arr,(function(t){return Object(n["w"])(),Object(n["e"])("tr",{key:t.id},[Object(n["i"])("td",null,Object(n["I"])(t.title),1),Object(n["i"])("td",r,Object(n["I"])(t.percent)+"%",1),Object(n["i"])("td",d,Object(n["I"])(C.formatDate(t.due_date)),1),Object(n["i"])("td",p,Object(n["I"])(t.code),1),Object(n["i"])("td",j,[t.is_enabled?(Object(n["w"])(),Object(n["e"])("span",O,"啟用")):(Object(n["w"])(),Object(n["e"])("span",f,"未啟用"))]),Object(n["i"])("td",null,[Object(n["i"])("button",{type:"button",class:"btn btn-outline-title btn-sm",onClick:function(o){return e.openCouponModal(t,!1)}},[m,v],8,["onClick"])]),Object(n["i"])("td",null,[Object(n["i"])(y,{btnSmall:!0,onClick:function(o){return e.openDeleteModal(t)}},null,8,["onClick"])])])})),128))])])])]),Object(n["i"])("div",g,[Object(n["i"])(_,{pagination:e.pagination,onGetNowpage:e.getCoupons},null,8,["pagination","onGetNowpage"])]),Object(n["i"])(M,{ref:"couponModal",coupon:e.tempCoupon,newCoupon:e.newCoupon,onCouponStatus:e.couponStatus},null,8,["coupon","newCoupon","onCouponStatus"]),Object(n["i"])(B,{ref:"couponDeleteModal",deleteItem:e.tempCoupon.obj,onDeleteItem:e.delCoupon},{default:Object(n["R"])((function(){return[h]})),_:1},8,["deleteItem","onDeleteItem"])],64)}var w=o("5530"),k=(o("99af"),o("241e")),x=o("dd87"),y=Object(n["U"])("data-v-4f2d097a");Object(n["z"])("data-v-4f2d097a");var _={id:"couponModal",ref:"couponModal",class:"modal fade",tabindex:"-1","aria-labelledby":"couponModalLabel","aria-hidden":"true"},M={class:"modal-dialog"},B={class:"border-0 modal-content"},D={class:"bg-darkred modal-header"},I={id:"couponModalLabel",class:"modal-title text-title"},S={key:0},N={key:1},L=Object(n["i"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),U={class:"modal-body bg-dark"},F={class:"row"},J={class:"col-sm-12"},P={class:"form-group"},V=Object(n["i"])("label",{for:"title"},[Object(n["h"])("標題 "),Object(n["i"])("span",{class:"text-danger"},"*")],-1),z={class:"row"},A={class:"form-group col-md-6"},T=Object(n["i"])("label",{for:"percent"},[Object(n["h"])("優惠"),Object(n["i"])("span",{class:"text-danger"},"*")],-1),G={class:"form-group col-md-6"},$=Object(n["i"])("label",{for:"due_date"},[Object(n["h"])("到期時間"),Object(n["i"])("span",{class:"text-danger"},"*")],-1),q={class:"col-12"},E={class:"form-group col-12"},Q=Object(n["i"])("label",{for:"code"},[Object(n["h"])("折扣碼"),Object(n["i"])("span",{class:"text-danger"},"*")],-1),R=Object(n["i"])("hr",null,null,-1),H={class:"form-group"},K={class:"form-check"},W=Object(n["i"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),X={class:"modal-footer bg-dark"},Y=Object(n["i"])("button",{type:"button",class:"btn btn-outline-title","data-bs-dismiss":"modal"}," 取消 ",-1);Object(n["x"])();var Z=y((function(e,t,o,a,c,i){return Object(n["w"])(),Object(n["e"])("div",_,[Object(n["i"])("div",M,[Object(n["i"])("div",B,[Object(n["i"])("div",D,[Object(n["i"])("h5",I,[o.newCoupon?(Object(n["w"])(),Object(n["e"])("span",S,"新增優惠券")):(Object(n["w"])(),Object(n["e"])("span",N,"修改優惠券"))]),L]),Object(n["i"])("div",U,[Object(n["i"])("div",F,[Object(n["i"])("div",J,[Object(n["i"])("div",P,[V,Object(n["S"])(Object(n["i"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入優惠券名稱","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.tempCoupon.obj.title=e})},null,512),[[n["N"],a.tempCoupon.obj.title]])]),Object(n["i"])("div",z,[Object(n["i"])("div",A,[T,Object(n["S"])(Object(n["i"])("input",{id:"percent ",type:"number",min:"0",max:"100",class:"form-control",placeholder:"請輸入優惠(0-100)","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.tempCoupon.obj.percent=e})},null,512),[[n["N"],a.tempCoupon.obj.percent,void 0,{number:!0}]])]),Object(n["i"])("div",G,[$,Object(n["S"])(Object(n["i"])("input",{id:"due_date",type:"date",class:"form-control",min:a.today,placeholder:"請選擇時間","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.tempCoupon.obj.due_date=e})},null,8,["min"]),[[n["N"],a.tempCoupon.obj.due_date]])])]),Object(n["i"])("div",q,[Object(n["i"])("div",E,[Q,Object(n["S"])(Object(n["i"])("input",{id:"code",type:"text",class:"form-control",placeholder:"請輸入折扣碼","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.tempCoupon.obj.code=e})},null,512),[[n["N"],a.tempCoupon.obj.code]])])]),R,Object(n["i"])("div",H,[Object(n["i"])("div",K,[Object(n["S"])(Object(n["i"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.tempCoupon.obj.is_enabled=e})},null,512),[[n["L"],a.tempCoupon.obj.is_enabled,void 0,{number:!0}]]),W])])])])]),Object(n["i"])("div",X,[Y,Object(n["i"])("button",{type:"button",class:"btn btn-darkred",onClick:t[6]||(t[6]=function(e){return a.emit("couponStatus",a.tempCoupon.obj)})}," 確認 ")])])])],512)})),ee=o("7c2b"),te=o.n(ee),oe=o("1336"),ne={props:{coupon:{type:Object,default:function(){return{}}},newCoupon:{type:Boolean,default:function(){return!0}}},emits:["couponStatus"],setup:function(e,t){var o=t.emit;function a(){var e=Object(n["B"])(null),t=null,o=function(){t.show()},a=function(){t.hide()};return Object(n["t"])((function(){t=new te.a(e.value)})),{couponModal:e,showCouponModal:o,hideCouponModal:a}}var c=Object(n["A"])({obj:{}}),i=Object(oe["b"])(Date.now()/1e3);return Object(n["Q"])((function(){return e.coupon.obj}),(function(){c.obj=Object(w["a"])(Object(w["a"])({},e.coupon.obj),{},{due_date:Object(oe["b"])(e.coupon.obj.due_date)})})),Object(w["a"])({tempCoupon:c,today:i,emit:o,props:e},a())}};ne.render=Z,ne.__scopeId="data-v-4f2d097a";var ae=ne,ce=o("6461"),ie=o("5d10"),le=o("bc3a"),be=o.n(le),ue=o("2d24"),se={components:{BaseDelteButton:k["a"],BasePagination:x["a"],BaseCouponModal:ae,BaseDeleteCouponModal:ce["a"],BaseLoading:ie["a"]},setup:function(){var e=Object(n["B"])(null),t=Object(ue["a"])(),o=Object(n["A"])({arr:[]}),a=function(e,o){t.fire({icon:"success",title:e,text:o,background:"#262833",confirmButtonColor:"#98142b"})},c=function(e,o){t.fire({icon:"error",title:e,text:o,background:"#262833",confirmButtonColor:"#98142b"})};function i(){var t=Object(n["A"])({obj:{}}),i=Object(n["B"])(!1),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;i.value=!0;var n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/coupons?page=").concat(e);be.a.get(n).then((function(e){e.data.success?(o.arr=e.data.coupons,t.obj=e.data.pagination,i.value=!1):c("Oops...","取得優惠券資料錯誤")})).catch((function(){c("Oops...","取得優惠券資料錯誤")}))},b=function(t){var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/coupon/").concat(t);be.a.delete(o).then((function(t){t.data.success?(l(),a("刪除優惠券","刪除優惠券成功!")):c("Oops...","刪除優惠券失敗!"),e.value.hideDelModal()})).catch((function(){c("Oops...","刪除優惠券錯誤")}))};return Object(n["t"])((function(){l()})),{pagination:t,isLoading:i,getCoupons:l,delCoupon:b}}function l(){var t=Object(n["B"])(null),o=Object(n["A"])({obj:{}}),l=Object(n["B"])(!1),b=i(),u=b.getCoupons,s=function(t){o.obj=JSON.parse(JSON.stringify(t)),e.value.showDelModal()},r=function(e,n){o.obj=JSON.parse(JSON.stringify(e)),l.value=n,t.value.showCouponModal()},d=function(e){var n;o.obj=Object(w["a"])(Object(w["a"])({},e),{},{due_date:new Date(e.due_date).getTime()/1e3,is_enabled:null!==(n=e.is_enabled)&&void 0!==n?n:0});var i="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/coupon"),b="post";l.value||(i="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/coupon/").concat(e.id),b="put"),be.a[b](i,{data:o.obj}).then((function(e){e.data.success?(u(),a(l.value?"新增":"修改",l.value?"新增優惠券成功!":"修改優惠券成功!")):c("Oops...",e.data.message),t.value.hideCouponModal()})).catch((function(){c("Oops...","新增修改錯誤")}))};return{couponModal:t,tempCoupon:o,newCoupon:l,openDeleteModal:s,openCouponModal:r,couponStatus:d}}return Object(w["a"])(Object(w["a"])(Object(w["a"])({},l()),i()),{},{formatDate:oe["b"],couponDeleteModal:e,coupons:o})}};se.render=C;t["default"]=se},"4b72":function(e,t,o){"use strict";o("7919")},"5d10":function(e,t,o){"use strict";var n=o("7a23"),a=Object(n["U"])("data-v-a6b73326");Object(n["z"])("data-v-a6b73326");var c=Object(n["i"])("section",null,[Object(n["i"])("div",{class:"loader"})],-1);Object(n["x"])();var i=a((function(e,t,o,i,l,b){var u=Object(n["F"])("Loading");return Object(n["w"])(),Object(n["e"])(u,{active:i.attrs.isLoading,"background-color":"black"},{default:a((function(){return[c]})),_:1},8,["active"])})),l={setup:function(e,t){var o=t.attrs;return{attrs:o}}};o("4b72");l.render=i,l.__scopeId="data-v-a6b73326";t["a"]=l},6461:function(e,t,o){"use strict";var n=o("7a23"),a={id:"delModal",ref:"delModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true"},c={class:"modal-dialog"},i={class:"border-0 modal-content"},l={class:"text-title modal-header bg-darkred"},b={id:"delModalLabel",class:"modal-title"},u=Object(n["h"])("刪除"),s=Object(n["i"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),r={class:"modal-body bg-dark"},d=Object(n["h"])(" 是否刪除 "),p={class:"text-darkred"},j=Object(n["h"])(" 商品(刪除後將無法恢復)。 "),O={class:"modal-footer bg-dark"},f=Object(n["i"])("button",{type:"button",class:"btn btn-outline-title","data-bs-dismiss":"modal"}," 取消 ",-1);function m(e,t,o,m,v,g){return Object(n["w"])(),Object(n["e"])("div",a,[Object(n["i"])("div",c,[Object(n["i"])("div",i,[Object(n["i"])("div",l,[Object(n["i"])("h5",b,[Object(n["i"])("span",null,[u,Object(n["E"])(e.$slots,"default")])]),s]),Object(n["i"])("div",r,[d,Object(n["i"])("strong",p,Object(n["I"])(m.props.deleteItem.title),1),j]),Object(n["i"])("div",O,[f,Object(n["i"])("button",{type:"button",class:"btn btn-darkred",onClick:t[1]||(t[1]=function(e){return m.emit("deleteItem",m.props.deleteItem.id)})}," 確認刪除 ")])])])],512)}var v=o("5530"),g=o("7c2b"),h=o.n(g),C={props:{deleteItem:{type:Object,default:function(){return{}}}},emits:["deleteItem"],setup:function(e,t){var o=t.emit;function a(){var e=Object(n["B"])(null),t=null,o=function(){t.show()},a=function(){t.hide()};return Object(n["t"])((function(){t=new h.a(e.value)})),{delModal:e,showDelModal:o,hideDelModal:a}}return Object(v["a"])({props:e,emit:o},a())}};C.render=m;t["a"]=C},7812:function(e,t,o){"use strict";o("a078")},7919:function(e,t,o){},a078:function(e,t,o){},dd87:function(e,t,o){"use strict";var n=o("7a23"),a=Object(n["U"])("data-v-def117e8");Object(n["z"])("data-v-def117e8");var c={"aria-label":"Page navigation example"},i={class:"pagination"},l=Object(n["i"])("span",{"aria-hidden":"true"},"«",-1),b=Object(n["i"])("span",{"aria-hidden":"true"},"»",-1);Object(n["x"])();var u=a((function(e,t,o,a,u,s){return Object(n["w"])(),Object(n["e"])("nav",c,[Object(n["i"])("ul",i,[Object(n["i"])("li",{class:["page-item",{disabled:!a.props.pagination.obj.has_pre}]},[Object(n["i"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(n["T"])((function(e){return a.emit("getNowpage",a.props.pagination.obj.current_page-1)}),["prevent"]))},[l])],2),(Object(n["w"])(!0),Object(n["e"])(n["a"],null,Object(n["D"])(a.props.pagination.obj.total_pages,(function(e){return Object(n["w"])(),Object(n["e"])("li",{class:["page-item",{active:e===a.props.pagination.obj.current_page}],key:e},[Object(n["i"])("a",{class:"page-link",href:"#",onClick:Object(n["T"])((function(t){return a.emit("getNowpage",e)}),["prevent"])},Object(n["I"])(e),9,["onClick"])],2)})),128)),Object(n["i"])("li",{class:["page-item",{disabled:!a.props.pagination.obj.has_next}]},[Object(n["i"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(n["T"])((function(e){return a.emit("getNowpage",a.props.pagination.obj.current_page+1)}),["prevent"]))},[b])],2)])])})),s={props:{pagination:{type:Object,default:function(){return{}}},getProducts:{type:Function,default:function(){}}},emits:["getNowpage"],setup:function(e,t){var o=t.emit;return{props:e,emit:o}}};s.render=u,s.__scopeId="data-v-def117e8";t["a"]=s}}]);
//# sourceMappingURL=chunk-24bc772e.bdf8783d.js.map