{"version":3,"sources":["webpack:///./src/views/frontDesk/FrontDesk.vue","webpack:///./src/components/BaseCartModal.vue","webpack:///./src/components/BaseCartModal.vue?3d7b","webpack:///./src/views/frontDesk/FrontDesk.vue?b6ab","webpack:///./src/components/BaseCartModal.vue?817c"],"names":["class","tabindex","ref","type","data-bs-dismiss","aria-label","scope","disabled","role","aria-hidden","colspan","showModal","carts","arr","length","to","hideModal","item","key","id","product","title","qty","currency","total","isLoading","delProduct","final_total","placeholder","aria-describedby","coupon","useCoupon","payment","components","BaseScrollTop","setup","modalDetail","router","cartModal","modal","show","hide","push","value","cartDetail","getCarts","url","a","get","then","res","data","success","console","error","Error","message","catch","err","delete","pushMessageState","post","code","emitter","on","render","__scopeId","BaseNavbar","BaseFooter","BaseCartModal","ToastMessages"],"mappings":"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","file":"js/chunk-48a01014.db1a8831.js","sourcesContent":["<script>\nimport BaseNavbar from '@/components/BaseNavbar.vue';\nimport BaseFooter from '@/components/BaseFooter.vue';\nimport BaseCartModal from '@/components/BaseCartModal.vue';\nimport ToastMessages from '@/components/ToastMessages.vue';\n\nexport default {\n  components: {\n    BaseNavbar,\n    BaseFooter,\n    BaseCartModal,\n    ToastMessages,\n  },\n};\n</script>\n\n<template>\n  <ToastMessages />\n  <BaseNavbar />\n  <div class=\"bg-dark\">\n    <Router-View />\n  </div>\n  <BaseFooter />\n  <BaseCartModal />\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","<script>\nimport BaseScrollTop from '@/components/BaseScrollTop.vue';\nimport Modal from 'bootstrap/js/dist/modal';\nimport axios from 'axios';\nimport { currency } from '@/methods/filter';\nimport emitter from '@/methods/emitter';\nimport pushMessageState from '@/methods/pushMessageState';\nimport { onMounted, reactive, ref } from 'vue';\nimport { useRouter } from 'vue-router';\n\nexport default {\n  components: {\n    BaseScrollTop,\n  },\n  setup() {\n    function modalDetail() {\n      const router = useRouter();\n      const cartModal = ref(null);\n      let modal = null;\n\n      const showModal = () => {\n        modal.show();\n      };\n      const hideModal = () => {\n        modal.hide();\n      };\n      const payment = () => {\n        hideModal();\n        router.push('/frontDesk/carts');\n      };\n\n      onMounted(() => {\n        modal = new Modal(cartModal.value);\n      });\n\n      return {\n        cartModal,\n        showModal,\n        hideModal,\n        payment,\n      };\n    }\n    function cartDetail() {\n      const carts = reactive({ arr: [] });\n      const coupon = ref('');\n      const isLoading = ref('');\n\n      const getCarts = () => {\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n        axios\n          .get(url)\n          .then((res) => {\n            if (res.data.success) {\n              carts.arr = res.data.data;\n            } else {\n              console.error = () => {\n                throw new Error(res.data.message);\n              };\n            }\n          })\n          .catch((err) => {\n            console.error = () => {\n              throw new Error(err);\n            };\n          });\n      };\n      const delProduct = (item) => {\n        isLoading.value = item.id;\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n        axios\n          .delete(url)\n          .then((res) => {\n            if (res.data.success) {\n              getCarts();\n            } else {\n              console.error = () => {\n                throw new Error(res.data.message);\n              };\n            }\n            isLoading.value = '';\n            pushMessageState(res, '刪除商品');\n          })\n          .catch((err) => {\n            console.error = () => {\n              throw new Error(err);\n            };\n          });\n      };\n      const useCoupon = () => {\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n        axios\n          .post(url, { data: { code: coupon.value } })\n          .then((res) => {\n            if (res.data.success) {\n              getCarts();\n            } else {\n              console.error = () => {\n                throw new Error(res.data.message);\n              };\n            }\n            pushMessageState(res, '套用優惠券');\n          })\n          .catch((err) => {\n            console.error = () => {\n              throw new Error(err);\n            };\n          });\n      };\n\n      onMounted(() => {\n        getCarts();\n        emitter.on('update-cart', () => {\n          getCarts();\n        });\n      });\n\n      return {\n        carts,\n        coupon,\n        isLoading,\n        delProduct,\n        useCoupon,\n      };\n    }\n\n    return {\n      ...modalDetail(),\n      ...cartDetail(),\n      currency,\n    };\n  },\n};\n</script>\n\n<template>\n  <div class=\"cart-btn-position\">\n    <BaseScrollTop />\n    <button type=\"button\" class=\"cart-btn\" @click=\"showModal\">\n     <i class=\"bi bi-cart-plus-fill\"></i>\n      <span v-show=\"carts.arr?.carts?.length\">{{\n        carts.arr?.carts?.length\n      }}</span>\n    </button>\n  </div>\n  <div class=\"modal\" tabindex=\"-1\" ref=\"cartModal\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content bg-dark border-title\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title text-title\">購物車</h5>\n          <button\n            type=\"button\"\n            class=\"btn-close btn-close-white\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"cart-content\" v-if=\"carts.arr?.carts?.length === 0\">\n            <p class=\"mb-0 fs-5\">購物車內無東西</p>\n            <router-link\n              to=\"/frontDesk/products\"\n              class=\"d-block text-darkred fs-4\"\n              @click=\"hideModal\"\n              >請選購商品</router-link\n            >\n          </div>\n          <table class=\"table text-center table-responsive-lg\" v-else>\n            <thead>\n              <tr class=\"text-title\">\n                <th scope=\"col\">商品名稱</th>\n                <th scope=\"col\">數量</th>\n                <th scope=\"col\" class=\"text-end\">小計</th>\n                <th scope=\"col\"></th>\n              </tr>\n            </thead>\n            <tbody class=\"text-content\">\n              <tr v-for=\"item in carts.arr.carts\" :key=\"item.id\">\n                <td class=\"align-middle\">{{ item.product.title }}</td>\n                <td class=\"align-middle\">{{ item.qty }}</td>\n                <td class=\"align-middle text-end\">\n                  $ {{ currency(item.total) }}\n                </td>\n                <td class=\"text-end\">\n                  <button\n                    class=\"btn btn-outline-danger btn-sm\"\n                    type=\"button\"\n                    disabled\n                    v-if=\"isLoading === item.id\"\n                  >\n                    <span\n                      class=\"spinner-border spinner-border-sm\"\n                      role=\"status\"\n                      aria-hidden=\"true\"\n                    ></span>\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </button>\n                  <button\n                    v-else\n                    type=\"button\"\n                    class=\"btn btn-sm btn-trash\"\n                    @click=\"delProduct(item)\"\n                  >\n                    <i class=\"bi bi-trash-fill\"></i>\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n            <tfoot>\n              <tr\n                v-show=\"carts.arr.total > carts.arr.final_total\"\n                class=\"text-darkred\"\n              >\n                <td colspan=\"3\" class=\"text-end\">折扣優惠</td>\n                <td class=\"line-through text-end\">\n                  $ {{ currency(carts.arr.total - carts.arr.final_total) }}\n                </td>\n              </tr>\n              <tr>\n                <td colspan=\"3\" class=\"text-end\">總金額</td>\n                <td class=\"text-end\">\n                  $ {{ currency(carts.arr.final_total) }}\n                </td>\n              </tr>\n            </tfoot>\n          </table>\n          <div class=\"mb-3 input-group\" v-if=\"carts.arr?.carts?.length != 0\">\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              placeholder=\"請輸入優惠券代碼\"\n              aria-label=\"請輸入優惠券代碼\"\n              aria-describedby=\"button-addon2\"\n              v-model=\"coupon\"\n            />\n            <button\n              class=\"btn btn-outline-content\"\n              type=\"button\"\n              id=\"button-addon2\"\n              :class=\"{ disabled: coupon === '' }\"\n              @click=\"useCoupon\"\n            >\n              套用優惠券\n            </button>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-title\"\n            data-bs-dismiss=\"modal\"\n          >\n            再逛逛\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-darkred\"\n            :class=\"{ disabled: carts.arr?.carts?.length === 0 }\"\n            @click=\"payment\"\n          >\n            結帳去\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.line-through {\n  text-decoration: line-through;\n}\n.cart-btn-position {\n  position: fixed;\n  bottom: 6%;\n  right: 3%;\n  z-index: 66;\n  display: none;\n  @media (min-width: 992px) {\n    display: block;\n  }\n}\n.cart-btn {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  color: #fff;\n  background: #dd5c33;\n  border: none;\n  position: relative;\n  span {\n    background: red;\n    color: #fff;\n    border-radius: 50%;\n    height: 25px;\n    width: 25px;\n    position: absolute;\n    top: -5px;\n    right: -5px;\n  }\n}\n.cart-btn {\n  &:hover {\n    background: #ce5814;\n  }\n}\n.btn-trash {\n  color: rgba($color: #fff, $alpha: 0.4);\n  &:hover {\n    color: #98142b;\n  }\n}\n</style>\n","import { render } from \"./BaseCartModal.vue?vue&type=template&id=170aca5a&scoped=true\"\nimport script from \"./BaseCartModal.vue?vue&type=script&lang=js\"\nexport * from \"./BaseCartModal.vue?vue&type=script&lang=js\"\n\nimport \"./BaseCartModal.vue?vue&type=style&index=0&id=170aca5a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-170aca5a\"\n\nexport default script","import { render } from \"./FrontDesk.vue?vue&type=template&id=13c468e3&scoped=true\"\nimport script from \"./FrontDesk.vue?vue&type=script&lang=js\"\nexport * from \"./FrontDesk.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-13c468e3\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BaseCartModal.vue?vue&type=style&index=0&id=170aca5a&lang=scss&scoped=true\""],"sourceRoot":""}