(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23c97068"],{"244e":function(e,t,a){},"2d24":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var c=a("7a23");function i(){return Object(c["m"])("$swal")}},"5d10":function(e,t,a){"use strict";var c=a("7a23"),i=Object(c["U"])("data-v-c3020bc4");Object(c["z"])("data-v-c3020bc4");var n=Object(c["i"])("div",{class:"loadingio-spinner-blocks-hghzlg9l8i"},[Object(c["i"])("div",{class:"ldio-cmlvaqhdbw"},[Object(c["i"])("div",{style:{left:"21px",top:"21px","animation-delay":"0s"}}),Object(c["i"])("div",{style:{left:"75px",top:"21px","animation-delay":"0.125s"}}),Object(c["i"])("div",{style:{left:"129px",top:"21px","animation-delay":"0.25s"}}),Object(c["i"])("div",{style:{left:"21px",top:"75px","animation-delay":"0.875s"}}),Object(c["i"])("div",{style:{left:"129px",top:"75px","animation-delay":"0.375s"}}),Object(c["i"])("div",{style:{left:"21px",top:"129px","animation-delay":"0.75s"}}),Object(c["i"])("div",{style:{left:"75px",top:"129px","animation-delay":"0.625s"}}),Object(c["i"])("div",{style:{left:"129px",top:"129px","animation-delay":"0.5s"}})])],-1);Object(c["x"])();var o=i((function(e,t,a,o,r,s){var l=Object(c["F"])("Loading");return Object(c["w"])(),Object(c["e"])(l,{active:o.attrs.isLoading},{default:i((function(){return[n]})),_:1},8,["active"])})),r={setup:function(e,t){var a=t.attrs;return{attrs:a}}};a("dac1");r.render=o,r.__scopeId="data-v-c3020bc4";t["a"]=r},"5fbc":function(e,t,a){"use strict";a("7a87")},"7a87":function(e,t,a){},"7dd8":function(e,t,a){"use strict";a.r(t);a("b64b"),a("b0c0");var c=a("7a23"),i=Object(c["U"])("data-v-3e5d3bc4");Object(c["z"])("data-v-3e5d3bc4");var n={class:"my-2"},o=Object(c["i"])("h2",{class:"pb-3 mb-3 fw-bold border-bottom border-3 border-orange"}," 訂單列表 ",-1),r={class:"accordion",id:"accordionExample"},s={key:0,class:"accordion-body"},l={class:"d-flex justify-content-between"},d={class:"fw-bold"},b=Object(c["h"])(" 訂單時間: "),u={class:"mx-1"},p={key:0,class:"text-success"},j={key:1,class:"text-secondary"},O={class:"row"},m={class:"col-lg-6 col-12"},f={class:"p-4"},v=Object(c["i"])("h5",{class:"pb-2 border-2 border-bottom border-orange"}," 訂單內容 ",-1),g={class:"text-end"},h=Object(c["h"])(" 總金額:"),y={class:"m-2"},x=Object(c["h"])("元 "),w={class:"col-lg-6 col-12"},k={class:"mb-3 form-group"},_=Object(c["i"])("label",{for:"name",class:"mb-2"},"Name *",-1),V={class:"mb-3 form-group"},F=Object(c["i"])("label",{for:"email",class:"mb-2"},"Email *",-1),I={class:"mb-3 form-group"},N=Object(c["i"])("label",{for:"tel",class:"mb-2"},"Phone *",-1),C={class:"mb-3 form-group"},L=Object(c["i"])("label",{for:"address",class:"mb-2"},"Address *",-1),P={class:"d-flex justify-content-end w-100"},U={class:"mt-5 d-flex justify-content-center"};Object(c["x"])();var q=i((function(e,t,a,q,z,A){var B=Object(c["F"])("BaseLoading"),D=Object(c["F"])("Field"),E=Object(c["F"])("ErrorMessage"),$=Object(c["F"])("Form"),J=Object(c["F"])("BasePagination");return Object(c["w"])(),Object(c["e"])(c["a"],null,[Object(c["i"])(B,{isLoading:e.isLoading},null,8,["isLoading"]),Object(c["i"])("div",n,[o,Object(c["i"])("div",r,[(Object(c["w"])(!0),Object(c["e"])(c["a"],null,Object(c["D"])(q.orders.arr,(function(a){return Object(c["w"])(),Object(c["e"])("div",{class:"accordion-item",key:a.id},[Object(c["i"])("h2",{class:"accordion-header",id:"".concat(a.id,"6")},[Object(c["i"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(a.id),"aria-expanded":"false","aria-controls":a.id,onClick:function(t){return e.tempOrder.obj=JSON.parse(JSON.stringify(a))}}," 訂單編號:"+Object(c["I"])(a.id),9,["data-bs-target","aria-controls","onClick"])],8,["id"]),Object(c["i"])("div",{id:a.id,class:"accordion-collapse collapse","aria-labelledby":"".concat(a.id,"6"),"data-bs-parent":"#accordionExample"},[0!=Object.keys(e.tempOrder.obj).length&&e.tempOrder.obj.id===a.id?(Object(c["w"])(),Object(c["e"])("div",s,[Object(c["i"])("div",l,[Object(c["i"])("h4",d,[b,Object(c["i"])("span",u,Object(c["I"])(q.formatDate(e.tempOrder.obj.create_at)),1)]),e.tempOrder.obj.is_paid?(Object(c["w"])(),Object(c["e"])("h4",p,"已付款")):(Object(c["w"])(),Object(c["e"])("h4",j,"未付款"))]),Object(c["i"])("div",O,[Object(c["i"])("div",m,[Object(c["i"])("div",f,[v,(Object(c["w"])(!0),Object(c["e"])(c["a"],null,Object(c["D"])(e.tempOrder.obj.products,(function(e){return Object(c["w"])(),Object(c["e"])("p",{class:"pb-2 mb-2 border-bottom border-gray",key:e.id},Object(c["I"])(e.product.title)+"/"+Object(c["I"])(e.qty)+Object(c["I"])(e.product.unit),1)})),128)),Object(c["i"])("h5",g,[h,Object(c["i"])("span",y,Object(c["I"])(q.currency(e.tempOrder.obj.total)),1),x])])]),Object(c["i"])("div",w,[Object(c["i"])($,null,{default:i((function(i){var n=i.errors;return[Object(c["i"])("div",k,[_,Object(c["i"])(D,{id:"name",name:"name",type:"text",class:["form-control",{"is-invalid":n["name"]}],placeholder:"請輸入 name",rules:"required",modelValue:e.tempOrder.obj.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tempOrder.obj.user.name=t})},null,8,["class","modelValue"]),Object(c["i"])(E,{name:"name",class:"invalid-feedback"})]),Object(c["i"])("div",V,[F,Object(c["i"])(D,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":n["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:e.tempOrder.obj.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.tempOrder.obj.user.email=t})},null,8,["class","modelValue"]),Object(c["i"])(E,{name:"email",class:"invalid-feedback"})]),Object(c["i"])("div",I,[N,Object(c["i"])(D,{id:"tel",name:"tel",type:"tel",class:["form-control",{"is-invalid":n["tel"]}],placeholder:"請輸入 tel",rules:q.isPhone,modelValue:e.tempOrder.obj.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.tempOrder.obj.user.tel=t})},null,8,["class","rules","modelValue"]),Object(c["i"])(E,{name:"tel",class:"invalid-feedback"})]),Object(c["i"])("div",C,[L,Object(c["i"])(D,{id:"address",name:"address",type:"text",class:["form-control",{"is-invalid":n["address"]}],placeholder:"請輸入 address",rules:"required",modelValue:e.tempOrder.obj.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.tempOrder.obj.user.address=t})},null,8,["class","modelValue"]),Object(c["i"])(E,{name:"address",class:"invalid-feedback"})]),Object(c["i"])("div",P,[Object(c["i"])("button",{class:"btn btn-primary me-3",type:"button",onClick:t[5]||(t[5]=function(){return e.editOrder&&e.editOrder.apply(e,arguments)})}," 修改客戶資料 "),Object(c["i"])("button",{class:"btn btn-danger",type:"button",onClick:function(t){return e.delOrder(a.id)}}," 刪除訂單 ",8,["onClick"])])]})),_:2},1024)])])])):Object(c["f"])("",!0)],8,["id","aria-labelledby"])])})),128))]),Object(c["i"])("div",U,[Object(c["i"])(J,{pagination:q.pagination,onGetNowpage:e.getOrders},null,8,["pagination","onGetNowpage"])])])],64)})),z=a("5530"),A=(a("ac1f"),a("5319"),a("99af"),a("dd87")),B=a("5d10"),D=a("bc3a"),E=a.n(D),$=a("2d24"),J=a("1336"),T={components:{BasePagination:A["a"],BaseLoading:B["a"]},setup:function(){var e=Object(c["A"])({arr:[]}),t=Object(c["A"])({obj:{}}),a=Object($["a"])();function i(e,t){a.fire({icon:"success",title:e,text:t})}function n(e,t){a.fire({icon:"error",title:e,text:t})}function o(){var a=Object(c["A"])({obj:{}}),o=Object(c["B"])(!1),r=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o.value=!0;var c=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),i="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/orders?page=").concat(a);E.a.defaults.headers.common.Authorization="".concat(c),E.a.get(i).then((function(a){a.data.success?(e.arr=a.data.orders,t.obj=a.data.pagination,o.value=!1):console.error(a.data.message)})).catch((function(e){console.error(e)}))},s=function(e){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/order/").concat(e);E.a.delete(t).then((function(e){e.data.success?(r(),i("刪除訂單","刪除訂單成功!")):n("Oops...",e.data.message)})).catch((function(e){console.error(e)}))},l=function(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/order/").concat(a.obj.id);E.a.put(e,{data:Object(z["a"])({},a.obj)}).then((function(e){e.data.success?(r(),i("修改訂單","修改訂單成功!")):n("Oops...",e.data.message)})).catch((function(e){console.error(e)}))};return Object(c["t"])((function(){r()})),{tempOrder:a,isLoading:o,getOrders:r,delOrder:s,editOrder:l}}function r(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"}return Object(z["a"])({orders:e,pagination:t,currency:J["a"],formatDate:J["b"],isPhone:r},o())}};T.render=q,T.__scopeId="data-v-3e5d3bc4";t["default"]=T},b0c0:function(e,t,a){var c=a("83ab"),i=a("9bf2").f,n=Function.prototype,o=n.toString,r=/^\s*function ([^ (]*)/,s="name";c&&!(s in n)&&i(n,s,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(e){return""}}})},dac1:function(e,t,a){"use strict";a("244e")},dd87:function(e,t,a){"use strict";var c=a("7a23"),i=Object(c["U"])("data-v-79cc22fc");Object(c["z"])("data-v-79cc22fc");var n={"aria-label":"Page navigation example"},o={class:"pagination"},r=Object(c["i"])("span",{"aria-hidden":"true"},"«",-1),s=Object(c["i"])("span",{"aria-hidden":"true"},"»",-1);Object(c["x"])();var l=i((function(e,t,a,i,l,d){return Object(c["w"])(),Object(c["e"])("nav",n,[Object(c["i"])("ul",o,[Object(c["i"])("li",{class:["page-item",{disabled:!i.props.pagination.obj.has_pre}]},[Object(c["i"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(c["T"])((function(e){return i.emit("getNowpage",i.props.pagination.obj.current_page-1)}),["prevent"]))},[r])],2),(Object(c["w"])(!0),Object(c["e"])(c["a"],null,Object(c["D"])(i.props.pagination.obj.total_pages,(function(e){return Object(c["w"])(),Object(c["e"])("li",{class:["page-item",{active:e===i.props.pagination.obj.current_page}],key:e},[Object(c["i"])("a",{class:"page-link",href:"#",onClick:Object(c["T"])((function(t){return i.emit("getNowpage",e)}),["prevent"])},Object(c["I"])(e),9,["onClick"])],2)})),128)),Object(c["i"])("li",{class:["page-item",{disabled:!i.props.pagination.obj.has_next}]},[Object(c["i"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(c["T"])((function(e){return i.emit("getNowpage",i.props.pagination.obj.current_page+1)}),["prevent"]))},[s])],2)])])})),d={props:{pagination:{type:Object,default:function(){return{}}},getProducts:{type:Function,default:function(){}}},emits:["getNowpage"],setup:function(e,t){var a=t.emit;return{props:e,emit:a}}};a("5fbc");d.render=l,d.__scopeId="data-v-79cc22fc";t["a"]=d}}]);
//# sourceMappingURL=chunk-23c97068.02c7a5ac.js.map