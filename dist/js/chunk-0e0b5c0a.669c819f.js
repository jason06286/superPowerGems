(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e0b5c0a"],{"57f4":function(t,e,c){"use strict";c.r(e);var a=c("7a23"),n=Object(a["U"])("data-v-13c468e3");Object(a["z"])("data-v-13c468e3");var o={class:"bg-dark"};Object(a["x"])();var s=n((function(t,e,c,n,s,r){var l=Object(a["F"])("ToastMessages"),i=Object(a["F"])("BaseNavbar"),b=Object(a["F"])("Router-View"),d=Object(a["F"])("BaseFooter"),u=Object(a["F"])("BaseCartModal");return Object(a["w"])(),Object(a["e"])(a["a"],null,[Object(a["i"])(l),Object(a["i"])(i),Object(a["i"])("div",o,[Object(a["i"])(b)]),Object(a["i"])(d),Object(a["i"])(u)],64)})),r=c("c8ce"),l=c("3324"),i=Object(a["U"])("data-v-b9d78f5a");Object(a["z"])("data-v-b9d78f5a");var b={class:"cart-btn-position"},d=Object(a["i"])("i",{class:"bi bi-cart-fill"},null,-1),u={class:"modal",tabindex:"-1",ref:"cartModal"},O={class:"modal-dialog"},j={class:"modal-content bg-dark border-title"},p=Object(a["i"])("div",{class:"modal-header"},[Object(a["i"])("h5",{class:"modal-title text-title"},"購物車"),Object(a["i"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"modal-body"},v={key:0,class:"cart-content"},h=Object(a["i"])("p",{class:"mb-0 fs-5"},"購物車內無東西",-1),w=Object(a["h"])("請選購商品"),m={key:1,class:"table text-center table-responsive-lg"},y=Object(a["i"])("thead",null,[Object(a["i"])("tr",{class:"text-title"},[Object(a["i"])("th",{scope:"col"},"商品名稱"),Object(a["i"])("th",{scope:"col"},"數量"),Object(a["i"])("th",{scope:"col",class:"text-end"},"小計"),Object(a["i"])("th",{scope:"col"})])],-1),g={class:"text-content"},k={class:"align-middle"},x={class:"align-middle"},C={class:"align-middle text-end"},B={class:"text-end"},M={key:0,class:"btn btn-outline-danger btn-sm",type:"button",disabled:""},F=Object(a["i"])("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),I=Object(a["i"])("span",{class:"visually-hidden"},"Loading...",-1),_=Object(a["i"])("i",{class:"bi bi-trash-fill"},null,-1),E={class:"text-darkred"},S=Object(a["i"])("td",{colspan:"3",class:"text-end"},"折扣優惠",-1),T={class:"line-through text-end"},D=Object(a["i"])("td",{colspan:"3",class:"text-end"},"總金額",-1),L={class:"text-end"},N={key:2,class:"mb-3 input-group"},U={class:"modal-footer"},$=Object(a["i"])("button",{type:"button",class:"btn btn-outline-title","data-bs-dismiss":"modal"}," 再逛逛 ",-1);Object(a["x"])();var z=i((function(t,e,c,n,o,s){var r,l,z,J,P,V,q,A,R,G,H=Object(a["F"])("BaseScrollTop"),K=Object(a["F"])("router-link");return Object(a["w"])(),Object(a["e"])(a["a"],null,[Object(a["i"])("div",b,[Object(a["i"])(H),Object(a["i"])("button",{type:"button",class:"cart-btn",onClick:e[1]||(e[1]=function(){return t.showModal&&t.showModal.apply(t,arguments)})},[d,Object(a["S"])(Object(a["i"])("span",null,Object(a["I"])(null===(r=t.carts.arr)||void 0===r||null===(l=r.carts)||void 0===l?void 0:l.length),513),[[a["O"],null===(z=t.carts.arr)||void 0===z||null===(J=z.carts)||void 0===J?void 0:J.length]])])]),Object(a["i"])("div",u,[Object(a["i"])("div",O,[Object(a["i"])("div",j,[p,Object(a["i"])("div",f,[0===(null===(P=t.carts.arr)||void 0===P||null===(V=P.carts)||void 0===V?void 0:V.length)?(Object(a["w"])(),Object(a["e"])("div",v,[h,Object(a["i"])(K,{to:"/frontDesk/products",class:"d-block text-darkred fs-4",onClick:t.hideModal},{default:i((function(){return[w]})),_:1},8,["onClick"])])):(Object(a["w"])(),Object(a["e"])("table",m,[y,Object(a["i"])("tbody",g,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(t.carts.arr.carts,(function(e){return Object(a["w"])(),Object(a["e"])("tr",{key:e.id},[Object(a["i"])("td",k,Object(a["I"])(e.product.title),1),Object(a["i"])("td",x,Object(a["I"])(e.qty),1),Object(a["i"])("td",C," $ "+Object(a["I"])(n.currency(e.total)),1),Object(a["i"])("td",B,[t.isLoading===e.id?(Object(a["w"])(),Object(a["e"])("button",M,[F,I])):(Object(a["w"])(),Object(a["e"])("button",{key:1,type:"button",class:"btn btn-sm btn-trash",onClick:function(c){return t.delProduct(e)}},[_],8,["onClick"]))])])})),128))]),Object(a["i"])("tfoot",null,[Object(a["S"])(Object(a["i"])("tr",E,[S,Object(a["i"])("td",T," $ "+Object(a["I"])(n.currency(t.carts.arr.total-t.carts.arr.final_total)),1)],512),[[a["O"],t.carts.arr.total>t.carts.arr.final_total]]),Object(a["i"])("tr",null,[D,Object(a["i"])("td",L," $ "+Object(a["I"])(n.currency(t.carts.arr.final_total)),1)])])])),0!=(null===(q=t.carts.arr)||void 0===q||null===(A=q.carts)||void 0===A?void 0:A.length)?(Object(a["w"])(),Object(a["e"])("div",N,[Object(a["S"])(Object(a["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠券代碼","aria-label":"請輸入優惠券代碼","aria-describedby":"button-addon2","onUpdate:modelValue":e[2]||(e[2]=function(e){return t.coupon=e})},null,512),[[a["N"],t.coupon]]),Object(a["i"])("button",{class:["btn btn-outline-content",{disabled:""===t.coupon}],type:"button",id:"button-addon2",onClick:e[3]||(e[3]=function(){return t.useCoupon&&t.useCoupon.apply(t,arguments)})}," 套用優惠券 ",2)])):Object(a["f"])("",!0)]),Object(a["i"])("div",U,[$,Object(a["i"])("button",{type:"button",class:["btn btn-darkred",{disabled:0===(null===(R=t.carts.arr)||void 0===R||null===(G=R.carts)||void 0===G?void 0:G.length)}],onClick:e[4]||(e[4]=function(){return t.payment&&t.payment.apply(t,arguments)})}," 結帳去 ",2)])])])],512)],64)})),J=c("5530"),P=(c("99af"),c("2067")),V=c("7c2b"),q=c.n(V),A=c("bc3a"),R=c.n(A),G=c("1336"),H=c("cfb9"),K=c("98e4"),Q=c("6c02"),W={components:{BaseScrollTop:P["a"]},setup:function(){function t(){var t=Object(Q["d"])(),e=Object(a["B"])(null),c=null,n=function(){c.show()},o=function(){c.hide()},s=function(){o(),t.push("/frontDesk/carts")};return Object(a["t"])((function(){c=new q.a(e.value)})),{cartModal:e,showModal:n,hideModal:o,payment:s}}function e(){var t=Object(a["A"])({arr:[]}),e=Object(a["B"])(""),c=Object(a["B"])(""),n=function(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart");R.a.get(e).then((function(e){e.data.success?t.arr=e.data.data:console.error=function(){throw new Error(e.data.message)}})).catch((function(t){console.error=function(){throw new Error(t)}}))},o=function(t){c.value=t.id;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(t.id);R.a.delete(e).then((function(t){t.data.success?n():console.error=function(){throw new Error(t.data.message)},c.value="",Object(K["a"])(t,"刪除商品")})).catch((function(t){console.error=function(){throw new Error(t)}}))},s=function(){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/coupon");R.a.post(t,{data:{code:e.value}}).then((function(t){t.data.success?n():console.error=function(){throw new Error(t.data.message)},Object(K["a"])(t,"套用優惠券")})).catch((function(t){console.error=function(){throw new Error(t)}}))};return Object(a["t"])((function(){n(),H["a"].on("update-cart",(function(){n()}))})),{carts:t,coupon:e,isLoading:c,delProduct:o,useCoupon:s}}return Object(J["a"])(Object(J["a"])(Object(J["a"])({},t()),e()),{},{currency:G["a"]})}};c("bf53");W.render=z,W.__scopeId="data-v-b9d78f5a";var X=W,Y=c("f367"),Z={components:{BaseNavbar:r["a"],BaseFooter:l["a"],BaseCartModal:X,ToastMessages:Y["a"]}};Z.render=s,Z.__scopeId="data-v-13c468e3";e["default"]=Z},7986:function(t,e,c){},bf53:function(t,e,c){"use strict";c("7986")}}]);
//# sourceMappingURL=chunk-0e0b5c0a.669c819f.js.map