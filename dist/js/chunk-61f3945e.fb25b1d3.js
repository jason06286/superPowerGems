(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61f3945e"],{4438:function(t,e,c){"use strict";c.r(e);c("a4d3"),c("e01a"),c("b0c0"),c("b64b");var a=c("7a23"),n=Object(a["U"])("data-v-01f5679e");Object(a["z"])("data-v-01f5679e");var r=Object(a["i"])("div",{class:"bg-dark",style:{height:"68px"}},null,-1),s={class:"bg-dark container-lg",style:{"min-height":"calc(100vh - 212px)"}},i={class:"py-5 p-lg-5"},l={key:0,class:"cart-content"},o=Object(a["i"])("div",{class:"empty-cart"},null,-1),d=Object(a["i"])("p",{class:"mb-0 fs-4"},"購物車內無東西",-1),u=Object(a["h"])("請選購商品"),b={key:1,class:"row"},O=Object(a["g"])('<div class="col-md-1" data-v-01f5679e></div><div class="col-md-10" data-v-01f5679e><div class="mb-3 d-flex justify-content-end" data-v-01f5679e><div class="step bg-darkred" data-v-01f5679e><p class="mb-0" data-v-01f5679e>1</p><p class="mb-0" data-v-01f5679e>填寫資訊</p></div><div class="step" data-v-01f5679e><p class="mb-0" data-v-01f5679e>2</p><p class="mb-0" data-v-01f5679e>確認訂單</p></div><div class="step" data-v-01f5679e><p class="mb-0" data-v-01f5679e>3</p><p class="mb-0" data-v-01f5679e>完成購物</p></div></div></div><div class="col-md-1" data-v-01f5679e></div>',3),j={class:"row"},p=Object(a["i"])("div",{class:"col-md-1"},null,-1),f={key:0,class:"col-md-6 col-12"},m=Object(a["i"])("h4",{class:"pb-2 mb-3 border-2 border-bottom border-darkred text-title"}," 購物車內容 ",-1),v={class:"table text-center text-content"},h=Object(a["i"])("thead",null,[Object(a["i"])("tr",null,[Object(a["i"])("th",{scope:"col",width:"80"}),Object(a["i"])("th",{scope:"col",width:"200"},"商品名稱"),Object(a["i"])("th",{scope:"col",width:"120"},"數量"),Object(a["i"])("th",{scope:"col",class:"text-end",width:"120"},"小計"),Object(a["i"])("th",{scope:"col",width:"30"})])],-1),g={class:"align-middle"},y={class:"align-middle"},k={class:"align-middle"},w={class:"input-group input-group-sm"},x={class:"align-middle text-end"},C={class:"align-middle text-end"},V={key:0,class:"btn btn-outline-danger btn-sm",type:"button",disabled:""},P=Object(a["i"])("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),S=Object(a["i"])("span",{class:"visually-hidden"},"Loading...",-1),D=Object(a["i"])("i",{class:"bi bi-trash-fill"},null,-1),U={class:"text-darkred"},q=Object(a["i"])("td",{colspan:"4",class:"text-end"},"折扣優惠",-1),_={class:"line-through text-end"},F=Object(a["i"])("td",{colspan:"4",class:"text-end"},"總金額",-1),Q={class:"text-end",width:"120"},I={key:0,class:"mb-3 input-group"},B={class:"col-md-4 col-12"},L={key:0},$=Object(a["i"])("h4",{class:"pb-2 mb-3 border-2 border-bottom border-darkred text-title"}," 收件人資訊 ",-1),A={class:"mb-3 form-group"},E=Object(a["i"])("label",{for:"name",class:"mb-2"},[Object(a["i"])("span",{class:"text-darkred"},"*"),Object(a["h"])(" 聯絡人 ")],-1),N={class:"mb-3 form-group"},J=Object(a["i"])("label",{for:"email",class:"mb-2"},[Object(a["i"])("span",{class:"text-darkred"},"*"),Object(a["h"])(" 信箱 ")],-1),z={class:"mb-3 form-group"},M=Object(a["i"])("label",{for:"tel",class:"mb-2"},[Object(a["i"])("span",{class:"text-darkred"},"*"),Object(a["h"])(" 電話 ")],-1),G={class:"mb-3 form-group"},H=Object(a["i"])("label",{for:"address",class:"mb-2"},[Object(a["i"])("span",{class:"text-darkred"},"*"),Object(a["h"])(" 地址 ")],-1),K={class:"mb-3 form-group"},R=Object(a["i"])("label",{for:"message",class:"mb-2"},"留言",-1),T={class:"d-flex justify-content-end"},W=Object(a["h"])("繼續購物"),X={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Y=Object(a["h"])(" 送出訂單 "),Z=Object(a["i"])("div",{class:"col-md-1"},null,-1);Object(a["x"])();var tt=n((function(t,e,c,tt,et,ct){var at,nt,rt,st,it,lt,ot,dt,ut,bt,Ot=Object(a["F"])("router-link"),jt=Object(a["F"])("Field"),pt=Object(a["F"])("ErrorMessage"),ft=Object(a["F"])("Form");return Object(a["w"])(),Object(a["e"])(a["a"],null,[r,Object(a["i"])("div",s,[Object(a["i"])("div",i,[0===(null===(at=tt.carts.arr)||void 0===at||null===(nt=at.carts)||void 0===nt?void 0:nt.length)?(Object(a["w"])(),Object(a["e"])("div",l,[o,d,Object(a["i"])(Ot,{to:"/frontDesk/products",class:"d-block text-lightred fs-4"},{default:n((function(){return[u]})),_:1})])):Object(a["f"])("",!0),0!==(null===(rt=tt.carts.arr)||void 0===rt||null===(st=rt.carts)||void 0===st?void 0:st.length)?(Object(a["w"])(),Object(a["e"])("div",b,[O])):Object(a["f"])("",!0),Object(a["i"])("div",j,[p,0!==(null===(it=tt.carts.arr)||void 0===it||null===(lt=it.carts)||void 0===lt?void 0:lt.length)?(Object(a["w"])(),Object(a["e"])("div",f,[m,Object(a["i"])("table",v,[h,Object(a["i"])("tbody",null,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(tt.carts.arr.carts,(function(e){return Object(a["w"])(),Object(a["e"])("tr",{key:e.id},[Object(a["i"])("td",g,[Object(a["i"])("img",{src:e.product.imageUrl,alt:e.product.description,class:"img-fluid",style:{heigt:"3rem"}},null,8,["src","alt"])]),Object(a["i"])("td",y,Object(a["I"])(e.product.title),1),Object(a["i"])("td",k,[Object(a["i"])("div",w,[Object(a["i"])("button",{class:["btn btn-outline-content",{disabled:tt.isChangeQty}],type:"button",onClick:function(c){return t.addQty(e)}}," + ",10,["onClick"]),Object(a["S"])(Object(a["i"])("input",{type:"number",class:"text-center form-control",min:"1",disabled:"","onUpdate:modelValue":function(t){return e.qty=t}},null,8,["onUpdate:modelValue"]),[[a["N"],e.qty,void 0,{number:!0}]]),Object(a["i"])("button",{class:["btn btn-outline-content",{disabled:e.qty<=1||tt.isChangeQty}],type:"button",onClick:function(c){return t.minusQty(e)}}," - ",10,["onClick"])])]),Object(a["i"])("td",x," $ "+Object(a["I"])(tt.currency(e.total)),1),Object(a["i"])("td",C,[tt.isLoading===e.id?(Object(a["w"])(),Object(a["e"])("button",V,[P,S])):(Object(a["w"])(),Object(a["e"])("button",{key:1,type:"button",class:"btn btn-sm btn-trash",onClick:function(c){return t.delProduct(e)}},[D],8,["onClick"]))])])})),128))]),Object(a["i"])("tfoot",null,[Object(a["S"])(Object(a["i"])("tr",U,[q,Object(a["i"])("td",_," $ "+Object(a["I"])(tt.currency(tt.carts.arr.total-tt.carts.arr.final_total)),1)],512),[[a["O"],tt.carts.arr.total>tt.carts.arr.final_total]]),Object(a["i"])("tr",null,[F,Object(a["i"])("td",Q," $ "+Object(a["I"])(tt.currency(tt.carts.arr.final_total)),1)])])]),0!=(null===(ot=tt.carts.arr)||void 0===ot||null===(dt=ot.carts)||void 0===dt?void 0:dt.length)?(Object(a["w"])(),Object(a["e"])("div",I,[Object(a["S"])(Object(a["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠券代碼","aria-label":"請輸入優惠券代碼","aria-describedby":"button-addon2","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.coupon=e})},null,512),[[a["N"],t.coupon]]),Object(a["i"])("button",{class:["btn btn-outline-title",{disabled:""===t.coupon}],type:"button",id:"button-addon2",onClick:e[2]||(e[2]=function(){return t.useCoupon&&t.useCoupon.apply(t,arguments)})}," 套用優惠券 ",2)])):Object(a["f"])("",!0)])):Object(a["f"])("",!0),Object(a["i"])("div",B,[0!=(null===(ut=tt.carts.arr)||void 0===ut||null===(bt=ut.carts)||void 0===bt?void 0:bt.length)?(Object(a["w"])(),Object(a["e"])("div",L,[$,Object(a["i"])(ft,{onSubmit:t.onSubmit},{default:n((function(c){var r=c.errors;return[Object(a["i"])("div",A,[E,Object(a["i"])(jt,{id:"name",name:"聯絡人",type:"text",class:["form-control",{"is-invalid":r["聯絡人"]}],placeholder:"請輸入聯絡人",rules:"required",modelValue:t.user.user.name,"onUpdate:modelValue":e[3]||(e[3]=function(e){return t.user.user.name=e})},null,8,["class","modelValue"]),Object(a["i"])(pt,{name:"聯絡人",class:"invalid-feedback"})]),Object(a["i"])("div",N,[J,Object(a["i"])(jt,{id:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":r["信箱"]}],placeholder:"請輸入信箱",rules:"email|required",modelValue:t.user.user.email,"onUpdate:modelValue":e[4]||(e[4]=function(e){return t.user.user.email=e})},null,8,["class","modelValue"]),Object(a["i"])(pt,{name:"信箱",class:"invalid-feedback"})]),Object(a["i"])("div",z,[M,Object(a["i"])(jt,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":r["電話"]}],placeholder:"請輸入電話",rules:t.isPhone,modelValue:t.user.user.tel,"onUpdate:modelValue":e[5]||(e[5]=function(e){return t.user.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["i"])(pt,{name:"電話",class:"invalid-feedback"})]),Object(a["i"])("div",G,[H,Object(a["i"])(jt,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":r["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:t.user.user.address,"onUpdate:modelValue":e[6]||(e[6]=function(e){return t.user.user.address=e})},null,8,["class","modelValue"]),Object(a["i"])(pt,{name:"地址",class:"invalid-feedback"})]),Object(a["i"])("div",K,[R,Object(a["S"])(Object(a["i"])("textarea",{class:"form-control",id:"message",placeholder:"有什麼話想對我們說呢?",rows:"3","onUpdate:modelValue":e[7]||(e[7]=function(e){return t.message=e})},null,512),[[a["N"],t.message]])]),Object(a["i"])("div",T,[Object(a["i"])(Ot,{type:"button",class:"btn btn-outline-content me-3",to:"/frontDesk/products"},{default:n((function(){return[W]})),_:1}),Object(a["i"])("button",{class:["btn btn-lightred",{"not-allowed":Object.keys(t.user.user).length<4}],type:"submit"},["submit"===tt.isLoading?(Object(a["w"])(),Object(a["e"])("span",X)):Object(a["f"])("",!0),Y],2)])]})),_:1},8,["onSubmit"])])):Object(a["f"])("",!0)]),Z])])])],64)})),et=c("5530"),ct=(c("99af"),c("bc3a")),at=c.n(ct),nt=c("1336"),rt=c("cfb9"),st=c("98e4"),it=c("6c02"),lt={setup:function(){var t=Object(it["d"])(),e=Object(a["A"])({arr:[]}),c=Object(a["B"])(""),n=Object(a["B"])(!1);function r(){var t=Object(a["B"])(""),r=function(){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart");at.a.get(t).then((function(t){t.data.success?e.arr=t.data.data:Object(st["a"])(t,"取得購物車")})).catch((function(t){Object(st["a"])(t,"取得購物車")}))},s=function(t){c.value=t.id;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(t.id);at.a.delete(e).then((function(t){t.data.success&&(rt["a"].emit("update-cart"),r(),c.value=""),Object(st["a"])(t,"刪除商品")})).catch((function(t){Object(st["a"])(t,"刪除商品")}))},i=function(t,e){n.value=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(e);at.a.put(c,{data:{product_id:e,qty:t}}).then((function(t){t.data.success&&(n.value=!1,rt["a"].emit("update-cart"),r()),Object(st["a"])(t,"修改商品")})).catch((function(t){Object(st["a"])(t,"修改商品")}))},l=function(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/coupon");at.a.post(e,{data:{code:t.value}}).then((function(t){t.data.success&&(rt["a"].emit("update-cart"),r()),Object(st["a"])(t,"套用優惠券")})).catch((function(t){Object(st["a"])(t,"套用優惠券")}))};return Object(a["t"])((function(){r()})),{coupon:t,getCarts:r,delProduct:s,editCart:i,useCoupon:l}}function s(){var t=r(),e=t.editCart,c=function(t){var c=t.qty+1;e(c,t.id)},a=function(t){var c=t.qty-1;e(c,t.id)};return{addQty:c,minusQty:a}}function i(){var e=Object(a["A"])({user:{}}),n=Object(a["B"])(""),r=function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},s=function(){c.value="submit";var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/order");at.a.post(a,{data:{user:e.user,message:n.value}}).then((function(e){c.value="",e.data.success?(t.push("/frontDesk/pay/".concat(e.data.orderId)),rt["a"].emit("update-cart")):Object(st["a"])(e,"送出表單")})).catch((function(t){Object(st["a"])(t,"送出表單")}))};return{user:e,message:n,isPhone:r,onSubmit:s}}return Object(et["a"])(Object(et["a"])(Object(et["a"])({carts:e,isChangeQty:n,isLoading:c,currency:nt["a"]},r()),s()),i())}};c("501c");lt.render=tt,lt.__scopeId="data-v-01f5679e";e["default"]=lt},"4de4":function(t,e,c){"use strict";var a=c("23e7"),n=c("b727").filter,r=c("1dde"),s=r("filter");a({target:"Array",proto:!0,forced:!s},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"501c":function(t,e,c){"use strict";c("d7c1")},5530:function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));c("b64b"),c("a4d3"),c("4de4"),c("e439"),c("159b"),c("dbb4");function a(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function n(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,a)}return c}function r(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?n(Object(c),!0).forEach((function(e){a(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):n(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}},b0c0:function(t,e,c){var a=c("83ab"),n=c("9bf2").f,r=Function.prototype,s=r.toString,i=/^\s*function ([^ (]*)/,l="name";a&&!(l in r)&&n(r,l,{configurable:!0,get:function(){try{return s.call(this).match(i)[1]}catch(t){return""}}})},b64b:function(t,e,c){var a=c("23e7"),n=c("7b0b"),r=c("df75"),s=c("d039"),i=s((function(){r(1)}));a({target:"Object",stat:!0,forced:i},{keys:function(t){return r(n(t))}})},d7c1:function(t,e,c){},dbb4:function(t,e,c){var a=c("23e7"),n=c("83ab"),r=c("56ef"),s=c("fc6a"),i=c("06cf"),l=c("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,c,a=s(t),n=i.f,o=r(a),d={},u=0;while(o.length>u)c=n(a,e=o[u++]),void 0!==c&&l(d,e,c);return d}})},e439:function(t,e,c){var a=c("23e7"),n=c("d039"),r=c("fc6a"),s=c("06cf").f,i=c("83ab"),l=n((function(){s(1)})),o=!i||l;a({target:"Object",stat:!0,forced:o,sham:!i},{getOwnPropertyDescriptor:function(t,e){return s(r(t),e)}})}}]);
//# sourceMappingURL=chunk-61f3945e.fb25b1d3.js.map