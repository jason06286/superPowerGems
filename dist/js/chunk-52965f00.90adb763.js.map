{"version":3,"sources":["webpack:///./src/views/frontDesk/FrontDeskPay.vue?7f28","webpack:///./src/views/frontDesk/FrontDeskPay.vue","webpack:///./src/views/frontDesk/FrontDeskPay.vue?3156","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","style","scope","width","colspan","role","isConfirm","order","arr","is_paid","to","products","item","key","id","src","product","imageUrl","alt","description","title","qty","currency","final_total","total","user","email","name","tel","address","type","isLoading","confirmPay","setup","route","getOrder","url","params","a","get","then","res","data","success","pushMessageState","catch","err","value","post","render","__scopeId","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","this","match","error"],"mappings":"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","file":"js/chunk-52965f00.90adb763.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FrontDeskPay.vue?vue&type=style&index=0&id=76ccb9cc&lang=scss&scoped=true\"","<script>\nimport axios from 'axios';\n\nimport { currency } from '@/methods/filter';\nimport pushMessageState from '@/methods/pushMessageState';\n\nimport { onMounted, reactive, ref } from 'vue';\nimport { useRoute } from 'vue-router';\n\nexport default {\n  setup() {\n    const route = useRoute();\n    const order = reactive({ arr: [] });\n    const isLoading = ref('');\n    const isConfirm = ref(false);\n\n    function getOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${route.params.id}`;\n      axios\n        .get(url)\n        .then((res) => {\n          if (res.data.success) {\n            order.arr = res.data.order;\n          } else {\n            pushMessageState(res, '取得訂單');\n          }\n        })\n        .catch((err) => {\n          pushMessageState(err, '取得訂單');\n        });\n    }\n    function confirmPay() {\n      isLoading.value = 'pay';\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${route.params.id}`;\n      axios\n        .post(url)\n        .then((res) => {\n          if (res.data.success) {\n            getOrder();\n            isConfirm.value = true;\n          } else {\n            pushMessageState(res, '付款');\n          }\n          isLoading.value = '';\n        })\n        .catch((err) => {\n          pushMessageState(err, '付款');\n        });\n    }\n\n    onMounted(() => {\n      getOrder();\n    });\n\n    return {\n      order,\n      isLoading,\n      currency,\n      confirmPay,\n      isConfirm,\n    };\n  },\n};\n</script>\n\n<template>\n  <div class=\"bg-dark\" style=\"height: 68px\"></div>\n  <div class=\"container\" style=\"min-height: calc(100vh - 212px)\">\n    <div class=\"py-5\">\n      <div class=\"row\">\n        <div class=\"col-lg-2\"></div>\n        <div class=\"col-lg-8 col-12\">\n          <div class=\"mb-3 d-flex justify-content-end\">\n            <div class=\"step\">\n              <p class=\"mb-0\">1</p>\n              <p class=\"mb-0\">填寫資訊</p>\n            </div>\n            <div class=\"step\" :class=\"{ 'bg-darkred': !isConfirm }\">\n              <p class=\"mb-0\">2</p>\n              <p class=\"mb-0\">確認訂單</p>\n            </div>\n            <div class=\"step\" :class=\"{ 'bg-darkred': isConfirm }\">\n              <p class=\"mb-0\">3</p>\n              <p class=\"mb-0\">完成購物</p>\n            </div>\n          </div>\n          <div class=\"paySuccess\" v-if=\"order.arr.is_paid\">\n            <p class=\"fw-bold text-lightred fs-4\">已完成付款，感謝您的訂購!!</p>\n            <div class=\"d-flex\">\n              <router-link to=\"/\" class=\"btn btn-outline-title me-3\"\n                >前往首頁</router-link\n              >\n              <router-link to=\"/frontDesk/products\" class=\"btn btn-lightred\"\n                >前往商店</router-link\n              >\n            </div>\n          </div>\n          <h4 class=\"pb-2 mb-3 border-2 border-bottom border-darkred\">\n            訂單明細\n          </h4>\n          <table class=\"table text-center table-responsive-lg text-content\">\n            <thead>\n              <tr>\n                <th scope=\"col\" width=\"60\"></th>\n                <th scope=\"col\" width=\"120\">商品名稱</th>\n                <th scope=\"col\" width=\"60\">數量</th>\n                <th scope=\"col\" class=\"text-end\" width=\"120\">小計</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"item in order.arr.products\" :key=\"item.id\">\n                <td class=\"align-middle\">\n                  <img\n                    :src=\"item.product.imageUrl\"\n                    :alt=\"item.product.description\"\n                    class=\"img-fluid\"\n                    style=\"heigt: 3rem\"\n                  />\n                </td>\n                <td class=\"align-middle\">\n                  {{ item.product.title }}\n                </td>\n                <td class=\"align-middle\">\n                  {{ item.qty }}\n                </td>\n                <td class=\"align-middle text-end\">\n                  $ {{ currency(item.final_total) }}\n                </td>\n              </tr>\n            </tbody>\n            <tfoot>\n              <tr>\n                <td colspan=\"3\" class=\"text-end\">總金額</td>\n                <td class=\"text-end\">$ {{ currency(order.arr.total) }}</td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n        <div class=\"col-lg-2\"></div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-lg-2\"></div>\n        <div class=\"col-lg-8 col-12\">\n          <h4 class=\"pb-2 mb-3 border-2 border-bottom border-darkred\">\n            訂單資訊\n          </h4>\n          <table class=\"table text-content\" v-if=\"order.arr.user\">\n            <tbody>\n              <tr>\n                <th scope=\"row\" class=\"font-weight-normal\">Email</th>\n                <td>{{ order.arr.user.email }}</td>\n              </tr>\n              <tr>\n                <th scope=\"row\" class=\"font-weight-normal\">收件人名稱</th>\n                <td>{{ order.arr.user.name }}</td>\n              </tr>\n              <tr>\n                <th scope=\"row\" class=\"font-weight-normal\">收件人電話</th>\n                <td>{{ order.arr.user.tel }}</td>\n              </tr>\n              <tr>\n                <th scope=\"row\" class=\"font-weight-normal\">收件人地址</th>\n                <td>{{ order.arr.user.address }}</td>\n              </tr>\n              <tr>\n                <th scope=\"row\" class=\"font-weight-normal\">訂單編號</th>\n                <td>{{ order.arr.id }}</td>\n              </tr>\n              <tr>\n                <th scope=\"row\" class=\"font-weight-normal\">付款狀態</th>\n                <td class=\"text-success\" v-if=\"order.arr.is_paid\">已付款</td>\n                <td class=\"text-danger\" v-else>未付款</td>\n              </tr>\n            </tbody>\n          </table>\n          <div class=\"d-flex justify-content-end\" v-if=\"!order.arr.is_paid\">\n            <router-link\n              type=\"button\"\n              class=\"btn btn-outline-title me-3\"\n              to=\"/frontDesk/products\"\n              >繼續購物</router-link\n            >\n            <button\n              class=\"btn btn-lightred\"\n              type=\"button\"\n              :class=\"{ disabled: isLoading === 'pay' }\"\n              @click=\"confirmPay\"\n            >\n              <div\n                class=\"spinner-border spinner-border-sm\"\n                role=\"status\"\n                v-if=\"isLoading === 'pay'\"\n              >\n                <span class=\"visually-hidden\">Loading...</span>\n              </div>\n              確認付款\n            </button>\n          </div>\n        </div>\n        <div class=\"col-lg-2\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.title {\n  border-bottom: 3px solid #fd7e14;\n  padding-bottom: 0.5rem;\n  margin-bottom: 1rem;\n  display: inline-block;\n}\n.paySuccess {\n  background: url('https://storage.googleapis.com/vue-course-api.appspot.com/supergems/1628487788446.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=VZljZPEtDOu5CTO3rA2ClOCvUb3WlrwYLqBI06TCZzThNZsoEAu1n43jKUlycs4Qr5URhPn%2FIP2w7A79NhYBTkV4fvOQkVK94aa7rnGatWrSctb1UL2XCe4RjXcvwxEB7VI%2FExQwR9lHvWDEC4E4vtKZmltOrV2PDtK1iVsLpka7yFI%2Fq41Pk7qVoz%2FN7iTiKrWDRkkhN0UfCyKcDfRUUqXfMzM5Uoi5hwH61l5bSlm%2BOr2Z4nIlrtbotdccsHRgwiH31XZMTzcwcgb4L7XGR7WsT1B7A0STW%2Bi9AfihzRFrDhhiQifoPrlCeAxyEbAp2MMOHy9pL1xxgMNIA5xsUg%3D%3D');\n  background-size: cover;\n  background-position: center bottom;\n  height: 300px;\n  margin-bottom: 1rem;\n  position: relative;\n  border-radius: 1rem;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n.step {\n  background: rgba($color: #000, $alpha: 0.5);\n  color: rgba($color: #fff, $alpha: 0.8);\n  padding: 0.5rem 1rem;\n  text-align: center;\n  pointer-events: none;\n}\n</style>\n","import { render } from \"./FrontDeskPay.vue?vue&type=template&id=76ccb9cc&scoped=true\"\nimport script from \"./FrontDeskPay.vue?vue&type=script&lang=js\"\nexport * from \"./FrontDeskPay.vue?vue&type=script&lang=js\"\n\nimport \"./FrontDeskPay.vue?vue&type=style&index=0&id=76ccb9cc&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-76ccb9cc\"\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}