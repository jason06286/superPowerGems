(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79952d47"],{"184f":function(t,e,c){"use strict";c("9482")},"57f4":function(t,e,c){"use strict";c.r(e);var a=c("7a23"),n=Object(a["U"])("data-v-04f5afa2"),o=n((function(t,e,c,n,o,s){var i=Object(a["F"])("ToastMessages"),l=Object(a["F"])("BaseNavbar"),r=Object(a["F"])("Router-View"),b=Object(a["F"])("BaseFooter"),d=Object(a["F"])("BaseCartModal");return Object(a["w"])(),Object(a["e"])(a["a"],null,[Object(a["i"])(i),Object(a["i"])(l),Object(a["i"])(r),Object(a["i"])(b),Object(a["i"])(d)],64)})),s=c("c8ce"),i=c("3324"),l=(c("a4d3"),c("e01a"),Object(a["U"])("data-v-a5af451e"));Object(a["z"])("data-v-a5af451e");var r={class:"cart-btn-position"},b=Object(a["i"])("i",{class:"bi bi-cart-plus-fill"},null,-1),d={class:"modal",tabindex:"-1",ref:"cartModal"},u={class:"modal-dialog"},O={class:"modal-content bg-dark border-title"},j=Object(a["i"])("div",{class:"modal-header"},[Object(a["i"])("h5",{class:"modal-title text-title"},"購物車"),Object(a["i"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),p={class:"modal-body"},f={key:0,class:"cart-content"},h=Object(a["i"])("p",{class:"mb-0 fs-5"},"購物車內無東西",-1),v=Object(a["h"])("請選購商品"),m={key:1,class:"table text-center table-responsive-lg"},g=Object(a["i"])("thead",null,[Object(a["i"])("tr",{class:"text-title"},[Object(a["i"])("th",{scope:"col",width:"80"}),Object(a["i"])("th",{scope:"col",width:"200"},"商品名稱"),Object(a["i"])("th",{scope:"col",width:"120"},"數量"),Object(a["i"])("th",{scope:"col",class:"text-end",width:"120"},"小計"),Object(a["i"])("th",{scope:"col",width:"30"})])],-1),y={class:"text-content"},w={class:"align-middle"},k={class:"align-middle"},x={class:"align-middle"},C={class:"align-middle text-end"},B={class:"align-middle text-end"},M={key:0,class:"btn btn-outline-danger btn-sm",type:"button",disabled:""},F=Object(a["i"])("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),I=Object(a["i"])("span",{class:"visually-hidden"},"Loading...",-1),_=Object(a["i"])("i",{class:"bi bi-trash-fill"},null,-1),S={class:"text-darkred"},T=Object(a["i"])("td",{colspan:"4",class:"text-end"},"折扣優惠",-1),U={class:"line-through text-end"},D={class:"text-content"},L=Object(a["i"])("td",{colspan:"4",class:"text-end"},"總金額",-1),N={class:"text-end",width:"120"},$={key:2,class:"mb-3 input-group"},J={class:"modal-footer"},P=Object(a["i"])("button",{type:"button",class:"btn btn-outline-title","data-bs-dismiss":"modal"}," 再逛逛 ",-1);Object(a["x"])();var V=l((function(t,e,c,n,o,s){var i,V,q,z,A,R,E,G,H,K,Q=Object(a["F"])("BaseScrollTop"),W=Object(a["F"])("router-link");return Object(a["w"])(),Object(a["e"])(a["a"],null,[Object(a["i"])("div",r,[Object(a["i"])(Q),Object(a["i"])("button",{type:"button",class:"cart-btn",onClick:e[1]||(e[1]=function(){return t.showModal&&t.showModal.apply(t,arguments)})},[b,Object(a["S"])(Object(a["i"])("span",null,Object(a["I"])(null===(i=t.carts.arr)||void 0===i||null===(V=i.carts)||void 0===V?void 0:V.length),513),[[a["O"],null===(q=t.carts.arr)||void 0===q||null===(z=q.carts)||void 0===z?void 0:z.length]])])]),Object(a["i"])("div",d,[Object(a["i"])("div",u,[Object(a["i"])("div",O,[j,Object(a["i"])("div",p,[0===(null===(A=t.carts.arr)||void 0===A||null===(R=A.carts)||void 0===R?void 0:R.length)?(Object(a["w"])(),Object(a["e"])("div",f,[h,Object(a["i"])(W,{to:"/frontDesk/products",class:"d-block text-lightred fs-4",onClick:t.hideModal},{default:l((function(){return[v]})),_:1},8,["onClick"])])):(Object(a["w"])(),Object(a["e"])("table",m,[g,Object(a["i"])("tbody",y,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(t.carts.arr.carts,(function(e){return Object(a["w"])(),Object(a["e"])("tr",{key:e.id},[Object(a["i"])("td",w,[Object(a["i"])("img",{src:e.product.imageUrl,alt:e.product.description,class:"img-fluid",style:{heigt:"3rem"}},null,8,["src","alt"])]),Object(a["i"])("td",k,Object(a["I"])(e.product.title),1),Object(a["i"])("td",x,Object(a["I"])(e.qty),1),Object(a["i"])("td",C," $ "+Object(a["I"])(n.currency(e.total)),1),Object(a["i"])("td",B,[t.isLoading===e.id?(Object(a["w"])(),Object(a["e"])("button",M,[F,I])):(Object(a["w"])(),Object(a["e"])("button",{key:1,type:"button",class:"btn btn-sm btn-trash",onClick:function(c){return t.delProduct(e)}},[_],8,["onClick"]))])])})),128))]),Object(a["i"])("tfoot",null,[Object(a["S"])(Object(a["i"])("tr",S,[T,Object(a["i"])("td",U," $ "+Object(a["I"])(n.currency(t.carts.arr.total-t.carts.arr.final_total)),1)],512),[[a["O"],t.carts.arr.total>t.carts.arr.final_total]]),Object(a["i"])("tr",D,[L,Object(a["i"])("td",N," $ "+Object(a["I"])(n.currency(t.carts.arr.final_total)),1)])])])),0!=(null===(E=t.carts.arr)||void 0===E||null===(G=E.carts)||void 0===G?void 0:G.length)?(Object(a["w"])(),Object(a["e"])("div",$,[Object(a["S"])(Object(a["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠券代碼","aria-label":"請輸入優惠券代碼","aria-describedby":"button-addon2","onUpdate:modelValue":e[2]||(e[2]=function(e){return t.coupon=e})},null,512),[[a["N"],t.coupon]]),Object(a["i"])("button",{class:["btn btn-outline-content",{disabled:""===t.coupon}],type:"button",id:"button-addon2",onClick:e[3]||(e[3]=function(){return t.useCoupon&&t.useCoupon.apply(t,arguments)})}," 套用優惠券 ",2)])):Object(a["f"])("",!0)]),Object(a["i"])("div",J,[P,Object(a["i"])("button",{type:"button",class:["btn btn-lightred",{disabled:0===(null===(H=t.carts.arr)||void 0===H||null===(K=H.carts)||void 0===K?void 0:K.length)}],onClick:e[4]||(e[4]=function(){return t.payment&&t.payment.apply(t,arguments)})}," 結帳去 ",2)])])])],512)],64)})),q=c("5530"),z=(c("99af"),c("2067")),A=c("7c2b"),R=c.n(A),E=c("bc3a"),G=c.n(E),H=c("1336"),K=c("cfb9"),Q=c("98e4"),W=c("6c02"),X={components:{BaseScrollTop:z["a"]},setup:function(){function t(){var t=Object(W["d"])(),e=Object(a["B"])(null),c=null,n=function(){c.show()},o=function(){c.hide()},s=function(){o(),t.push("/frontDesk/carts")};return Object(a["t"])((function(){c=new R.a(e.value)})),{cartModal:e,showModal:n,hideModal:o,payment:s}}function e(){var t=Object(a["A"])({arr:[]}),e=Object(a["B"])(""),c=Object(a["B"])(""),n=function(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart");G.a.get(e).then((function(e){e.data.success?t.arr=e.data.data:Object(Q["a"])(e,"取得購物車")})).catch((function(t){Object(Q["a"])(t,"取得購物車")}))},o=function(t){c.value=t.id;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(t.id);G.a.delete(e).then((function(t){t.data.success&&n(),c.value="",Object(Q["a"])(t,"刪除商品")})).catch((function(t){Object(Q["a"])(t,"刪除商品")}))},s=function(){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/coupon");G.a.post(t,{data:{code:e.value}}).then((function(t){t.data.success&&n(),Object(Q["a"])(t,"套用優惠券")})).catch((function(t){Object(Q["a"])(t,"套用優惠券")}))};return Object(a["t"])((function(){n(),K["a"].on("update-cart",(function(){n()}))})),{carts:t,coupon:e,isLoading:c,delProduct:o,useCoupon:s}}return Object(q["a"])(Object(q["a"])(Object(q["a"])({},t()),e()),{},{currency:H["a"]})}};c("184f");X.render=V,X.__scopeId="data-v-a5af451e";var Y=X,Z=c("f367"),tt={components:{BaseNavbar:s["a"],BaseFooter:i["a"],BaseCartModal:Y,ToastMessages:Z["a"]}};tt.render=o,tt.__scopeId="data-v-04f5afa2";e["default"]=tt},9482:function(t,e,c){}}]);
//# sourceMappingURL=chunk-79952d47.2626a877.js.map