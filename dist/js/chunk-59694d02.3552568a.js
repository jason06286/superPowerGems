(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59694d02"],{4438:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),o=Object(a["U"])("data-v-2c920fbc");Object(a["z"])("data-v-2c920fbc");var n={class:"container"},s={class:"py-5"},r=Object(a["i"])("h2",{class:"pb-2 mb-3 border-3 border-bottom border-orange"},"購屋車內容",-1),l={key:0,class:"cart-content"},i=Object(a["i"])("p",{class:"mb-0 fs-5"},"購物車內無東西",-1),u=Object(a["h"])("選購商品"),b={key:1,class:"table text-center table-responsive-lg"},d=Object(a["i"])("thead",null,[Object(a["i"])("tr",{class:"table-dark"},[Object(a["i"])("th",{scope:"col"}),Object(a["i"])("th",{scope:"col"},"商品名稱"),Object(a["i"])("th",{scope:"col",width:"120"},"數量"),Object(a["i"])("th",{scope:"col",class:"text-end"},"小計")])],-1),p=Object(a["i"])("i",{class:"bi bi-trash-fill"},null,-1),m={class:"align-middle"},j={class:"align-middle"},O={class:"input-group input-group-sm"},f={class:"align-middle text-end"},h={class:"text-danger"},g=Object(a["i"])("td",{colspan:"3",class:"text-end"},"折扣優惠",-1),v={class:"line-through text-end"},y=Object(a["i"])("td",{colspan:"3",class:"text-end"},"總金額",-1),k={class:"text-end"},x={key:2,class:"mb-3 input-group"},V=Object(a["i"])("h2",{class:"pb-2 mb-3 border-3 border-bottom border-orange"},[Object(a["h"])(" 收件人資訊"),Object(a["i"])("span",{class:"text-danger fs-4 ms-2"},"(必填)")],-1),w={class:"mb-3 form-group"},C=Object(a["i"])("label",{for:"name",class:"mb-2"},"聯絡人",-1),q={class:"mb-3 form-group"},S=Object(a["i"])("label",{for:"email",class:"mb-2"},"信箱",-1),U={class:"mb-3 form-group"},_=Object(a["i"])("label",{for:"tel",class:"mb-2"},"電話",-1),F=Object(a["i"])("h2",{class:"pb-2 mb-3 border-3 border-bottom border-orange"},[Object(a["h"])(" 配送資訊"),Object(a["i"])("span",{class:"text-danger fs-4 ms-2"},"(必填)")],-1),Q={class:"mb-3 form-group"},I=Object(a["i"])("label",{for:"address",class:"mb-2"},"地址",-1),B={class:"mb-3 form-group"},D=Object(a["i"])("h4",{class:"pb-2 mb-3 border-3 border-bottom border-orange"},[Object(a["h"])(" 留言"),Object(a["i"])("span",{class:"text-secondary fs-5 ms-2"},"(選填)")],-1),P=Object(a["i"])("label",{for:"message",class:"mb-2"},"留言",-1),$={class:"d-flex justify-content-end"},N=Object(a["h"])("繼續購物"),A={class:"btn btn-orange",type:"submit"},J={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},L=Object(a["h"])(" 送出訂單 ");Object(a["x"])();var z=o((function(e,t,c,z,E,M){var G,H,K,R,T=Object(a["F"])("router-link"),W=Object(a["F"])("Field"),X=Object(a["F"])("ErrorMessage"),Y=Object(a["F"])("Form");return Object(a["w"])(),Object(a["e"])("div",n,[Object(a["i"])("div",s,[r,0===(null===(G=z.carts.arr)||void 0===G||null===(H=G.carts)||void 0===H?void 0:H.length)?(Object(a["w"])(),Object(a["e"])("div",l,[i,Object(a["i"])(T,{to:"/frontDesk/products",class:"d-block text-orange fs-4"},{default:o((function(){return[u]})),_:1})])):(Object(a["w"])(),Object(a["e"])("table",b,[d,Object(a["i"])("tbody",null,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(z.carts.arr.carts,(function(e){return Object(a["w"])(),Object(a["e"])("tr",{key:e.id},[Object(a["i"])("td",null,[Object(a["i"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return z.delProduct(e)}},[p],8,["onClick"])]),Object(a["i"])("td",m,Object(a["I"])(e.product.title),1),Object(a["i"])("td",j,[Object(a["i"])("div",O,[Object(a["i"])("button",{class:["btn btn-outline-secondary",{disabled:z.isChageQty}],type:"button",onClick:function(t){return z.addQty(e)}}," + ",10,["onClick"]),Object(a["S"])(Object(a["i"])("input",{type:"number",class:"text-center form-control",min:"1",disabled:"","onUpdate:modelValue":function(t){return e.qty=t}},null,8,["onUpdate:modelValue"]),[[a["N"],e.qty,void 0,{number:!0}]]),Object(a["i"])("button",{class:["btn btn-outline-secondary",{disabled:e.qty<=1||z.isChageQty}],type:"button",onClick:function(t){return z.minusQty(e)}}," - ",10,["onClick"])])]),Object(a["i"])("td",f,"$ "+Object(a["I"])(z.currency(e.total)),1)])})),128))]),Object(a["i"])("tfoot",null,[Object(a["S"])(Object(a["i"])("tr",h,[g,Object(a["i"])("td",v," $ "+Object(a["I"])(z.currency(z.carts.arr.total-z.carts.arr.final_total)),1)],512),[[a["O"],z.carts.arr.total>z.carts.arr.final_total]]),Object(a["i"])("tr",null,[y,Object(a["i"])("td",k,"$ "+Object(a["I"])(z.currency(z.carts.arr.final_total)),1)])])])),0!=(null===(K=z.carts.arr)||void 0===K||null===(R=K.carts)||void 0===R?void 0:R.length)?(Object(a["w"])(),Object(a["e"])("div",x,[Object(a["S"])(Object(a["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠券代碼","aria-label":"請輸入優惠券代碼","aria-describedby":"button-addon2","onUpdate:modelValue":t[1]||(t[1]=function(e){return z.coupon=e})},null,512),[[a["N"],z.coupon]]),Object(a["i"])("button",{class:["btn btn-outline-secondary",{disabled:""===z.coupon}],type:"button",id:"button-addon2",onClick:t[2]||(t[2]=function(){return z.useCoupon&&z.useCoupon.apply(z,arguments)})}," 套用優惠券 ",2)])):Object(a["f"])("",!0),V,Object(a["i"])(Y,{onSubmit:z.onSubmit},{default:o((function(e){var c=e.errors;return[Object(a["i"])("div",w,[C,Object(a["i"])(W,{id:"name",name:"聯絡人",type:"text",class:["form-control",{"is-invalid":c["聯絡人"]}],placeholder:"請輸入聯絡人",rules:"required",modelValue:z.user.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return z.user.user.name=e})},null,8,["class","modelValue"]),Object(a["i"])(X,{name:"聯絡人",class:"invalid-feedback"})]),Object(a["i"])("div",q,[S,Object(a["i"])(W,{id:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":c["信箱"]}],placeholder:"請輸入信箱",rules:"email|required",modelValue:z.user.user.email,"onUpdate:modelValue":t[4]||(t[4]=function(e){return z.user.user.email=e})},null,8,["class","modelValue"]),Object(a["i"])(X,{name:"信箱",class:"invalid-feedback"})]),Object(a["i"])("div",U,[_,Object(a["i"])(W,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入 tel",rules:z.isPhone,modelValue:z.user.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return z.user.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["i"])(X,{name:"電話",class:"invalid-feedback"})]),F,Object(a["i"])("div",Q,[I,Object(a["i"])(W,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:z.user.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return z.user.user.address=e})},null,8,["class","modelValue"]),Object(a["i"])(X,{name:"地址",class:"invalid-feedback"})]),Object(a["i"])("div",B,[D,P,Object(a["S"])(Object(a["i"])("textarea",{class:"form-control",id:"message",placeholder:"有什麼話想對我們說呢?",rows:"3","onUpdate:modelValue":t[7]||(t[7]=function(e){return z.message=e})},null,512),[[a["N"],z.message]])]),Object(a["i"])("div",$,[Object(a["i"])(T,{type:"button",class:"btn btn-secondary me-3",to:"/frontDesk/products"},{default:o((function(){return[N]})),_:1}),Object(a["i"])("button",A,["submit"===z.isLoading?(Object(a["w"])(),Object(a["e"])("span",J)):Object(a["f"])("",!0),L])])]})),_:1},8,["onSubmit"])])])})),E=(c("99af"),c("bc3a")),M=c.n(E),G=c("1336"),H=c("cfb9"),K=c("6c02"),R={setup:function(){var e=Object(K["d"])(),t=Object(a["A"])({arr:[]}),c=Object(a["B"])(""),o=Object(a["B"])(!1),n=Object(a["A"])({user:{}}),s=Object(a["B"])(""),r=Object(a["B"])("");function l(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart");M.a.get(e).then((function(e){console.log("carts",e),e.data.success&&(t.arr=e.data.data)})).catch((function(e){console.log(e)}))}function i(e){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(e.id);M.a.delete(t).then((function(e){console.log("carts",e),e.data.success&&(H["a"].emit("update-cart"),l())})).catch((function(e){console.log(e)}))}function u(e,t){o.value=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(t);M.a.put(c,{data:{product_id:t,qty:e}}).then((function(e){console.log("edit",e),e.data.success&&(o.value=!1,H["a"].emit("update-cart"),l())})).catch((function(e){console.log(e)}))}function b(e){var t=e.qty+1;u(t,e.id)}function d(e){var t=e.qty-1;u(t,e.id)}function p(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/coupon");M.a.post(e,{data:{code:c.value}}).then((function(e){console.log("coupon",e),e.data.success&&(H["a"].emit("update-cart"),l())})).catch((function(e){console.log(e)}))}function m(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"}function j(){r.value="submit";var t="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/order");M.a.post(t,{data:{user:n.user,message:s.value}}).then((function(t){r.value="",console.log("submit",t),t.data.success&&(e.push("/frontDesk/pay/".concat(t.data.orderId)),H["a"].emit("update-cart"),console.log("訂單成功 :>> ","訂單成功"))})).catch((function(e){console.log(e)}))}return Object(a["t"])((function(){l()})),{carts:t,coupon:c,isChageQty:o,user:n,message:s,isLoading:r,currency:G["a"],delProduct:i,addQty:b,minusQty:d,useCoupon:p,isPhone:m,onSubmit:j}}};c("fad3");R.render=z,R.__scopeId="data-v-2c920fbc";t["default"]=R},b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,n=Function.prototype,s=n.toString,r=/^\s*function ([^ (]*)/,l="name";a&&!(l in n)&&o(n,l,{configurable:!0,get:function(){try{return s.call(this).match(r)[1]}catch(e){return""}}})},df29:function(e,t,c){},fad3:function(e,t,c){"use strict";c("df29")}}]);
//# sourceMappingURL=chunk-59694d02.3552568a.js.map