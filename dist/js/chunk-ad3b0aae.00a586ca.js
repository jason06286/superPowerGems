(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad3b0aae"],{"16c2":function(t,e,c){"use strict";c("7719")},"241e":function(t,e,c){"use strict";var o=c("7a23"),n=Object(o["U"])("data-v-66401ec8");Object(o["z"])("data-v-66401ec8");var a={class:"d-flex align-items-center"},i={class:"overflow-hidden"},r={class:"position-relative btn-container"},l=Object(o["h"])(" 刪除 "),d=Object(o["i"])("i",{class:"bi bi-trash-fill"},null,-1),s=Object(o["h"])(" 確定 "),u=Object(o["i"])("i",{class:"bi bi-question-circle-fill"},null,-1);Object(o["x"])();var b=n((function(t,e,c,n,b,p){return Object(o["w"])(),Object(o["e"])("div",a,[Object(o["i"])("div",i,[Object(o["i"])("div",r,[Object(o["i"])("button",{type:"button",class:["btn btn-outline-danger",{"btn-sm":n.props.btnSmall}]},[l,d],2),Object(o["i"])("button",{type:"button",class:["position-absolute btn btn-danger w-100",{"btn-sm":n.props.btnSmall}]},[s,u],2)])])])})),p={props:{btnSmall:{Boolean:Boolean,default:!1}},setup:function(t){return{props:t}}};c("2e33");p.render=b,p.__scopeId="data-v-66401ec8";e["a"]=p},"2d24":function(t,e,c){"use strict";c.d(e,"a",(function(){return n}));var o=c("7a23");function n(){return Object(o["m"])("$swal")}},"2e33":function(t,e,c){"use strict";c("6d79")},"31da":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),n=Object(o["U"])("data-v-fd3179dc");Object(o["z"])("data-v-fd3179dc");var a={class:"my-2"},i=Object(o["i"])("h2",{class:"pb-3 mb-3 fw-bold border-bottom border-3 border-orange"}," 產品列表 ",-1),r={class:"text-end"},l={class:"table-responsive-lg"},d={class:"table mt-4 table-hover"},s=Object(o["i"])("thead",null,[Object(o["i"])("tr",null,[Object(o["i"])("th",{width:"120"},"分類"),Object(o["i"])("th",null,"產品名稱"),Object(o["i"])("th",{width:"100"},"原價"),Object(o["i"])("th",{width:"100"},"售價"),Object(o["i"])("th",{width:"100"},"是否啟用"),Object(o["i"])("th",{width:"120"},"編輯"),Object(o["i"])("th",{width:"120"},"刪除")])],-1),u={class:"text-center"},b={class:"text-center"},p={class:"text-center"},j={key:0,class:"text-success"},O={key:1,class:"text-secondary"},m=Object(o["h"])(" 編輯 "),f=Object(o["i"])("i",{class:"bi bi-pen-fill"},null,-1),v={class:"mt-5 d-flex justify-content-center"},g=Object(o["h"])(" 產品 ");Object(o["x"])();var h=n((function(t,e,c,h,y,w){var P=Object(o["F"])("BaseLoading"),x=Object(o["F"])("BaseDelteButton"),k=Object(o["F"])("BasePagination"),U=Object(o["F"])("BaseProductModal"),M=Object(o["F"])("BaseDeleteModal");return Object(o["w"])(),Object(o["e"])(o["a"],null,[Object(o["i"])(P,{isLoading:t.isLoading},null,8,["isLoading"]),Object(o["i"])("div",a,[i,Object(o["i"])("div",r,[Object(o["i"])("button",{class:"text-white btn btn-orange",type:"button",onClick:e[1]||(e[1]=function(e){return t.openProductModal({},!0)})}," 新增商品 ")]),Object(o["i"])("div",l,[Object(o["i"])("table",d,[s,Object(o["i"])("tbody",null,[(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["D"])(h.products.arr,(function(e){return Object(o["w"])(),Object(o["e"])("tr",{key:e.id},[Object(o["i"])("td",null,Object(o["I"])(e.category),1),Object(o["i"])("td",null,Object(o["I"])(e.title),1),Object(o["i"])("td",u,Object(o["I"])(h.currency(e.origin_price)),1),Object(o["i"])("td",b,Object(o["I"])(h.currency(e.price)),1),Object(o["i"])("td",p,[e.is_enabled?(Object(o["w"])(),Object(o["e"])("span",j,"啟用")):(Object(o["w"])(),Object(o["e"])("span",O,"未啟用"))]),Object(o["i"])("td",null,[Object(o["i"])("button",{type:"button",class:"btn btn-orange btn-sm",onClick:function(c){return t.openProductModal(e,!1)}},[m,f],8,["onClick"])]),Object(o["i"])("td",null,[Object(o["i"])(x,{btnSmall:!0,onClick:function(c){return t.openDeleteModal(e)}},null,8,["onClick"])])])})),128))])])])]),Object(o["i"])("div",v,[Object(o["i"])(k,{pagination:h.pagination,onGetNowpage:t.getProducts},null,8,["pagination","onGetNowpage"])]),Object(o["i"])(U,{ref:"productModal",product:t.tempProduct,newProduct:t.newProduct,onProductStatus:t.productStatus},null,8,["product","newProduct","onProductStatus"]),Object(o["i"])(M,{ref:"productDeleteModal",deleteItem:t.tempProduct.obj,onDeleteItem:t.delProduct},{default:n((function(){return[g]})),_:1},8,["deleteItem","onDeleteItem"])],64)})),y=c("5530"),w=(c("99af"),c("241e")),P=c("dd87"),x=(c("a4d3"),c("e01a"),Object(o["U"])("data-v-26323e04"));Object(o["z"])("data-v-26323e04");var k={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},U={class:"modal-dialog modal-xl"},M={class:"border-0 modal-content"},_={class:"text-white bg-primary modal-header"},I={id:"productModalLabel",class:"modal-title"},S={key:0},B={key:1},N=Object(o["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),D={class:"modal-body"},C={class:"row"},L={class:"col-sm-4"},F={class:"mb-1"},V={class:"my-2 form-group"},A=Object(o["i"])("label",{for:"imageUrl"},"輸入圖片網址",-1),E={class:"my-2 form-group"},J=Object(o["i"])("label",{for:"fileInput"},"或上傳圖片",-1),z={key:0},T={key:1},G={key:2},$={class:"col-sm-8"},q={class:"form-group"},Q=Object(o["i"])("label",{for:"title"},[Object(o["h"])("標題"),Object(o["i"])("span",{class:"text-danger"},"*")],-1),H={class:"row"},K={class:"form-group col-md-6"},R=Object(o["i"])("label",{for:"category"},[Object(o["h"])("分類"),Object(o["i"])("span",{class:"text-danger"},"*")],-1),W={class:"form-group col-md-6"},X=Object(o["i"])("label",{for:"unit"},[Object(o["h"])("單位"),Object(o["i"])("span",{class:"text-danger"},"*")],-1),Y={class:"row"},Z={class:"form-group col-md-6"},tt=Object(o["i"])("label",{for:"origin_price"},[Object(o["h"])("原價"),Object(o["i"])("span",{class:"text-danger"},"*")],-1),et={class:"form-group col-md-6"},ct=Object(o["i"])("label",{for:"price"},[Object(o["h"])("售價"),Object(o["i"])("span",{class:"text-danger"},"*")],-1),ot=Object(o["i"])("hr",null,null,-1),nt={class:"form-group"},at=Object(o["i"])("label",{for:"description"},"產品描述",-1),it={class:"form-group"},rt=Object(o["i"])("label",{for:"content"},"說明內容",-1),lt={class:"form-group"},dt={class:"form-check"},st=Object(o["i"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),ut={class:"modal-footer"},bt=Object(o["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);Object(o["x"])();var pt=x((function(t,e,c,n,a,i){return Object(o["w"])(),Object(o["e"])("div",k,[Object(o["i"])("div",U,[Object(o["i"])("div",M,[Object(o["i"])("div",_,[Object(o["i"])("h5",I,[c.newProduct?(Object(o["w"])(),Object(o["e"])("span",S,"新增產品")):(Object(o["w"])(),Object(o["e"])("span",B,"修改產品"))]),N]),Object(o["i"])("div",D,[Object(o["i"])("div",C,[Object(o["i"])("div",L,[Object(o["i"])("div",F,[Object(o["i"])("div",V,[A,Object(o["S"])(Object(o["i"])("input",{type:"text",id:"imageUrl",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.tempProduct.obj.imageUrl=e})},null,512),[[o["N"],t.tempProduct.obj.imageUrl]])]),Object(o["i"])("div",E,[J,Object(o["i"])("input",{type:"file",id:"fileInput",class:"form-control",ref:"fileInput",onChange:e[2]||(e[2]=function(){return t.uploadFile&&t.uploadFile.apply(t,arguments)})},null,544)]),Object(o["i"])("img",{class:"img-fluid",src:t.tempProduct.obj.imageUrl,alt:"上傳的圖片"},null,8,["src"])]),Array.isArray(t.tempProduct.obj.imagesUrl)?(Object(o["w"])(),Object(o["e"])("div",z,[Object(o["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=function(){return t.addPicture&&t.addPicture.apply(t,arguments)})}," 新增圖片 ")])):(Object(o["w"])(),Object(o["e"])("div",T,[Object(o["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[4]||(e[4]=function(){return t.newPicture&&t.newPicture.apply(t,arguments)})}," 新增圖片 ")])),Object(o["i"])("div",null,[Object(o["i"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[5]||(e[5]=function(){return t.delPicture&&t.delPicture.apply(t,arguments)})}," 刪除圖片 ")]),Array.isArray(t.tempProduct.obj.imagesUrl)?(Object(o["w"])(),Object(o["e"])("div",G,[(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["D"])(t.tempProduct.obj.imagesUrl,(function(t){return Object(o["w"])(),Object(o["e"])("img",{class:"my-2 img-fluid",key:t,src:t,alt:"商品的圖片"},null,8,["src"])})),128))])):Object(o["f"])("",!0)]),Object(o["i"])("div",$,[Object(o["i"])("div",q,[Q,Object(o["S"])(Object(o["i"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[6]||(e[6]=function(e){return t.tempProduct.obj.title=e})},null,512),[[o["N"],t.tempProduct.obj.title]])]),Object(o["i"])("div",H,[Object(o["i"])("div",K,[R,Object(o["S"])(Object(o["i"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[7]||(e[7]=function(e){return t.tempProduct.obj.category=e})},null,512),[[o["N"],t.tempProduct.obj.category]])]),Object(o["i"])("div",W,[X,Object(o["S"])(Object(o["i"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[8]||(e[8]=function(e){return t.tempProduct.obj.unit=e})},null,512),[[o["N"],t.tempProduct.obj.unit]])])]),Object(o["i"])("div",Y,[Object(o["i"])("div",Z,[tt,Object(o["S"])(Object(o["i"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[9]||(e[9]=function(e){return t.tempProduct.obj.origin_price=e})},null,512),[[o["N"],t.tempProduct.obj.origin_price,void 0,{number:!0}]])]),Object(o["i"])("div",et,[ct,Object(o["S"])(Object(o["i"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[10]||(e[10]=function(e){return t.tempProduct.obj.price=e})},null,512),[[o["N"],t.tempProduct.obj.price,void 0,{number:!0}]])])]),ot,Object(o["i"])("div",nt,[at,Object(o["S"])(Object(o["i"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[11]||(e[11]=function(e){return t.tempProduct.obj.description=e})},"\n                ",512),[[o["N"],t.tempProduct.obj.description]])]),Object(o["i"])("div",it,[rt,Object(o["S"])(Object(o["i"])("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[12]||(e[12]=function(e){return t.tempProduct.obj.content=e})},"\n                ",512),[[o["N"],t.tempProduct.obj.content]])]),Object(o["i"])("div",lt,[Object(o["i"])("div",dt,[Object(o["S"])(Object(o["i"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[13]||(e[13]=function(e){return t.tempProduct.obj.is_enabled=e})},null,512),[[o["L"],t.tempProduct.obj.is_enabled,void 0,{number:!0}]]),st])])])])]),Object(o["i"])("div",ut,[bt,Object(o["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[14]||(e[14]=function(e){return n.emit("productStatus",t.tempProduct.obj)})}," 確認 ")])])])],512)})),jt=c("bc3a"),Ot=c.n(jt),mt=c("7c2b"),ft=c.n(mt),vt={props:{product:{type:Object,default:function(){return{}}},newProduct:{type:Boolean,default:function(){return!0}}},emits:["productStatus"],setup:function(t,e){var c=e.emit;function n(){var t=Object(o["B"])(null),e=null,c=function(){e.show()},n=function(){e.hide()};return Object(o["t"])((function(){e=new ft.a(t.value)})),{productModal:t,showProductModal:c,hideProductModal:n}}function a(){var e=Object(o["B"])(null),c=Object(o["A"])({obj:{}});Object(o["Q"])((function(){return t.product.obj}),(function(){c.obj=t.product.obj}));var n=function(){c.obj.imagesUrl=[],c.obj.imagesUrl.push(c.obj.imageUrl),c.obj.imageUrl=""},a=function(){c.obj.imagesUrl.push(c.obj.imageUrl),c.obj.imageUrl=""},i=function(){c.obj.imagesUrl.pop()},r=function(){var t=e.value.files[0],o=new FormData;o.append("file-to-upload",t);var n="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/upload");Ot.a.post(n,o).then((function(t){t.data.success?c.obj.imageUrl=t.data.imageUrl:console.error=function(){throw new Error(t.data.message)}})).catch((function(t){console.error=function(){throw new Error(t)}}))};return{tempProduct:c,fileInput:e,newPicture:n,addPicture:a,delPicture:i,uploadFile:r}}return Object(y["a"])(Object(y["a"])({emit:c},n()),a())}};vt.render=pt,vt.__scopeId="data-v-26323e04";var gt=vt,ht=c("6461"),yt=c("5d10"),wt=c("2d24"),Pt=c("1336"),xt={components:{BaseDelteButton:w["a"],BasePagination:P["a"],BaseProductModal:gt,BaseDeleteModal:ht["a"],BaseLoading:yt["a"]},setup:function(){var t=Object(o["A"])({arr:[]}),e=Object(o["A"])({obj:{}}),c=Object(o["B"])(null),n=Object(wt["a"])();function a(t,e){n.fire({icon:"success",title:t,text:e})}function i(t,e){n.fire({icon:"error",title:t,text:e})}function r(){var n=Object(o["B"])(!1),i=function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.value=!0;var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/products?page=").concat(c);Ot.a.get(o).then((function(c){c.data.success?(t.arr=c.data.products,e.obj=c.data.pagination,n.value=!1):console.error=function(){throw new Error(c.data.message)}})).catch((function(t){console.error=function(){throw new Error(t)}}))},r=function(t){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/product/").concat(t);Ot.a.delete(e).then((function(t){t.data.success?(i(),a("刪除","刪除商品成功!")):console.error=function(){throw new Error(t.data.message)}})).catch((function(t){console.error=function(){throw new Error(t)}})),c.value.hideDelModal()};return Object(o["t"])((function(){i()})),{isLoading:n,getProducts:i,delProduct:r}}function l(){var t=Object(o["B"])(null),e=Object(o["B"])(!1),n=Object(o["A"])({obj:{imagesUrl:[]}}),l=r(),d=l.getProducts,s=function(c,o){n.obj=JSON.parse(JSON.stringify(c)),e.value=o,t.value.showProductModal()},u=function(t){n.obj=JSON.parse(JSON.stringify(t)),c.value.showDelModal()},b=function(c){n.obj=c;var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/product"),r="post";e.value||(o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/product/").concat(c.id),r="put"),Ot.a[r](o,{data:n.obj}).then((function(c){c.data.success?(d(),a(e.value?"新增":"修改",e.value?"新增商品成功!":"修改商品成功!")):i("Oops...",c.data.message),t.value.hideProductModal()})).catch((function(t){console.error(t)}))};return{productModal:t,newProduct:e,tempProduct:n,openProductModal:s,openDeleteModal:u,productStatus:b}}return Object(y["a"])(Object(y["a"])({products:t,pagination:e,productDeleteModal:c,currency:Pt["a"]},r()),l())}};xt.render=h,xt.__scopeId="data-v-fd3179dc";e["default"]=xt},"5d10":function(t,e,c){"use strict";var o=c("7a23"),n=Object(o["U"])("data-v-e7dc2c3c");Object(o["z"])("data-v-e7dc2c3c");var a=Object(o["i"])("div",{class:"loadingio-spinner"},[Object(o["i"])("div",{class:"loadingio-inner"},[Object(o["i"])("div",{style:{left:"21px",top:"21px","animation-delay":"0s"}}),Object(o["i"])("div",{style:{left:"75px",top:"21px","animation-delay":"0.125s"}}),Object(o["i"])("div",{style:{left:"129px",top:"21px","animation-delay":"0.25s"}}),Object(o["i"])("div",{style:{left:"21px",top:"75px","animation-delay":"0.875s"}}),Object(o["i"])("div",{style:{left:"129px",top:"75px","animation-delay":"0.375s"}}),Object(o["i"])("div",{style:{left:"21px",top:"129px","animation-delay":"0.75s"}}),Object(o["i"])("div",{style:{left:"75px",top:"129px","animation-delay":"0.625s"}}),Object(o["i"])("div",{style:{left:"129px",top:"129px","animation-delay":"0.5s"}})])],-1);Object(o["x"])();var i=n((function(t,e,c,i,r,l){var d=Object(o["F"])("Loading");return Object(o["w"])(),Object(o["e"])(d,{active:i.attrs.isLoading},{default:n((function(){return[a]})),_:1},8,["active"])})),r={setup:function(t,e){var c=e.attrs;return{attrs:c}}};c("16c2");r.render=i,r.__scopeId="data-v-e7dc2c3c";e["a"]=r},"5fbc":function(t,e,c){"use strict";c("7a87")},6461:function(t,e,c){"use strict";var o=c("7a23"),n={id:"delModal",ref:"delModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true"},a={class:"modal-dialog"},i={class:"border-0 modal-content"},r={class:"text-white modal-header bg-danger"},l={id:"delModalLabel",class:"modal-title"},d=Object(o["h"])("刪除"),s=Object(o["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),u={class:"modal-body"},b=Object(o["h"])(" 是否刪除 "),p={class:"text-danger"},j=Object(o["h"])(" 商品(刪除後將無法恢復)。 "),O={class:"modal-footer"},m=Object(o["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function f(t,e,c,f,v,g){return Object(o["w"])(),Object(o["e"])("div",n,[Object(o["i"])("div",a,[Object(o["i"])("div",i,[Object(o["i"])("div",r,[Object(o["i"])("h5",l,[Object(o["i"])("span",null,[d,Object(o["E"])(t.$slots,"default")])]),s]),Object(o["i"])("div",u,[b,Object(o["i"])("strong",p,Object(o["I"])(f.props.deleteItem.title),1),j]),Object(o["i"])("div",O,[m,Object(o["i"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(t){return f.emit("deleteItem",f.props.deleteItem.id)})}," 確認刪除 ")])])])],512)}var v=c("5530"),g=c("7c2b"),h=c.n(g),y={props:{deleteItem:{type:Object,default:function(){return{}}}},emits:["deleteItem"],setup:function(t,e){var c=e.emit;function n(){var t=Object(o["B"])(null),e=null,c=function(){e.show()},n=function(){e.hide()};return Object(o["t"])((function(){e=new h.a(t.value)})),{delModal:t,showDelModal:c,hideDelModal:n}}return Object(v["a"])({props:t,emit:c},n())}};y.render=f;e["a"]=y},"6d79":function(t,e,c){},7719:function(t,e,c){},"7a87":function(t,e,c){},dd87:function(t,e,c){"use strict";var o=c("7a23"),n=Object(o["U"])("data-v-79cc22fc");Object(o["z"])("data-v-79cc22fc");var a={"aria-label":"Page navigation example"},i={class:"pagination"},r=Object(o["i"])("span",{"aria-hidden":"true"},"«",-1),l=Object(o["i"])("span",{"aria-hidden":"true"},"»",-1);Object(o["x"])();var d=n((function(t,e,c,n,d,s){return Object(o["w"])(),Object(o["e"])("nav",a,[Object(o["i"])("ul",i,[Object(o["i"])("li",{class:["page-item",{disabled:!n.props.pagination.obj.has_pre}]},[Object(o["i"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[1]||(e[1]=Object(o["T"])((function(t){return n.emit("getNowpage",n.props.pagination.obj.current_page-1)}),["prevent"]))},[r])],2),(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["D"])(n.props.pagination.obj.total_pages,(function(t){return Object(o["w"])(),Object(o["e"])("li",{class:["page-item",{active:t===n.props.pagination.obj.current_page}],key:t},[Object(o["i"])("a",{class:"page-link",href:"#",onClick:Object(o["T"])((function(e){return n.emit("getNowpage",t)}),["prevent"])},Object(o["I"])(t),9,["onClick"])],2)})),128)),Object(o["i"])("li",{class:["page-item",{disabled:!n.props.pagination.obj.has_next}]},[Object(o["i"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[2]||(e[2]=Object(o["T"])((function(t){return n.emit("getNowpage",n.props.pagination.obj.current_page+1)}),["prevent"]))},[l])],2)])])})),s={props:{pagination:{type:Object,default:function(){return{}}},getProducts:{type:Function,default:function(){}}},emits:["getNowpage"],setup:function(t,e){var c=e.emit;return{props:t,emit:c}}};c("5fbc");s.render=d,s.__scopeId="data-v-79cc22fc";e["a"]=s}}]);
//# sourceMappingURL=chunk-ad3b0aae.00a586ca.js.map