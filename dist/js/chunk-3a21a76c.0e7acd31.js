(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a21a76c"],{"16c2":function(e,t,a){"use strict";a("7719")},"2d24":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var c=a("7a23");function r(){return Object(c["m"])("$swal")}},"4de4":function(e,t,a){"use strict";var c=a("23e7"),r=a("b727").filter,n=a("1dde"),i=n("filter");c({target:"Array",proto:!0,forced:!i},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("b64b"),a("a4d3"),a("4de4"),a("e439"),a("159b"),a("dbb4");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,c)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},"5d10":function(e,t,a){"use strict";var c=a("7a23"),r=Object(c["U"])("data-v-e7dc2c3c");Object(c["z"])("data-v-e7dc2c3c");var n=Object(c["i"])("div",{class:"loadingio-spinner"},[Object(c["i"])("div",{class:"loadingio-inner"},[Object(c["i"])("div",{style:{left:"21px",top:"21px","animation-delay":"0s"}}),Object(c["i"])("div",{style:{left:"75px",top:"21px","animation-delay":"0.125s"}}),Object(c["i"])("div",{style:{left:"129px",top:"21px","animation-delay":"0.25s"}}),Object(c["i"])("div",{style:{left:"21px",top:"75px","animation-delay":"0.875s"}}),Object(c["i"])("div",{style:{left:"129px",top:"75px","animation-delay":"0.375s"}}),Object(c["i"])("div",{style:{left:"21px",top:"129px","animation-delay":"0.75s"}}),Object(c["i"])("div",{style:{left:"75px",top:"129px","animation-delay":"0.625s"}}),Object(c["i"])("div",{style:{left:"129px",top:"129px","animation-delay":"0.5s"}})])],-1);Object(c["x"])();var i=r((function(e,t,a,i,o,s){var l=Object(c["F"])("Loading");return Object(c["w"])(),Object(c["e"])(l,{active:i.attrs.isLoading},{default:r((function(){return[n]})),_:1},8,["active"])})),o={setup:function(e,t){var a=t.attrs;return{attrs:a}}};a("16c2");o.render=i,o.__scopeId="data-v-e7dc2c3c";t["a"]=o},7719:function(e,t,a){},"7dd8":function(e,t,a){"use strict";a.r(t);a("b64b"),a("b0c0");var c=a("7a23"),r=Object(c["U"])("data-v-3669d967");Object(c["z"])("data-v-3669d967");var n={class:"my-2"},i=Object(c["i"])("h4",{class:"pb-3 mb-3 fw-bold border-bottom border-3 border-darkred"}," 訂單列表 ",-1),o={class:"accordion",id:"accordionExample"},s={key:0,class:"accordion-body"},l={class:"d-flex justify-content-between"},d={class:"fw-bold"},b=Object(c["h"])(" 訂單時間: "),u={class:"mx-1"},p={key:0,class:"text-success"},O={key:1,class:"text-secondary"},j={class:"row"},f={class:"col-lg-6 col-12"},m={class:"p-4"},v=Object(c["i"])("h5",{class:"pb-2 border-2 border-bottom border-darkred"}," 訂單內容 ",-1),g={class:"text-end"},y=Object(c["h"])(" 總金額:"),h={class:"m-2"},w=Object(c["h"])("元 "),x={class:"col-lg-6 col-12"},k={class:"mb-3 form-group"},P=Object(c["i"])("label",{for:"name",class:"mb-2"},"Name *",-1),_={class:"mb-3 form-group"},V=Object(c["i"])("label",{for:"email",class:"mb-2"},"Email *",-1),D={class:"mb-3 form-group"},E=Object(c["i"])("label",{for:"tel",class:"mb-2"},"Phone *",-1),F={class:"mb-3 form-group"},I=Object(c["i"])("label",{for:"address",class:"mb-2"},"Address *",-1),N={class:"d-flex justify-content-end w-100"},C={class:"mt-5 d-flex justify-content-center"};Object(c["x"])();var L=r((function(e,t,a,L,U,A){var B=Object(c["F"])("BaseLoading"),S=Object(c["F"])("Field"),q=Object(c["F"])("ErrorMessage"),J=Object(c["F"])("Form"),z=Object(c["F"])("BasePagination");return Object(c["w"])(),Object(c["e"])(c["a"],null,[Object(c["i"])(B,{isLoading:e.isLoading},null,8,["isLoading"]),Object(c["i"])("div",n,[i,Object(c["i"])("div",o,[(Object(c["w"])(!0),Object(c["e"])(c["a"],null,Object(c["D"])(L.orders.arr,(function(a){return Object(c["w"])(),Object(c["e"])("div",{class:"accordion-item",key:a.id},[Object(c["i"])("h2",{class:"accordion-header",id:"".concat(a.id,"6")},[Object(c["i"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(a.id),"aria-expanded":"false","aria-controls":a.id,onClick:function(t){return e.tempOrder.obj=JSON.parse(JSON.stringify(a))}}," 訂單編號:"+Object(c["I"])(a.id),9,["data-bs-target","aria-controls","onClick"])],8,["id"]),Object(c["i"])("div",{id:a.id,class:"accordion-collapse collapse","aria-labelledby":"".concat(a.id,"6"),"data-bs-parent":"#accordionExample"},[0!=Object.keys(e.tempOrder.obj).length&&e.tempOrder.obj.id===a.id?(Object(c["w"])(),Object(c["e"])("div",s,[Object(c["i"])("div",l,[Object(c["i"])("h4",d,[b,Object(c["i"])("span",u,Object(c["I"])(L.formatDate(e.tempOrder.obj.create_at)),1)]),e.tempOrder.obj.is_paid?(Object(c["w"])(),Object(c["e"])("h4",p,"已付款")):(Object(c["w"])(),Object(c["e"])("h4",O,"未付款"))]),Object(c["i"])("div",j,[Object(c["i"])("div",f,[Object(c["i"])("div",m,[v,(Object(c["w"])(!0),Object(c["e"])(c["a"],null,Object(c["D"])(e.tempOrder.obj.products,(function(e){return Object(c["w"])(),Object(c["e"])("p",{class:"pb-2 mb-2 border-bottom border-gray",key:e.id},Object(c["I"])(e.product.title)+"/"+Object(c["I"])(e.qty)+Object(c["I"])(e.product.unit),1)})),128)),Object(c["i"])("h5",g,[y,Object(c["i"])("span",h,Object(c["I"])(L.currency(e.tempOrder.obj.total)),1),w])])]),Object(c["i"])("div",x,[Object(c["i"])(J,null,{default:r((function(r){var n=r.errors;return[Object(c["i"])("div",k,[P,Object(c["i"])(S,{id:"name",name:"name",type:"text",class:["form-control",{"is-invalid":n["name"]}],placeholder:"請輸入 name",rules:"required",modelValue:e.tempOrder.obj.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tempOrder.obj.user.name=t})},null,8,["class","modelValue"]),Object(c["i"])(q,{name:"name",class:"invalid-feedback"})]),Object(c["i"])("div",_,[V,Object(c["i"])(S,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":n["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:e.tempOrder.obj.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.tempOrder.obj.user.email=t})},null,8,["class","modelValue"]),Object(c["i"])(q,{name:"email",class:"invalid-feedback"})]),Object(c["i"])("div",D,[E,Object(c["i"])(S,{id:"tel",name:"tel",type:"tel",class:["form-control",{"is-invalid":n["tel"]}],placeholder:"請輸入 tel",rules:L.isPhone,modelValue:e.tempOrder.obj.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.tempOrder.obj.user.tel=t})},null,8,["class","rules","modelValue"]),Object(c["i"])(q,{name:"tel",class:"invalid-feedback"})]),Object(c["i"])("div",F,[I,Object(c["i"])(S,{id:"address",name:"address",type:"text",class:["form-control",{"is-invalid":n["address"]}],placeholder:"請輸入 address",rules:"required",modelValue:e.tempOrder.obj.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.tempOrder.obj.user.address=t})},null,8,["class","modelValue"]),Object(c["i"])(q,{name:"address",class:"invalid-feedback"})]),Object(c["i"])("div",N,[Object(c["i"])("button",{class:"btn btn-outline-title me-3",type:"button",onClick:t[5]||(t[5]=function(){return e.editOrder&&e.editOrder.apply(e,arguments)})}," 修改客戶資料 "),Object(c["i"])("button",{class:"btn btn-outline-darkred",type:"button",onClick:function(t){return e.delOrder(a.id)}}," 刪除訂單 ",8,["onClick"])])]})),_:2},1024)])])])):Object(c["f"])("",!0)],8,["id","aria-labelledby"])])})),128))]),Object(c["i"])("div",C,[Object(c["i"])(z,{pagination:L.pagination,onGetNowpage:e.getOrders},null,8,["pagination","onGetNowpage"])])])],64)})),U=a("5530"),A=(a("99af"),a("dd87")),B=a("5d10"),S=a("bc3a"),q=a.n(S),J=a("2d24"),z=a("1336"),T={components:{BasePagination:A["a"],BaseLoading:B["a"]},setup:function(){var e=Object(c["A"])({arr:[]}),t=Object(c["A"])({obj:{}}),a=Object(J["a"])();function r(e,t){a.fire({icon:"success",title:e,text:t})}function n(e,t){a.fire({icon:"error",title:e,text:t})}function i(){var a=Object(c["A"])({obj:{}}),i=Object(c["B"])(!1),o=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;i.value=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/orders?page=").concat(a);q.a.get(c).then((function(a){a.data.success?(e.arr=a.data.orders,t.obj=a.data.pagination,i.value=!1):console.error=function(){throw new Error(a.data.message)}})).catch((function(e){console.error=function(){throw new Error(e)}}))},s=function(e){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/order/").concat(e);q.a.delete(t).then((function(e){e.data.success?(o(),r("刪除訂單","刪除訂單成功!")):n("Oops...",e.data.message)})).catch((function(e){console.error=function(){throw new Error(e)}}))},l=function(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/order/").concat(a.obj.id);q.a.put(e,{data:Object(U["a"])({},a.obj)}).then((function(e){e.data.success?(o(),r("修改訂單","修改訂單成功!")):n("Oops...",e.data.message)})).catch((function(e){console.error=function(){throw new Error(e)}}))};return Object(c["t"])((function(){o()})),{tempOrder:a,isLoading:i,getOrders:o,delOrder:s,editOrder:l}}function o(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"}return Object(U["a"])({orders:e,pagination:t,currency:z["a"],formatDate:z["b"],isPhone:o},i())}};T.render=L,T.__scopeId="data-v-3669d967";t["default"]=T},b0c0:function(e,t,a){var c=a("83ab"),r=a("9bf2").f,n=Function.prototype,i=n.toString,o=/^\s*function ([^ (]*)/,s="name";c&&!(s in n)&&r(n,s,{configurable:!0,get:function(){try{return i.call(this).match(o)[1]}catch(e){return""}}})},b64b:function(e,t,a){var c=a("23e7"),r=a("7b0b"),n=a("df75"),i=a("d039"),o=i((function(){n(1)}));c({target:"Object",stat:!0,forced:o},{keys:function(e){return n(r(e))}})},dbb4:function(e,t,a){var c=a("23e7"),r=a("83ab"),n=a("56ef"),i=a("fc6a"),o=a("06cf"),s=a("8418");c({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){var t,a,c=i(e),r=o.f,l=n(c),d={},b=0;while(l.length>b)a=r(c,t=l[b++]),void 0!==a&&s(d,t,a);return d}})},dd87:function(e,t,a){"use strict";var c=a("7a23"),r=Object(c["U"])("data-v-def117e8");Object(c["z"])("data-v-def117e8");var n={"aria-label":"Page navigation example"},i={class:"pagination"},o=Object(c["i"])("span",{"aria-hidden":"true"},"«",-1),s=Object(c["i"])("span",{"aria-hidden":"true"},"»",-1);Object(c["x"])();var l=r((function(e,t,a,r,l,d){return Object(c["w"])(),Object(c["e"])("nav",n,[Object(c["i"])("ul",i,[Object(c["i"])("li",{class:["page-item",{disabled:!r.props.pagination.obj.has_pre}]},[Object(c["i"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(c["T"])((function(e){return r.emit("getNowpage",r.props.pagination.obj.current_page-1)}),["prevent"]))},[o])],2),(Object(c["w"])(!0),Object(c["e"])(c["a"],null,Object(c["D"])(r.props.pagination.obj.total_pages,(function(e){return Object(c["w"])(),Object(c["e"])("li",{class:["page-item",{active:e===r.props.pagination.obj.current_page}],key:e},[Object(c["i"])("a",{class:"page-link",href:"#",onClick:Object(c["T"])((function(t){return r.emit("getNowpage",e)}),["prevent"])},Object(c["I"])(e),9,["onClick"])],2)})),128)),Object(c["i"])("li",{class:["page-item",{disabled:!r.props.pagination.obj.has_next}]},[Object(c["i"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(c["T"])((function(e){return r.emit("getNowpage",r.props.pagination.obj.current_page+1)}),["prevent"]))},[s])],2)])])})),d={props:{pagination:{type:Object,default:function(){return{}}},getProducts:{type:Function,default:function(){}}},emits:["getNowpage"],setup:function(e,t){var a=t.emit;return{props:e,emit:a}}};d.render=l,d.__scopeId="data-v-def117e8";t["a"]=d},e439:function(e,t,a){var c=a("23e7"),r=a("d039"),n=a("fc6a"),i=a("06cf").f,o=a("83ab"),s=r((function(){i(1)})),l=!o||s;c({target:"Object",stat:!0,forced:l,sham:!o},{getOwnPropertyDescriptor:function(e,t){return i(n(e),t)}})}}]);
//# sourceMappingURL=chunk-3a21a76c.0e7acd31.js.map