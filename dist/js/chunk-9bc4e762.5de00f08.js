(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9bc4e762"],{"241e":function(t,e,c){"use strict";var a=c("7a23"),o=Object(a["U"])("data-v-cc42c91a");Object(a["z"])("data-v-cc42c91a");var n={class:"d-flex align-items-center"},i={class:"overflow-hidden"},l={class:"position-relative btn-container "},r=Object(a["h"])(" 刪除 "),d=Object(a["i"])("i",{class:"bi bi-trash-fill"},null,-1),s=Object(a["h"])(" 確定 "),b=Object(a["i"])("i",{class:"bi bi-question-circle-fill"},null,-1);Object(a["x"])();var u=o((function(t,e,c,o,u,p){return Object(a["w"])(),Object(a["e"])("div",n,[Object(a["i"])("div",i,[Object(a["i"])("div",l,[Object(a["i"])("button",{type:"button",class:["btn btn-outline-danger",{"btn-sm":o.props.btnSmall}]},[r,d],2),Object(a["i"])("button",{type:"button",class:["position-absolute btn btn-danger",{"btn-sm":o.props.btnSmall}]},[s,b],2)])])])})),p={props:{btnSmall:{Boolean:Boolean,default:!1}},setup:function(t){return{props:t}}};c("6917");p.render=u,p.__scopeId="data-v-cc42c91a";e["a"]=p},"244e":function(t,e,c){},"2d24":function(t,e,c){"use strict";c.d(e,"a",(function(){return o}));var a=c("7a23");function o(){return Object(a["m"])("$swal")}},"2f40":function(t,e,c){},"31da":function(t,e,c){"use strict";c.r(e);var a=c("7a23"),o=Object(a["U"])("data-v-677ded10");Object(a["z"])("data-v-677ded10");var n={class:"my-2"},i=Object(a["i"])("h2",{class:"pb-3 mb-3 fw-bold border-bottom border-3 border-orange"}," 產品列表 ",-1),l={class:"text-end"},r={class:"table-responsive-lg"},d={class:"table mt-4 table-hover"},s=Object(a["i"])("thead",null,[Object(a["i"])("tr",null,[Object(a["i"])("th",{width:"120"},"分類"),Object(a["i"])("th",null,"產品名稱"),Object(a["i"])("th",{width:"100"},"原價"),Object(a["i"])("th",{width:"100"},"售價"),Object(a["i"])("th",{width:"100"},"是否啟用"),Object(a["i"])("th",{width:"120"},"編輯"),Object(a["i"])("th",{width:"120"},"刪除")])],-1),b={class:"text-center"},u={class:"text-center"},p={class:"text-center"},j={key:0,class:"text-success"},O={key:1,class:"text-secondary"},m=Object(a["h"])(" 編輯 "),f=Object(a["i"])("i",{class:"bi bi-pen-fill"},null,-1),v={class:"mt-5 d-flex justify-content-center"},g=Object(a["h"])(" 產品 ");Object(a["x"])();var h=o((function(t,e,c,h,y,w){var P=Object(a["F"])("BaseLoading"),x=Object(a["F"])("BaseDelteButton"),k=Object(a["F"])("BasePagination"),U=Object(a["F"])("BaseProductModal"),M=Object(a["F"])("BaseDeleteModal");return Object(a["w"])(),Object(a["e"])(a["a"],null,[Object(a["i"])(P,{isLoading:t.isLoading},null,8,["isLoading"]),Object(a["i"])("div",n,[i,Object(a["i"])("div",l,[Object(a["i"])("button",{class:"text-white btn btn-orange",type:"button",onClick:e[1]||(e[1]=function(e){return t.openProductModal({},!0)})}," 新增商品 ")]),Object(a["i"])("div",r,[Object(a["i"])("table",d,[s,Object(a["i"])("tbody",null,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(h.products.arr,(function(e){return Object(a["w"])(),Object(a["e"])("tr",{key:e.id},[Object(a["i"])("td",null,Object(a["I"])(e.category),1),Object(a["i"])("td",null,Object(a["I"])(e.title),1),Object(a["i"])("td",b,Object(a["I"])(h.currency(e.origin_price)),1),Object(a["i"])("td",u,Object(a["I"])(h.currency(e.price)),1),Object(a["i"])("td",p,[e.is_enabled?(Object(a["w"])(),Object(a["e"])("span",j,"啟用")):(Object(a["w"])(),Object(a["e"])("span",O,"未啟用"))]),Object(a["i"])("td",null,[Object(a["i"])("button",{type:"button",class:"btn btn-orange btn-sm",onClick:function(c){return t.openProductModal(e,!1)}},[m,f],8,["onClick"])]),Object(a["i"])("td",null,[Object(a["i"])(x,{btnSmall:!0,onClick:function(c){return t.openDeleteModal(e)}},null,8,["onClick"])])])})),128))])])])]),Object(a["i"])("div",v,[Object(a["i"])(k,{pagination:h.pagination,onGetNowpage:t.getProducts},null,8,["pagination","onGetNowpage"])]),Object(a["i"])(U,{ref:"productModal",product:t.tempProduct,newProduct:t.newProduct,onProductStatus:t.productStatus},null,8,["product","newProduct","onProductStatus"]),Object(a["i"])(M,{ref:"productDeleteModal",deleteItem:t.tempProduct.obj,onDeleteItem:t.delProduct},{default:o((function(){return[g]})),_:1},8,["deleteItem","onDeleteItem"])],64)})),y=c("5530"),w=(c("99af"),c("241e")),P=c("dd87"),x=(c("a4d3"),c("e01a"),Object(a["U"])("data-v-58091208"));Object(a["z"])("data-v-58091208");var k={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},U={class:"modal-dialog modal-xl"},M={class:"border-0 modal-content"},_={class:"text-white bg-orange-600 modal-header"},I={id:"productModalLabel",class:"modal-title"},S={key:0},B={key:1},N=Object(a["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),D={class:"modal-body"},C={class:"row"},L={class:"col-sm-4"},F={class:"mb-1"},V={class:"my-2 form-group"},A=Object(a["i"])("label",{for:"imageUrl"},"輸入圖片網址",-1),z={class:"my-2 form-group"},J=Object(a["i"])("label",{for:"fileInput"},"或上傳圖片",-1),T={key:0},q={key:1},G={key:2},$={class:"col-sm-8"},E={class:"form-group"},Q=Object(a["i"])("label",{for:"title"},[Object(a["h"])("標題"),Object(a["i"])("span",{class:"text-danger"},"*")],-1),H={class:"row"},K={class:"form-group col-md-6"},R=Object(a["i"])("label",{for:"category"},[Object(a["h"])("分類"),Object(a["i"])("span",{class:"text-danger"},"*")],-1),W={class:"form-group col-md-6"},X=Object(a["i"])("label",{for:"unit"},[Object(a["h"])("單位"),Object(a["i"])("span",{class:"text-danger"},"*")],-1),Y={class:"row"},Z={class:"form-group col-md-6"},tt=Object(a["i"])("label",{for:"origin_price"},[Object(a["h"])("原價"),Object(a["i"])("span",{class:"text-danger"},"*")],-1),et={class:"form-group col-md-6"},ct=Object(a["i"])("label",{for:"price"},[Object(a["h"])("售價"),Object(a["i"])("span",{class:"text-danger"},"*")],-1),at=Object(a["i"])("hr",null,null,-1),ot={class:"form-group"},nt=Object(a["i"])("label",{for:"description"},"產品描述",-1),it={class:"form-group"},lt=Object(a["i"])("label",{for:"content"},"說明內容",-1),rt={class:"form-group"},dt={class:"form-check"},st=Object(a["i"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),bt={class:"modal-footer"},ut=Object(a["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);Object(a["x"])();var pt=x((function(t,e,c,o,n,i){return Object(a["w"])(),Object(a["e"])("div",k,[Object(a["i"])("div",U,[Object(a["i"])("div",M,[Object(a["i"])("div",_,[Object(a["i"])("h5",I,[c.newProduct?(Object(a["w"])(),Object(a["e"])("span",S,"新增產品")):(Object(a["w"])(),Object(a["e"])("span",B,"修改產品"))]),N]),Object(a["i"])("div",D,[Object(a["i"])("div",C,[Object(a["i"])("div",L,[Object(a["i"])("div",F,[Object(a["i"])("div",V,[A,Object(a["S"])(Object(a["i"])("input",{type:"text",id:"imageUrl",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[1]||(e[1]=function(e){return t.tempProduct.obj.imageUrl=e})},null,512),[[a["N"],t.tempProduct.obj.imageUrl]])]),Object(a["i"])("div",z,[J,Object(a["i"])("input",{type:"file",id:"fileInput",class:"form-control",ref:"fileInput",onChange:e[2]||(e[2]=function(){return t.uploadFile&&t.uploadFile.apply(t,arguments)})},null,544)]),Object(a["i"])("img",{class:"img-fluid",src:t.tempProduct.obj.imageUrl,alt:"上傳的圖片"},null,8,["src"])]),Array.isArray(t.tempProduct.obj.imagesUrl)?(Object(a["w"])(),Object(a["e"])("div",T,[Object(a["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=function(){return t.addPicture&&t.addPicture.apply(t,arguments)})}," 新增圖片 ")])):(Object(a["w"])(),Object(a["e"])("div",q,[Object(a["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[4]||(e[4]=function(){return t.newPicture&&t.newPicture.apply(t,arguments)})}," 新增圖片 ")])),Object(a["i"])("div",null,[Object(a["i"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[5]||(e[5]=function(){return t.delPicture&&t.delPicture.apply(t,arguments)})}," 刪除圖片 ")]),Array.isArray(t.tempProduct.obj.imagesUrl)?(Object(a["w"])(),Object(a["e"])("div",G,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(t.tempProduct.obj.imagesUrl,(function(t){return Object(a["w"])(),Object(a["e"])("img",{class:"my-2 img-fluid",key:t,src:t,alt:"商品的圖片"},null,8,["src"])})),128))])):Object(a["f"])("",!0)]),Object(a["i"])("div",$,[Object(a["i"])("div",E,[Q,Object(a["S"])(Object(a["i"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[6]||(e[6]=function(e){return t.tempProduct.obj.title=e})},null,512),[[a["N"],t.tempProduct.obj.title]])]),Object(a["i"])("div",H,[Object(a["i"])("div",K,[R,Object(a["S"])(Object(a["i"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[7]||(e[7]=function(e){return t.tempProduct.obj.category=e})},null,512),[[a["N"],t.tempProduct.obj.category]])]),Object(a["i"])("div",W,[X,Object(a["S"])(Object(a["i"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[8]||(e[8]=function(e){return t.tempProduct.obj.unit=e})},null,512),[[a["N"],t.tempProduct.obj.unit]])])]),Object(a["i"])("div",Y,[Object(a["i"])("div",Z,[tt,Object(a["S"])(Object(a["i"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[9]||(e[9]=function(e){return t.tempProduct.obj.origin_price=e})},null,512),[[a["N"],t.tempProduct.obj.origin_price,void 0,{number:!0}]])]),Object(a["i"])("div",et,[ct,Object(a["S"])(Object(a["i"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[10]||(e[10]=function(e){return t.tempProduct.obj.price=e})},null,512),[[a["N"],t.tempProduct.obj.price,void 0,{number:!0}]])])]),at,Object(a["i"])("div",ot,[nt,Object(a["S"])(Object(a["i"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[11]||(e[11]=function(e){return t.tempProduct.obj.description=e})},"\n                ",512),[[a["N"],t.tempProduct.obj.description]])]),Object(a["i"])("div",it,[lt,Object(a["S"])(Object(a["i"])("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[12]||(e[12]=function(e){return t.tempProduct.obj.content=e})},"\n                ",512),[[a["N"],t.tempProduct.obj.content]])]),Object(a["i"])("div",rt,[Object(a["i"])("div",dt,[Object(a["S"])(Object(a["i"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[13]||(e[13]=function(e){return t.tempProduct.obj.is_enabled=e})},null,512),[[a["L"],t.tempProduct.obj.is_enabled,void 0,{number:!0}]]),st])])])])]),Object(a["i"])("div",bt,[ut,Object(a["i"])("button",{type:"button",class:"btn btn-orange",onClick:e[14]||(e[14]=function(e){return o.emit("productStatus",t.tempProduct.obj)})}," 確認 ")])])])],512)})),jt=c("bc3a"),Ot=c.n(jt),mt=c("7c2b"),ft=c.n(mt);function vt(){var t=Object(a["B"])(null),e=null,c=function(){e.show()},o=function(){e.hide()};return Object(a["t"])((function(){e=new ft.a(t.value)})),{productModal:t,showProductModal:c,hideProductModal:o}}function gt(t){var e=Object(a["B"])(null),c=Object(a["A"])({obj:{}});Object(a["Q"])((function(){return t.product.obj}),(function(){c.obj=t.product.obj}));var o=function(){c.obj.imagesUrl=[],c.obj.imagesUrl.push(c.obj.imageUrl),c.obj.imageUrl=""},n=function(){c.obj.imagesUrl.push(c.obj.imageUrl),c.obj.imageUrl=""},i=function(){c.obj.imagesUrl.pop()},l=function(){var t=e.value.files[0],a=new FormData;a.append("file-to-upload",t);var o="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/upload");Ot.a.post(o,a).then((function(t){t.data.success?c.obj.imageUrl=t.data.imageUrl:console.error(t.data.message)})).catch((function(t){console.error(t)}))};return{tempProduct:c,fileInput:e,newPicture:o,addPicture:n,delPicture:i,uploadFile:l}}var ht={props:{product:{type:Object,default:function(){return{}}},newProduct:{type:Boolean,default:function(){return!0}}},emits:["productStatus"],setup:function(t,e){var c=e.emit;return Object(y["a"])(Object(y["a"])({emit:c},vt()),gt(t))}};c("e4a8");ht.render=pt,ht.__scopeId="data-v-58091208";var yt=ht,wt=c("6461"),Pt=c("5d10"),xt=c("2d24"),kt=c("1336"),Ut={components:{BaseDelteButton:w["a"],BasePagination:P["a"],BaseProductModal:yt,BaseDeleteModal:wt["a"],BaseLoading:Pt["a"]},setup:function(){var t=Object(a["A"])({arr:[]}),e=Object(a["A"])({obj:{}}),c=Object(a["B"])(null),o=Object(xt["a"])();function n(t,e){o.fire({icon:"success",title:t,text:e})}function i(t,e){o.fire({icon:"error",title:t,text:e})}function l(){var o=Object(a["B"])(!1),i=function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o.value=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/products?page=").concat(c);Ot.a.get(a).then((function(c){c.data.success?(t.arr=c.data.products,e.obj=c.data.pagination,o.value=!1):console.error(c.data.message)})).catch((function(t){console.error(t)}))},l=function(t){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/product/").concat(t);Ot.a.delete(e).then((function(t){t.data.success?(i(),n("刪除","刪除商品成功!")):console.error(t.data.message)})).catch((function(t){console.error(t)})),c.value.hideDelModal()};return Object(a["t"])((function(){i()})),{isLoading:o,getProducts:i,delProduct:l}}function r(){var t=Object(a["B"])(null),e=Object(a["B"])(!1),o=Object(a["A"])({obj:{imagesUrl:[]}}),r=l(),d=r.getProducts,s=function(c,a){o.obj=JSON.parse(JSON.stringify(c)),e.value=a,t.value.showProductModal()},b=function(t){o.obj=JSON.parse(JSON.stringify(t)),c.value.showDelModal()},u=function(c){o.obj=c;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/product"),l="post";e.value||(a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/product/").concat(c.id),l="put"),Ot.a[l](a,{data:o.obj}).then((function(c){c.data.success?(d(),n(e.value?"新增":"修改",e.value?"新增商品成功!":"修改商品成功!")):i("Oops...",c.data.message),t.value.hideProductModal()})).catch((function(t){console.error(t)}))};return{productModal:t,newProduct:e,tempProduct:o,openProductModal:s,openDeleteModal:b,productStatus:u}}return Object(y["a"])(Object(y["a"])({products:t,pagination:e,productDeleteModal:c,currency:kt["a"]},l()),r())}};Ut.render=h,Ut.__scopeId="data-v-677ded10";e["default"]=Ut},"5d10":function(t,e,c){"use strict";var a=c("7a23"),o=Object(a["U"])("data-v-c3020bc4");Object(a["z"])("data-v-c3020bc4");var n=Object(a["i"])("div",{class:"loadingio-spinner-blocks-hghzlg9l8i"},[Object(a["i"])("div",{class:"ldio-cmlvaqhdbw"},[Object(a["i"])("div",{style:{left:"21px",top:"21px","animation-delay":"0s"}}),Object(a["i"])("div",{style:{left:"75px",top:"21px","animation-delay":"0.125s"}}),Object(a["i"])("div",{style:{left:"129px",top:"21px","animation-delay":"0.25s"}}),Object(a["i"])("div",{style:{left:"21px",top:"75px","animation-delay":"0.875s"}}),Object(a["i"])("div",{style:{left:"129px",top:"75px","animation-delay":"0.375s"}}),Object(a["i"])("div",{style:{left:"21px",top:"129px","animation-delay":"0.75s"}}),Object(a["i"])("div",{style:{left:"75px",top:"129px","animation-delay":"0.625s"}}),Object(a["i"])("div",{style:{left:"129px",top:"129px","animation-delay":"0.5s"}})])],-1);Object(a["x"])();var i=o((function(t,e,c,i,l,r){var d=Object(a["F"])("Loading");return Object(a["w"])(),Object(a["e"])(d,{active:i.attrs.isLoading},{default:o((function(){return[n]})),_:1},8,["active"])})),l={setup:function(t,e){var c=e.attrs;return{attrs:c}}};c("dac1");l.render=i,l.__scopeId="data-v-c3020bc4";e["a"]=l},"5fbc":function(t,e,c){"use strict";c("7a87")},6461:function(t,e,c){"use strict";var a=c("7a23"),o={id:"delModal",ref:"delModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true"},n={class:"modal-dialog"},i={class:"border-0 modal-content"},l={class:"text-white modal-header bg-danger"},r={id:"delModalLabel",class:"modal-title"},d=Object(a["h"])("刪除"),s=Object(a["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),b={class:"modal-body"},u=Object(a["h"])(" 是否刪除 "),p={class:"text-danger"},j=Object(a["h"])(" 商品(刪除後將無法恢復)。 "),O={class:"modal-footer"},m=Object(a["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function f(t,e,c,f,v,g){return Object(a["w"])(),Object(a["e"])("div",o,[Object(a["i"])("div",n,[Object(a["i"])("div",i,[Object(a["i"])("div",l,[Object(a["i"])("h5",r,[Object(a["i"])("span",null,[d,Object(a["E"])(t.$slots,"default")])]),s]),Object(a["i"])("div",b,[u,Object(a["i"])("strong",p,Object(a["I"])(f.props.deleteItem.title),1),j]),Object(a["i"])("div",O,[m,Object(a["i"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(t){return f.emit("deleteItem",f.props.deleteItem.id)})}," 確認刪除 ")])])])],512)}var v=c("5530"),g=c("7c2b"),h=c.n(g);function y(){var t=Object(a["B"])(null),e=null,c=function(){e.show()},o=function(){e.hide()};return Object(a["t"])((function(){e=new h.a(t.value)})),{delModal:t,showDelModal:c,hideDelModal:o}}var w={props:{deleteItem:{type:Object,default:function(){return{}}}},emits:["deleteItem"],setup:function(t,e){var c=e.emit;return Object(v["a"])({props:t,emit:c},y())}};w.render=f;e["a"]=w},6917:function(t,e,c){"use strict";c("fb1d")},"7a87":function(t,e,c){},dac1:function(t,e,c){"use strict";c("244e")},dd87:function(t,e,c){"use strict";var a=c("7a23"),o=Object(a["U"])("data-v-79cc22fc");Object(a["z"])("data-v-79cc22fc");var n={"aria-label":"Page navigation example"},i={class:"pagination"},l=Object(a["i"])("span",{"aria-hidden":"true"},"«",-1),r=Object(a["i"])("span",{"aria-hidden":"true"},"»",-1);Object(a["x"])();var d=o((function(t,e,c,o,d,s){return Object(a["w"])(),Object(a["e"])("nav",n,[Object(a["i"])("ul",i,[Object(a["i"])("li",{class:["page-item",{disabled:!o.props.pagination.obj.has_pre}]},[Object(a["i"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[1]||(e[1]=Object(a["T"])((function(t){return o.emit("getNowpage",o.props.pagination.obj.current_page-1)}),["prevent"]))},[l])],2),(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(o.props.pagination.obj.total_pages,(function(t){return Object(a["w"])(),Object(a["e"])("li",{class:["page-item",{active:t===o.props.pagination.obj.current_page}],key:t},[Object(a["i"])("a",{class:"page-link",href:"#",onClick:Object(a["T"])((function(e){return o.emit("getNowpage",t)}),["prevent"])},Object(a["I"])(t),9,["onClick"])],2)})),128)),Object(a["i"])("li",{class:["page-item",{disabled:!o.props.pagination.obj.has_next}]},[Object(a["i"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[2]||(e[2]=Object(a["T"])((function(t){return o.emit("getNowpage",o.props.pagination.obj.current_page+1)}),["prevent"]))},[r])],2)])])})),s={props:{pagination:{type:Object,default:function(){return{}}},getProducts:{type:Function,default:function(){}}},emits:["getNowpage"],setup:function(t,e){var c=e.emit;return{props:t,emit:c}}};c("5fbc");s.render=d,s.__scopeId="data-v-79cc22fc";e["a"]=s},e4a8:function(t,e,c){"use strict";c("2f40")},fb1d:function(t,e,c){}}]);
//# sourceMappingURL=chunk-9bc4e762.5de00f08.js.map