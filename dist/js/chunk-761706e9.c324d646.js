(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-761706e9"],{2974:function(t,e,c){"use strict";c("fa51")},"31da":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),n=Object(o["T"])("data-v-52b600c2");Object(o["z"])("data-v-52b600c2");var i={class:"my-2"},a=Object(o["i"])("h2",{class:"fw-bold border-bottom border-3 border-orange pb-3 mb-3"}," 產品列表 ",-1),l={class:"text-end"},r={class:"table-responsive-lg"},u={class:"table mt-4 table-hover"},d=Object(o["i"])("thead",null,[Object(o["i"])("tr",null,[Object(o["i"])("th",{width:"120"},"分類"),Object(o["i"])("th",null,"產品名稱"),Object(o["i"])("th",{width:"100"},"原價"),Object(o["i"])("th",{width:"100"},"售價"),Object(o["i"])("th",{width:"100"},"是否啟用"),Object(o["i"])("th",{width:"120"},"編輯"),Object(o["i"])("th",{width:"120"},"刪除")])],-1),b={class:"text-center"},s={class:"text-center"},p={class:"text-center"},j={key:0,class:"text-success"},O={key:1,class:"text-secondary"},m=Object(o["h"])(" 編輯 "),f=Object(o["i"])("i",{class:"bi bi-pen-fill"},null,-1),g={class:"d-flex justify-content-center mt-5"},v=Object(o["h"])(" 產品 ");Object(o["x"])();var h=n((function(t,e,c,h,y,P){var w=Object(o["F"])("BaseLoading"),x=Object(o["F"])("BaseDelteButton"),M=Object(o["F"])("BasePagination"),k=Object(o["F"])("BaseProductModal"),U=Object(o["F"])("base-delete-modal");return Object(o["w"])(),Object(o["e"])(o["a"],null,[Object(o["i"])(w,{isLoading:h.isLoading},null,8,["isLoading"]),Object(o["i"])("div",i,[a,Object(o["i"])("div",l,[Object(o["i"])("button",{class:"btn btn-orange text-white",type:"button",onClick:e[1]||(e[1]=function(t){return h.openProductModal({},!0)})}," 新增商品 ")]),Object(o["i"])("div",r,[Object(o["i"])("table",u,[d,Object(o["i"])("tbody",null,[(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["D"])(h.products.arr,(function(t){return Object(o["w"])(),Object(o["e"])("tr",{key:t.id},[Object(o["i"])("td",null,Object(o["I"])(t.category),1),Object(o["i"])("td",null,Object(o["I"])(t.title),1),Object(o["i"])("td",b,Object(o["I"])(h.currency(t.origin_price)),1),Object(o["i"])("td",s,Object(o["I"])(h.currency(t.price)),1),Object(o["i"])("td",p,[t.is_enabled?(Object(o["w"])(),Object(o["e"])("span",j,"啟用")):(Object(o["w"])(),Object(o["e"])("span",O,"未啟用"))]),Object(o["i"])("td",null,[Object(o["i"])("button",{type:"button",class:"btn btn-orange btn-sm",onClick:function(e){return h.openProductModal(t,!1)}},[m,f],8,["onClick"])]),Object(o["i"])("td",null,[Object(o["i"])(x,{btnSmall:!0,onClick:function(e){return h.openDeleteModal(t)}},null,8,["onClick"])])])})),128))])])])]),Object(o["i"])("div",g,[Object(o["i"])(M,{pagination:h.pagination,onGetNowpage:h.getProducts},null,8,["pagination","onGetNowpage"])]),Object(o["i"])(k,{ref:"productModal",product:h.tempProduct,newProduct:h.newProduct,onProductStatus:h.productStatus},null,8,["product","newProduct","onProductStatus"]),Object(o["i"])(U,{ref:"productDeleteModal",deleteItem:h.tempProduct.obj,onDeleteItem:h.delProduct},{default:n((function(){return[v]})),_:1},8,["deleteItem","onDeleteItem"])],64)})),y=(c("ac1f"),c("5319"),c("99af"),c("241e")),P=c("dd87"),w=(c("a4d3"),c("e01a"),Object(o["T"])("data-v-d48e3f72"));Object(o["z"])("data-v-d48e3f72");var x={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},M={class:"modal-dialog modal-xl"},k={class:"modal-content border-0"},U={class:"modal-header bg-orange-600 text-white"},B={id:"productModalLabel",class:"modal-title"},S={key:0},_={key:1},D=Object(o["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),I={class:"modal-body"},C={class:"row"},A={class:"col-sm-4"},F={class:"mb-1"},L={class:"form-group my-2"},R=Object(o["i"])("label",{for:"imageUrl"},"輸入圖片網址",-1),V={class:"form-group my-2"},J=Object(o["i"])("label",{for:"fileInput"},"或上傳圖片",-1),N={key:0},$={key:1},z={key:2},T={class:"col-sm-8"},G={class:"form-group"},q=Object(o["i"])("label",{for:"title"},[Object(o["h"])("標題"),Object(o["i"])("span",{class:"text-danger"},"*")],-1),E={class:"row"},H={class:"form-group col-md-6"},K=Object(o["i"])("label",{for:"category"},[Object(o["h"])("分類"),Object(o["i"])("span",{class:"text-danger"},"*")],-1),Q={class:"form-group col-md-6"},W=Object(o["i"])("label",{for:"unit"},[Object(o["h"])("單位"),Object(o["i"])("span",{class:"text-danger"},"*")],-1),X={class:"row"},Y={class:"form-group col-md-6"},Z=Object(o["i"])("label",{for:"origin_price"},[Object(o["h"])("原價"),Object(o["i"])("span",{class:"text-danger"},"*")],-1),tt={class:"form-group col-md-6"},et=Object(o["i"])("label",{for:"price"},[Object(o["h"])("售價"),Object(o["i"])("span",{class:"text-danger"},"*")],-1),ct=Object(o["i"])("hr",null,null,-1),ot={class:"form-group"},nt=Object(o["i"])("label",{for:"description"},"產品描述",-1),it={class:"form-group"},at=Object(o["i"])("label",{for:"content"},"說明內容",-1),lt={class:"form-group"},rt={class:"form-check"},ut=Object(o["i"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),dt={class:"modal-footer"},bt=Object(o["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);Object(o["x"])();var st=w((function(t,e,c,n,i,a){return Object(o["w"])(),Object(o["e"])("div",x,[Object(o["i"])("div",M,[Object(o["i"])("div",k,[Object(o["i"])("div",U,[Object(o["i"])("h5",B,[c.newProduct?(Object(o["w"])(),Object(o["e"])("span",S,"新增產品")):(Object(o["w"])(),Object(o["e"])("span",_,"修改產品"))]),D]),Object(o["i"])("div",I,[Object(o["i"])("div",C,[Object(o["i"])("div",A,[Object(o["i"])("div",F,[Object(o["i"])("div",L,[R,Object(o["R"])(Object(o["i"])("input",{type:"text",id:"imageUrl",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.tempProduct.obj.imageUrl=t})},null,512),[[o["M"],n.tempProduct.obj.imageUrl]])]),Object(o["i"])("div",V,[J,Object(o["i"])("input",{type:"file",id:"fileInput",class:"form-control",ref:"fileInput",onChange:e[2]||(e[2]=function(){return n.uploadFile&&n.uploadFile.apply(n,arguments)})},null,544)]),Object(o["i"])("img",{class:"img-fluid",src:n.tempProduct.obj.imageUrl,alt:""},null,8,["src"])]),Array.isArray(n.tempProduct.obj.imagesUrl)?(Object(o["w"])(),Object(o["e"])("div",N,[Object(o["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=function(){return n.addPicture&&n.addPicture.apply(n,arguments)})}," 新增圖片 ")])):(Object(o["w"])(),Object(o["e"])("div",$,[Object(o["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[4]||(e[4]=function(){return n.newPicture&&n.newPicture.apply(n,arguments)})}," 新增圖片 ")])),Object(o["i"])("div",null,[Object(o["i"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[5]||(e[5]=function(){return n.delPicture&&n.delPicture.apply(n,arguments)})}," 刪除圖片 ")]),Array.isArray(n.tempProduct.obj.imagesUrl)?(Object(o["w"])(),Object(o["e"])("div",z,[(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["D"])(n.tempProduct.obj.imagesUrl,(function(t){return Object(o["w"])(),Object(o["e"])("img",{class:"img-fluid my-2",key:t,src:t,alt:""},null,8,["src"])})),128))])):Object(o["f"])("",!0)]),Object(o["i"])("div",T,[Object(o["i"])("div",G,[q,Object(o["R"])(Object(o["i"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.obj.title=t})},null,512),[[o["M"],n.tempProduct.obj.title]])]),Object(o["i"])("div",E,[Object(o["i"])("div",H,[K,Object(o["R"])(Object(o["i"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.obj.category=t})},null,512),[[o["M"],n.tempProduct.obj.category]])]),Object(o["i"])("div",Q,[W,Object(o["R"])(Object(o["i"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.obj.unit=t})},null,512),[[o["M"],n.tempProduct.obj.unit]])])]),Object(o["i"])("div",X,[Object(o["i"])("div",Y,[Z,Object(o["R"])(Object(o["i"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.obj.origin_price=t})},null,512),[[o["M"],n.tempProduct.obj.origin_price,void 0,{number:!0}]])]),Object(o["i"])("div",tt,[et,Object(o["R"])(Object(o["i"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[10]||(e[10]=function(t){return n.tempProduct.obj.price=t})},null,512),[[o["M"],n.tempProduct.obj.price,void 0,{number:!0}]])])]),ct,Object(o["i"])("div",ot,[nt,Object(o["R"])(Object(o["i"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[11]||(e[11]=function(t){return n.tempProduct.obj.description=t})},"\n                ",512),[[o["M"],n.tempProduct.obj.description]])]),Object(o["i"])("div",it,[at,Object(o["R"])(Object(o["i"])("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[12]||(e[12]=function(t){return n.tempProduct.obj.content=t})},"\n                ",512),[[o["M"],n.tempProduct.obj.content]])]),Object(o["i"])("div",lt,[Object(o["i"])("div",rt,[Object(o["R"])(Object(o["i"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[13]||(e[13]=function(t){return n.tempProduct.obj.is_enabled=t})},null,512),[[o["L"],n.tempProduct.obj.is_enabled,void 0,{number:!0}]]),ut])])])])]),Object(o["i"])("div",dt,[bt,Object(o["i"])("button",{type:"button",class:"btn btn-orange",onClick:e[14]||(e[14]=function(t){return n.emit("productStatus",n.tempProduct.obj)})}," 確認 ")])])])],512)})),pt=c("bc3a"),jt=c.n(pt),Ot=c("7c2b"),mt=c.n(Ot),ft={props:{product:{type:Object,default:function(){return{}}},newProduct:{type:Boolean,default:function(){return!0}}},setup:function(t,e){var c=e.emit,n=Object(o["A"])({obj:{}}),i=Object(o["B"])(null),a=Object(o["B"])(null),l=[];function r(){l.show()}function u(){l.hide()}function d(){n.obj.imagesUrl=[],n.obj.imagesUrl.push(n.obj.imageUrl),n.obj.imageUrl=""}function b(){n.obj.imagesUrl.push(n.obj.imageUrl),n.obj.imageUrl=""}function s(){n.obj.imagesUrl.pop()}function p(){var t=a.value.files[0],e=new FormData;e.append("file-to-upload",t);var c="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/upload");jt.a.post(c,e).then((function(t){console.log(t),t.data.success&&(n.obj.imageUrl=t.data.imageUrl)})).catch((function(t){console.log(t)}))}return Object(o["P"])((function(){return t.product.obj}),(function(){n.obj=t.product.obj})),Object(o["t"])((function(){l=new mt.a(i.value),console.log(i)})),{productModal:i,fileInput:a,tempProduct:n,emit:c,newPicture:d,showProductModal:r,hideProductModal:u,addPicture:b,delPicture:s,uploadFile:p}}};c("2974");ft.render=st,ft.__scopeId="data-v-d48e3f72";var gt=ft,vt=c("6461"),ht=c("5d10"),yt=c("2d24"),Pt=c("1336"),wt={components:{BaseDelteButton:y["a"],BasePagination:P["a"],BaseProductModal:gt,BaseDeleteModal:vt["a"],BaseLoading:ht["a"]},setup:function(){var t=Object(o["A"])({arr:[]}),e=Object(o["A"])({obj:{}}),c=Object(o["B"])(null),n=Object(o["B"])(null),i=Object(o["B"])(!1),a=Object(o["A"])({obj:{imagesUrl:[]}}),l=Object(yt["a"])(),r=Object(o["B"])(!1);function u(t,e){l.fire({icon:"success",title:t,text:e})}function d(t,e){l.fire({icon:"error",title:t,text:e})}function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r.value=!0;var o=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/products?page=").concat(c);jt.a.defaults.headers.common.Authorization="".concat(o),jt.a.get(n).then((function(c){console.log("produts",c),c.data.success&&(t.arr=c.data.products,e.obj=c.data.pagination,r.value=!1)})).catch((function(t){console.log(t)}))}function s(t){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/product/").concat(t);jt.a.delete(e).then((function(t){t.data.success&&(b(),u("刪除","刪除商品成功!")),console.log("delete",t)})).catch((function(t){console.log(t)})),n.value.hideDelModal()}function p(t,e){a.obj=JSON.parse(JSON.stringify(t)),i.value=e,c.value.showProductModal()}function j(t){a.obj=JSON.parse(JSON.stringify(t)),n.value.showDelModal()}function O(t){a.obj=t;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/product"),o="post";i.value||(e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/product/").concat(t.id),o="put"),jt.a[o](e,{data:a.obj}).then((function(t){t.data.success?(b(),u(i.value?"新增":"修改",i.value?"新增商品成功!":"修改商品成功!")):d("Oops...",t.data.message),c.value.hideProductModal(),console.log(t)})).catch((function(t){console.log(t)}))}return Object(o["t"])((function(){b()})),{products:t,pagination:e,productModal:c,productDeleteModal:n,newProduct:i,tempProduct:a,isLoading:r,delProduct:s,getProducts:b,openProductModal:p,openDeleteModal:j,productStatus:O,currency:Pt["a"]}}};wt.render=h,wt.__scopeId="data-v-52b600c2";e["default"]=wt},e01a:function(t,e,c){"use strict";var o=c("23e7"),n=c("83ab"),i=c("da84"),a=c("5135"),l=c("861d"),r=c("9bf2").f,u=c("e893"),d=i.Symbol;if(n&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var b={},s=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof s?new d(t):void 0===t?d():d(t);return""===t&&(b[e]=!0),e};u(s,d);var p=s.prototype=d.prototype;p.constructor=s;var j=p.toString,O="Symbol(test)"==String(d("test")),m=/^Symbol\((.*)\)[^)]+$/;r(p,"description",{configurable:!0,get:function(){var t=l(this)?this.valueOf():this,e=j.call(t);if(a(b,t))return"";var c=O?e.slice(7,-1):e.replace(m,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:s})}},fa51:function(t,e,c){}}]);
//# sourceMappingURL=chunk-761706e9.c324d646.js.map