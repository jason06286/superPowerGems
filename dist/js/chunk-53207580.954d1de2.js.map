{"version":3,"sources":["webpack:///./src/views/frontDesk/FrontDeskPay.vue?cf35","webpack:///./src/views/frontDesk/FrontDeskPay.vue","webpack:///./src/views/frontDesk/FrontDeskPay.vue?3156","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","style","scope","width","colspan","role","order","arr","is_paid","products","item","key","id","product","title","qty","currency","final_total","total","user","email","name","tel","address","type","to","isLoading","confirmPay","setup","route","router","time","getOrder","url","params","a","get","then","res","data","success","console","error","Error","message","catch","err","value","post","setTimeout","push","clearTimeout","render","__scopeId","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","this","match"],"mappings":"2IAAA,W,iJC+EE,eAAgD,OAA3CA,MAAM,UAAUC,MAAA,iB,YAChBD,MAAM,qBAAqBC,MAAA,sC,GACzBD,MAAM,Q,SACJA,MAAM,c,EACT,eAAqB,SAAlB,kBAAc,G,EAEnB,eAAoE,MAAhEA,MAAM,kDAAiD,QAAI,G,GACxDA,MAAM,yC,EACX,eAMQ,cALN,eAIK,MAJDA,MAAM,cAAY,CACpB,eAAyB,MAArBE,MAAM,OAAM,QAChB,eAAmC,MAA/BA,MAAM,MAAMC,MAAM,OAAM,MAC5B,eAAwC,MAApCD,MAAM,MAAMF,MAAM,YAAW,U,MAK7BA,MAAM,gB,GAGNA,MAAM,gB,GAGNA,MAAM,yB,EAOV,eAAyC,MAArCI,QAAQ,IAAIJ,MAAM,YAAW,OAAG,G,GAChCA,MAAM,Y,EAIhB,eAAoE,MAAhEA,MAAM,kDAAiD,QAAI,G,SACxDA,MAAM,S,GACJA,MAAM,kB,EAET,eAAqD,MAAjDE,MAAM,MAAMF,MAAM,sBAAqB,SAAK,G,EAIhD,eAAqD,MAAjDE,MAAM,MAAMF,MAAM,sBAAqB,SAAK,G,EAIhD,eAAqD,MAAjDE,MAAM,MAAMF,MAAM,sBAAqB,SAAK,G,EAIhD,eAAqD,MAAjDE,MAAM,MAAMF,MAAM,sBAAqB,SAAK,G,EAIhD,eAAoD,MAAhDE,MAAM,MAAMF,MAAM,sBAAqB,QAAI,G,EAI/C,eAAoD,MAAhDE,MAAM,MAAMF,MAAM,sBAAqB,QAAI,G,SAC3CA,MAAM,gB,SACNA,MAAM,e,SAIXA,MAAM,8B,iBAKN,Q,SASCA,MAAM,yCACNK,KAAK,U,EAGL,eAA+C,QAAzCL,MAAM,mBAAkB,cAAU,G,iBACpC,U,wIApFd,EACA,eAwFM,MAxFN,EAwFM,CAvFJ,eAsFM,MAtFN,EAsFM,CArF0B,EAAAM,MAAMC,IAAIC,S,iBAAxC,eAEM,MAFN,EAEM,CADJ,K,sBAEF,EACA,eA2BQ,QA3BR,EA2BQ,CA1BN,EAOA,eAYQ,e,mBAXN,eAUK,2BAVc,EAAAF,MAAMC,IAAIE,UAAQ,SAA1BC,G,wBAAX,eAUK,MAVmCC,IAAKD,EAAKE,I,CAChD,eAEK,KAFL,EAEK,eADAF,EAAKG,QAAQC,OAAK,GAEvB,eAEK,KAFL,EAEK,eADAJ,EAAKK,KAAG,GAEb,eAEK,KAFL,EAAkC,MAC9B,eAAG,EAAAC,SAASN,EAAKO,cAAW,Q,QAIpC,eAKQ,cAJN,eAGK,WAFH,EACA,eAA2D,KAA3D,EAAqB,KAAE,eAAG,EAAAD,SAAS,EAAAV,MAAMC,IAAIW,QAAK,SAIxD,EAC2B,EAAAZ,MAAMC,IAAIY,M,iBAArC,eA4BQ,QA5BR,EA4BQ,CA3BN,eA0BQ,QA1BR,EA0BQ,CAzBN,eAGK,WAFH,EACA,eAAmC,yBAA5B,EAAAb,MAAMC,IAAIY,KAAKC,OAAK,KAE7B,eAGK,WAFH,EACA,eAAkC,yBAA3B,EAAAd,MAAMC,IAAIY,KAAKE,MAAI,KAE5B,eAGK,WAFH,EACA,eAAiC,yBAA1B,EAAAf,MAAMC,IAAIY,KAAKG,KAAG,KAE3B,eAGK,WAFH,EACA,eAAqC,yBAA9B,EAAAhB,MAAMC,IAAIY,KAAKI,SAAO,KAE/B,eAGK,WAFH,EACA,eAA2B,yBAApB,EAAAjB,MAAMC,IAAIK,IAAE,KAErB,eAIK,WAHH,EAC+B,EAAAN,MAAMC,IAAIC,S,iBAAzC,eAA0D,KAA1D,EAAkD,S,iBAClD,eAAuC,KAAvC,EAA+B,e,sBAIU,EAAAF,MAAMC,IAAIC,Q,wCAAzD,eAsBM,MAtBN,EAsBM,CArBJ,eAKC,GAJCgB,KAAK,SACLxB,MAAM,yBACNyB,GAAG,uB,YACF,iBAAI,C,YAEP,eAcS,UAbPzB,MAAK,CAAC,kBAAiB,UAEM,QAAT,EAAA0B,YADpBF,KAAK,SAEJ,QAAK,8BAAE,EAAAG,YAAA,EAAAA,WAAA,sB,CAKS,QAAT,EAAAD,W,iBAHR,eAMM,MANN,EAMM,CADJ,K,oGA1JG,GACbE,MADa,WAEX,IAAMC,EAAQ,iBACRC,EAAS,iBACTxB,EAAQ,eAAS,CAAEC,IAAK,KACxBmB,EAAY,eAAI,IAClBK,EAAO,KAEX,SAASC,IACP,IAAMC,EAAE,UAAO,wCAAP,eAAqC,YAArC,kBAAuEJ,EAAMK,OAAOtB,IAC5F,EAAAuB,EACGC,IAAIH,GACJI,MAAK,SAACC,GACDA,EAAIC,KAAKC,QACXlC,EAAMC,IAAM+B,EAAIC,KAAKjC,MAErBmC,QAAQC,MAAQ,WACd,MAAM,IAAIC,MAAML,EAAIC,KAAKK,aAI9BC,OAAM,SAACC,GACNL,QAAQC,MAAQ,WACd,MAAM,IAAIC,MAAMG,OAIxB,SAASnB,IACPD,EAAUqB,MAAQ,MAClB,IAAMd,EAAE,UAAO,wCAAP,eAAqC,YAArC,gBAAqEJ,EAAMK,OAAOtB,IAC1F,EAAAuB,EACGa,KAAKf,GACLI,MAAK,SAACC,GACDA,EAAIC,KAAKC,SACXR,IACAD,EAAOkB,YAAW,WAChBnB,EAAOoB,KAAK,yBACX,MAEHT,QAAQC,MAAQ,WACd,MAAM,IAAIC,MAAML,EAAIC,KAAKK,UAG7BlB,EAAUqB,MAAQ,MAEnBF,OAAM,SAACC,GACNL,QAAQC,MAAQ,WACd,MAAM,IAAIC,MAAMG,OAaxB,OARA,gBAAU,WACRd,OAGF,gBAAY,WACVmB,aAAapB,MAGR,CACLzB,QACAoB,YACAV,SAAA,OACAW,gB,UCnEN,EAAOyB,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,qBCRf,IAAIC,EAAc,EAAQ,QACtBC,EAAiB,EAAQ,QAAuCC,EAEhEC,EAAoBC,SAASC,UAC7BC,EAA4BH,EAAkBI,SAC9CC,EAAS,wBACTC,EAAO,OAIPT,KAAiBS,KAAQN,IAC3BF,EAAeE,EAAmBM,EAAM,CACtCC,cAAc,EACd5B,IAAK,WACH,IACE,OAAOwB,EAA0BK,KAAKC,MAAMC,MAAML,GAAQ,GAC1D,MAAOpB,GACP,MAAO","file":"js/chunk-53207580.954d1de2.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FrontDeskPay.vue?vue&type=style&index=0&id=ea4fb160&lang=scss&scoped=true\"","<script>\nimport axios from 'axios';\nimport { currency } from '@/methods/filter';\nimport {\n  onMounted, onUnmounted, reactive, ref,\n} from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\n\nexport default {\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    const order = reactive({ arr: [] });\n    const isLoading = ref('');\n    let time = null;\n\n    function getOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${route.params.id}`;\n      axios\n        .get(url)\n        .then((res) => {\n          if (res.data.success) {\n            order.arr = res.data.order;\n          } else {\n            console.error = () => {\n              throw new Error(res.data.message);\n            };\n          }\n        })\n        .catch((err) => {\n          console.error = () => {\n            throw new Error(err);\n          };\n        });\n    }\n    function confirmPay() {\n      isLoading.value = 'pay';\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${route.params.id}`;\n      axios\n        .post(url)\n        .then((res) => {\n          if (res.data.success) {\n            getOrder();\n            time = setTimeout(() => {\n              router.push('/frontDesk/products');\n            }, 3000);\n          } else {\n            console.error = () => {\n              throw new Error(res.data.message);\n            };\n          }\n          isLoading.value = '';\n        })\n        .catch((err) => {\n          console.error = () => {\n            throw new Error(err);\n          };\n        });\n    }\n\n    onMounted(() => {\n      getOrder();\n    });\n\n    onUnmounted(() => {\n      clearTimeout(time);\n    });\n\n    return {\n      order,\n      isLoading,\n      currency,\n      confirmPay,\n    };\n  },\n};\n</script>\n\n<template>\n  <div class=\"bg-dark\" style=\"height: 68px\"></div>\n  <div class=\"container bg-white\" style=\"min-height: calc(100vh - 212px)\">\n    <div class=\"py-5\">\n      <div class=\"paySuccess\" v-if=\"order.arr.is_paid\">\n        <p>已完成付款，感謝您的訂購!!</p>\n      </div>\n      <h2 class=\"pb-2 mb-3 border-3 border-bottom border-orange\">訂單明細</h2>\n      <table class=\"table text-center table-responsive-lg\">\n        <thead>\n          <tr class=\"table-dark\">\n            <th scope=\"col\">商品名稱</th>\n            <th scope=\"col\" width=\"120\">數量</th>\n            <th scope=\"col\" class=\"text-end\">小計</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"item in order.arr.products\" :key=\"item.id\">\n            <td class=\"align-middle\">\n              {{ item.product.title }}\n            </td>\n            <td class=\"align-middle\">\n              {{ item.qty }}\n            </td>\n            <td class=\"align-middle text-end\">\n              $ {{ currency(item.final_total) }}\n            </td>\n          </tr>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td colspan=\"2\" class=\"text-end\">總金額</td>\n            <td class=\"text-end\">$ {{ currency(order.arr.total) }}</td>\n          </tr>\n        </tfoot>\n      </table>\n      <h2 class=\"pb-2 mb-3 border-3 border-bottom border-orange\">訂單資訊</h2>\n      <table class=\"table\" v-if=\"order.arr.user\">\n        <tbody class=\"text-secondary\">\n          <tr>\n            <th scope=\"row\" class=\"font-weight-normal\">Email</th>\n            <td>{{ order.arr.user.email }}</td>\n          </tr>\n          <tr>\n            <th scope=\"row\" class=\"font-weight-normal\">收件人名稱</th>\n            <td>{{ order.arr.user.name }}</td>\n          </tr>\n          <tr>\n            <th scope=\"row\" class=\"font-weight-normal\">收件人電話</th>\n            <td>{{ order.arr.user.tel }}</td>\n          </tr>\n          <tr>\n            <th scope=\"row\" class=\"font-weight-normal\">收件人地址</th>\n            <td>{{ order.arr.user.address }}</td>\n          </tr>\n          <tr>\n            <th scope=\"row\" class=\"font-weight-normal\">訂單編號</th>\n            <td>{{ order.arr.id }}</td>\n          </tr>\n          <tr>\n            <th scope=\"row\" class=\"font-weight-normal\">付款狀態</th>\n            <td class=\"text-success\" v-if=\"order.arr.is_paid\">已付款</td>\n            <td class=\"text-danger\" v-else>未付款</td>\n          </tr>\n        </tbody>\n      </table>\n      <div class=\"d-flex justify-content-end\" v-if=\"!order.arr.is_paid\">\n        <router-link\n          type=\"button\"\n          class=\"btn btn-secondary me-3\"\n          to=\"/frontDesk/products\"\n          >繼續購物</router-link\n        >\n        <button\n          class=\"btn btn-primary\"\n          type=\"button\"\n          :class=\"{ disabled: isLoading === 'pay' }\"\n          @click=\"confirmPay\"\n        >\n          <div\n            class=\"spinner-grow text-dark spinner-grow-sm\"\n            role=\"status\"\n            v-if=\"isLoading === 'pay'\"\n          >\n            <span class=\"visually-hidden\">Loading...</span>\n          </div>\n          確認付款\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.title {\n  border-bottom: 3px solid #fd7e14;\n  padding-bottom: 0.5rem;\n  margin-bottom: 1rem;\n  display: inline-block;\n}\n.paySuccess {\n  background: url('https://storage.googleapis.com/vue-course-api.appspot.com/supergems/1625923805243.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=QCe%2FqgI2d5XTZHjvkN%2Fhd1peg5KJIGtivFy0NFNrVnIyBx5pEK4zkNFreR%2BKDa3%2FTaXKVNj3xmgQ1QVwkbQsS%2FszXmw7Uq6JkeEl902mGmdUg9cbk%2BA%2FeJMRhs3HeFCSIC7PGawnsjDOAUjKk4pzQy8%2FFK5GyHfY603hZmDlgaeWl7a8ViJGCfw6mN2X1gccrH3aXKTR6QvsfbONrDg7RqOS8y1hhqw4HRrEjT704wOIh5RXsZLo86Ik8gtOnJM8lHr8D2OyNpQU9sU%2FxExHgxQkwK9%2B6BwK1ok9FT9oDVUpzB4yEo%2FbIrWmTTFNneEGn%2BaRAyPYqyBzknbIhjotPw%3D%3D');\n  background-size: cover;\n  background-position: center bottom;\n  height: 300px;\n  margin-bottom: 1rem;\n  position: relative;\n  border-radius: 1rem;\n  overflow: hidden;\n  p {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    margin-bottom: 0;\n    color: #fd7e14;\n    font-size: 1.2rem;\n    background: rgba(0, 0, 0, 0.5);\n    @media (min-width: 576px) {\n      font-size: 1.5rem;\n    }\n  }\n}\n</style>\n","import { render } from \"./FrontDeskPay.vue?vue&type=template&id=ea4fb160&scoped=true\"\nimport script from \"./FrontDeskPay.vue?vue&type=script&lang=js\"\nexport * from \"./FrontDeskPay.vue?vue&type=script&lang=js\"\n\nimport \"./FrontDeskPay.vue?vue&type=style&index=0&id=ea4fb160&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-ea4fb160\"\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}