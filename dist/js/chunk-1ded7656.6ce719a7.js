(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ded7656"],{"0cb5":function(e,t,c){},4438:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),n=Object(a["U"])("data-v-d3d521a4");Object(a["z"])("data-v-d3d521a4");var s={class:"container"},o={class:"py-5"},r=Object(a["i"])("h2",{class:"pb-2 mb-3 border-3 border-bottom border-orange"},"購屋車內容",-1),l={key:0,class:"cart-content"},i=Object(a["i"])("p",{class:"mb-0 fs-5"},"購物車內無東西",-1),u=Object(a["h"])("選購商品"),b={key:1,class:"table text-center table-responsive-lg"},d=Object(a["i"])("thead",null,[Object(a["i"])("tr",{class:"table-dark"},[Object(a["i"])("th",{scope:"col"}),Object(a["i"])("th",{scope:"col"},"商品名稱"),Object(a["i"])("th",{scope:"col",width:"120"},"數量"),Object(a["i"])("th",{scope:"col",class:"text-end"},"小計")])],-1),p={key:0,class:"btn btn-outline-danger btn-sm",type:"button",disabled:""},j=Object(a["i"])("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),O=Object(a["i"])("span",{class:"visually-hidden"},"Loading...",-1),m=Object(a["i"])("i",{class:"bi bi-trash-fill"},null,-1),f={class:"align-middle"},h={class:"align-middle"},v={class:"input-group input-group-sm"},g={class:"align-middle text-end"},y={class:"text-danger"},k=Object(a["i"])("td",{colspan:"3",class:"text-end"},"折扣優惠",-1),x={class:"line-through text-end"},w=Object(a["i"])("td",{colspan:"3",class:"text-end"},"總金額",-1),V={class:"text-end"},C={key:2,class:"mb-3 input-group"},q=Object(a["i"])("h2",{class:"pb-2 mb-3 border-3 border-bottom border-orange"},[Object(a["h"])(" 收件人資訊"),Object(a["i"])("span",{class:"text-danger fs-4 ms-2"},"(必填)")],-1),S={class:"mb-3 form-group"},U=Object(a["i"])("label",{for:"name",class:"mb-2"},"聯絡人",-1),_={class:"mb-3 form-group"},F=Object(a["i"])("label",{for:"email",class:"mb-2"},"信箱",-1),Q={class:"mb-3 form-group"},I=Object(a["i"])("label",{for:"tel",class:"mb-2"},"電話",-1),B=Object(a["i"])("h2",{class:"pb-2 mb-3 border-3 border-bottom border-orange"},[Object(a["h"])(" 配送資訊"),Object(a["i"])("span",{class:"text-danger fs-4 ms-2"},"(必填)")],-1),D={class:"mb-3 form-group"},L=Object(a["i"])("label",{for:"address",class:"mb-2"},"地址",-1),P={class:"mb-3 form-group"},$=Object(a["i"])("h4",{class:"pb-2 mb-3 border-3 border-bottom border-orange"},[Object(a["h"])(" 留言"),Object(a["i"])("span",{class:"text-secondary fs-5 ms-2"},"(選填)")],-1),N=Object(a["i"])("label",{for:"message",class:"mb-2"},"留言",-1),A={class:"d-flex justify-content-end"},J=Object(a["h"])("繼續購物"),z={class:"btn btn-orange",type:"submit"},E={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},M=Object(a["h"])(" 送出訂單 ");Object(a["x"])();var G=n((function(e,t,c,G,H,K){var R,T,W,X,Y=Object(a["F"])("router-link"),Z=Object(a["F"])("Field"),ee=Object(a["F"])("ErrorMessage"),te=Object(a["F"])("Form");return Object(a["w"])(),Object(a["e"])("div",s,[Object(a["i"])("div",o,[r,0===(null===(R=G.carts.arr)||void 0===R||null===(T=R.carts)||void 0===T?void 0:T.length)?(Object(a["w"])(),Object(a["e"])("div",l,[i,Object(a["i"])(Y,{to:"/frontDesk/products",class:"d-block text-orange fs-4"},{default:n((function(){return[u]})),_:1})])):(Object(a["w"])(),Object(a["e"])("table",b,[d,Object(a["i"])("tbody",null,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(G.carts.arr.carts,(function(e){return Object(a["w"])(),Object(a["e"])("tr",{key:e.id},[Object(a["i"])("td",null,[G.isLoading===e.id?(Object(a["w"])(),Object(a["e"])("button",p,[j,O])):(Object(a["w"])(),Object(a["e"])("button",{key:1,type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return G.delProduct(e)}},[m],8,["onClick"]))]),Object(a["i"])("td",f,Object(a["I"])(e.product.title),1),Object(a["i"])("td",h,[Object(a["i"])("div",v,[Object(a["i"])("button",{class:["btn btn-outline-secondary",{disabled:G.isChageQty}],type:"button",onClick:function(t){return G.addQty(e)}}," + ",10,["onClick"]),Object(a["S"])(Object(a["i"])("input",{type:"number",class:"text-center form-control",min:"1",disabled:"","onUpdate:modelValue":function(t){return e.qty=t}},null,8,["onUpdate:modelValue"]),[[a["N"],e.qty,void 0,{number:!0}]]),Object(a["i"])("button",{class:["btn btn-outline-secondary",{disabled:e.qty<=1||G.isChageQty}],type:"button",onClick:function(t){return G.minusQty(e)}}," - ",10,["onClick"])])]),Object(a["i"])("td",g,"$ "+Object(a["I"])(G.currency(e.total)),1)])})),128))]),Object(a["i"])("tfoot",null,[Object(a["S"])(Object(a["i"])("tr",y,[k,Object(a["i"])("td",x," $ "+Object(a["I"])(G.currency(G.carts.arr.total-G.carts.arr.final_total)),1)],512),[[a["O"],G.carts.arr.total>G.carts.arr.final_total]]),Object(a["i"])("tr",null,[w,Object(a["i"])("td",V,"$ "+Object(a["I"])(G.currency(G.carts.arr.final_total)),1)])])])),0!=(null===(W=G.carts.arr)||void 0===W||null===(X=W.carts)||void 0===X?void 0:X.length)?(Object(a["w"])(),Object(a["e"])("div",C,[Object(a["S"])(Object(a["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠券代碼","aria-label":"請輸入優惠券代碼","aria-describedby":"button-addon2","onUpdate:modelValue":t[1]||(t[1]=function(e){return G.coupon=e})},null,512),[[a["N"],G.coupon]]),Object(a["i"])("button",{class:["btn btn-outline-secondary",{disabled:""===G.coupon}],type:"button",id:"button-addon2",onClick:t[2]||(t[2]=function(){return G.useCoupon&&G.useCoupon.apply(G,arguments)})}," 套用優惠券 ",2)])):Object(a["f"])("",!0),q,Object(a["i"])(te,{onSubmit:G.onSubmit},{default:n((function(e){var c=e.errors;return[Object(a["i"])("div",S,[U,Object(a["i"])(Z,{id:"name",name:"聯絡人",type:"text",class:["form-control",{"is-invalid":c["聯絡人"]}],placeholder:"請輸入聯絡人",rules:"required",modelValue:G.user.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return G.user.user.name=e})},null,8,["class","modelValue"]),Object(a["i"])(ee,{name:"聯絡人",class:"invalid-feedback"})]),Object(a["i"])("div",_,[F,Object(a["i"])(Z,{id:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":c["信箱"]}],placeholder:"請輸入信箱",rules:"email|required",modelValue:G.user.user.email,"onUpdate:modelValue":t[4]||(t[4]=function(e){return G.user.user.email=e})},null,8,["class","modelValue"]),Object(a["i"])(ee,{name:"信箱",class:"invalid-feedback"})]),Object(a["i"])("div",Q,[I,Object(a["i"])(Z,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入 tel",rules:G.isPhone,modelValue:G.user.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return G.user.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["i"])(ee,{name:"電話",class:"invalid-feedback"})]),B,Object(a["i"])("div",D,[L,Object(a["i"])(Z,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:G.user.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return G.user.user.address=e})},null,8,["class","modelValue"]),Object(a["i"])(ee,{name:"地址",class:"invalid-feedback"})]),Object(a["i"])("div",P,[$,N,Object(a["S"])(Object(a["i"])("textarea",{class:"form-control",id:"message",placeholder:"有什麼話想對我們說呢?",rows:"3","onUpdate:modelValue":t[7]||(t[7]=function(e){return G.message=e})},null,512),[[a["N"],G.message]])]),Object(a["i"])("div",A,[Object(a["i"])(Y,{type:"button",class:"btn btn-secondary me-3",to:"/frontDesk/products"},{default:n((function(){return[J]})),_:1}),Object(a["i"])("button",z,["submit"===G.isLoading?(Object(a["w"])(),Object(a["e"])("span",E)):Object(a["f"])("",!0),M])])]})),_:1},8,["onSubmit"])])])})),H=(c("99af"),c("bc3a")),K=c.n(H),R=c("1336"),T=c("cfb9"),W=c("98e4"),X=c("6c02"),Y={setup:function(){var e=Object(X["d"])(),t=Object(a["A"])({arr:[]}),c=Object(a["B"])(""),n=Object(a["B"])(!1),s=Object(a["A"])({user:{}}),o=Object(a["B"])(""),r=Object(a["B"])("");function l(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart");K.a.get(e).then((function(e){e.data.success&&(t.arr=e.data.data)})).catch((function(e){console.log(e)}))}function i(e){r.value=e.id;var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(e.id);K.a.delete(t).then((function(e){e.data.success&&(T["a"].emit("update-cart"),l(),r.value=""),Object(W["a"])(e,"刪除商品")})).catch((function(e){console.log(e)}))}function u(e,t){n.value=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/cart/").concat(t);K.a.put(c,{data:{product_id:t,qty:e}}).then((function(e){e.data.success&&(n.value=!1,T["a"].emit("update-cart"),l()),Object(W["a"])(e,"修改商品")})).catch((function(e){console.log(e)}))}function b(e){var t=e.qty+1;u(t,e.id)}function d(e){var t=e.qty-1;u(t,e.id)}function p(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/coupon");K.a.post(e,{data:{code:c.value}}).then((function(e){e.data.success&&(T["a"].emit("update-cart"),l()),Object(W["a"])(e,"套用優惠券")})).catch((function(e){console.log(e)}))}function j(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"}function O(){r.value="submit";var t="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/order");K.a.post(t,{data:{user:s.user,message:o.value}}).then((function(t){r.value="",t.data.success&&(e.push("/frontDesk/pay/".concat(t.data.orderId)),T["a"].emit("update-cart"))})).catch((function(e){console.log(e)}))}return Object(a["t"])((function(){l()})),{carts:t,coupon:c,isChageQty:n,user:s,message:o,isLoading:r,currency:R["a"],delProduct:i,addQty:b,minusQty:d,useCoupon:p,isPhone:j,onSubmit:O}}};c("add1");Y.render=G,Y.__scopeId="data-v-d3d521a4";t["default"]=Y},add1:function(e,t,c){"use strict";c("0cb5")},b0c0:function(e,t,c){var a=c("83ab"),n=c("9bf2").f,s=Function.prototype,o=s.toString,r=/^\s*function ([^ (]*)/,l="name";a&&!(l in s)&&n(s,l,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-1ded7656.6ce719a7.js.map