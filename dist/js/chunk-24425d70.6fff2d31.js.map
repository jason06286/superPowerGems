{"version":3,"sources":["webpack:///./src/components/BaseCartModal.vue?8dfa","webpack:///./src/views/frontDesk/FrontDesk.vue","webpack:///./src/components/BaseCartModal.vue","webpack:///./src/components/BaseCartModal.vue?3d7b","webpack:///./src/views/frontDesk/FrontDesk.vue?b6ab"],"names":["class","tabindex","ref","type","data-bs-dismiss","aria-label","scope","width","disabled","role","aria-hidden","colspan","showModal","carts","arr","length","to","hideModal","item","key","id","src","product","imageUrl","alt","description","style","title","qty","currency","total","isLoading","delProduct","final_total","placeholder","aria-describedby","coupon","useCoupon","payment","components","BaseScrollTop","setup","modalDetail","router","cartModal","modal","show","hide","push","value","cartDetail","getCarts","api","res","data","success","pushMessageState","emitter","emit","code","on","render","__scopeId","BaseNavbar","BaseFooter","BaseCartModal","ToastMessages"],"mappings":"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","file":"js/chunk-24425d70.6fff2d31.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BaseCartModal.vue?vue&type=style&index=0&id=18316cb7&lang=scss&scoped=true\"","<script>\nimport BaseNavbar from '@/components/BaseNavbar.vue';\nimport BaseFooter from '@/components/BaseFooter.vue';\nimport BaseCartModal from '@/components/BaseCartModal.vue';\nimport ToastMessages from '@/components/ToastMessages.vue';\n\nexport default {\n  components: {\n    BaseNavbar,\n    BaseFooter,\n    BaseCartModal,\n    ToastMessages,\n  },\n};\n</script>\n\n<template>\n  <ToastMessages />\n  <BaseNavbar />\n  <Router-View />\n  <BaseFooter />\n  <BaseCartModal />\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","<script>\nimport BaseScrollTop from '@/components/BaseScrollTop.vue';\n\nimport Modal from 'bootstrap/js/dist/modal';\n\nimport {\n  apiUserGetCarts,\n  apiUserDelProduct,\n  apiUserUseCoupon,\n} from '@/api/api';\nimport { currency } from '@/methods/filter';\nimport emitter from '@/methods/emitter';\nimport pushMessageState from '@/methods/pushMessageState';\n\nimport { onMounted, reactive, ref } from 'vue';\nimport { useRouter } from 'vue-router';\n\nexport default {\n  components: {\n    BaseScrollTop,\n  },\n  setup() {\n    function modalDetail() {\n      const router = useRouter();\n      const cartModal = ref(null);\n      let modal = null;\n\n      const showModal = () => {\n        modal.show();\n      };\n      const hideModal = () => {\n        modal.hide();\n      };\n      const payment = () => {\n        hideModal();\n        router.push('/frontDesk/carts');\n      };\n\n      onMounted(() => {\n        modal = new Modal(cartModal.value);\n      });\n\n      return {\n        cartModal,\n        showModal,\n        hideModal,\n        payment,\n      };\n    }\n    function cartDetail() {\n      const carts = reactive({ arr: [] });\n      const coupon = ref('');\n      const isLoading = ref('');\n\n      async function getCarts() {\n        try {\n          const res = await apiUserGetCarts();\n          if (res.data.success) {\n            carts.arr = res.data.data;\n          } else {\n            pushMessageState(res, '取得購物車');\n          }\n        } catch (error) {\n          pushMessageState(error, '取得購物車');\n        }\n      }\n      async function delProduct(item) {\n        isLoading.value = item.id;\n        try {\n          const res = await apiUserDelProduct(item.id);\n          if (res.data.success) {\n            emitter.emit('update-cart');\n            getCarts();\n            isLoading.value = '';\n          }\n          pushMessageState(res, '刪除商品');\n        } catch (error) {\n          pushMessageState(error, '刪除商品');\n        }\n      }\n      async function useCoupon() {\n        const data = { data: { code: coupon.value } };\n        try {\n          const res = await apiUserUseCoupon(data);\n          if (res.data.success) {\n            emitter.emit('update-cart');\n            getCarts();\n          }\n          pushMessageState(res, '套用優惠券');\n        } catch (error) {\n          pushMessageState(error, '套用優惠券');\n        }\n      }\n\n      onMounted(() => {\n        getCarts();\n        emitter.on('update-cart', () => {\n          getCarts();\n        });\n      });\n\n      return {\n        carts,\n        coupon,\n        isLoading,\n        delProduct,\n        useCoupon,\n      };\n    }\n\n    return {\n      ...modalDetail(),\n      ...cartDetail(),\n      currency,\n    };\n  },\n};\n</script>\n\n<template>\n  <div class=\"cart-btn-position\">\n    <BaseScrollTop />\n    <button type=\"button\" class=\"cart-btn\" @click=\"showModal\">\n      <i class=\"bi bi-cart-plus-fill\"></i>\n      <span v-show=\"carts.arr?.carts?.length\">{{\n        carts.arr?.carts?.length\n      }}</span>\n    </button>\n  </div>\n  <div class=\"modal\" tabindex=\"-1\" ref=\"cartModal\">\n    <div class=\"modal-dialog\">\n      <div class=\"modal-content bg-dark border-title\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title text-title\">購物車</h5>\n          <button\n            type=\"button\"\n            class=\"btn-close btn-close-white\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"cart-content\" v-if=\"carts.arr?.carts?.length === 0\">\n            <p class=\"mb-0 fs-5\">購物車內無東西</p>\n            <router-link\n              to=\"/frontDesk/products\"\n              class=\"d-block text-lightred fs-4\"\n              @click=\"hideModal\"\n              >請選購商品</router-link\n            >\n          </div>\n          <table class=\"table text-center table-responsive-lg\" v-else>\n            <thead>\n              <tr class=\"text-title\">\n                <th scope=\"col\" width=\"80\"></th>\n                <th scope=\"col\" width=\"200\">商品名稱</th>\n                <th scope=\"col\" width=\"120\">數量</th>\n                <th scope=\"col\" class=\"text-end\" width=\"120\">小計</th>\n                <th scope=\"col\" width=\"30\"></th>\n              </tr>\n            </thead>\n            <tbody class=\"text-content\">\n              <tr v-for=\"item in carts.arr.carts\" :key=\"item.id\">\n                <td class=\"align-middle\">\n                  <img\n                    :src=\"item.product.imageUrl\"\n                    :alt=\"item.product.description\"\n                    class=\"img-fluid\"\n                    style=\"heigt: 3rem\"\n                  />\n                </td>\n                <td class=\"align-middle\">{{ item.product.title }}</td>\n                <td class=\"align-middle\">{{ item.qty }}</td>\n                <td class=\"align-middle text-end\">\n                  $ {{ currency(item.total) }}\n                </td>\n                <td class=\"align-middle text-end\">\n                  <button\n                    class=\"btn btn-outline-danger btn-sm\"\n                    type=\"button\"\n                    disabled\n                    v-if=\"isLoading === item.id\"\n                  >\n                    <span\n                      class=\"spinner-border spinner-border-sm\"\n                      role=\"status\"\n                      aria-hidden=\"true\"\n                    ></span>\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </button>\n                  <button\n                    v-else\n                    type=\"button\"\n                    class=\"btn btn-sm btn-trash\"\n                    @click=\"delProduct(item)\"\n                  >\n                    <i class=\"bi bi-trash-fill\"></i>\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n            <tfoot>\n              <tr\n                v-show=\"carts.arr.total > carts.arr.final_total\"\n                class=\"text-darkred\"\n              >\n                <td colspan=\"4\" class=\"text-end\">折扣優惠</td>\n                <td class=\"line-through text-end\">\n                  $ {{ currency(carts.arr.total - carts.arr.final_total) }}\n                </td>\n              </tr>\n              <tr class=\"text-content\">\n                <td colspan=\"4\" class=\"text-end\">總金額</td>\n                <td class=\"text-end\" width=\"120\">\n                  $ {{ currency(carts.arr.final_total) }}\n                </td>\n              </tr>\n            </tfoot>\n          </table>\n          <div class=\"mb-3 input-group\" v-if=\"carts.arr?.carts?.length != 0\">\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              placeholder=\"請輸入優惠券代碼\"\n              aria-label=\"請輸入優惠券代碼\"\n              aria-describedby=\"button-addon2\"\n              v-model=\"coupon\"\n            />\n            <button\n              class=\"btn btn-outline-content\"\n              type=\"button\"\n              id=\"button-addon2\"\n              :class=\"{ disabled: coupon === '' }\"\n              @click=\"useCoupon\"\n            >\n              套用優惠券\n            </button>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-outline-title\"\n            data-bs-dismiss=\"modal\"\n          >\n            再逛逛\n          </button>\n          <button\n            type=\"button\"\n            class=\"btn btn-lightred\"\n            :class=\"{ disabled: carts.arr?.carts?.length === 0 }\"\n            @click=\"payment\"\n          >\n            結帳去\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.line-through {\n  text-decoration: line-through;\n}\n.cart-btn-position {\n  position: fixed;\n  bottom: 6%;\n  right: 3%;\n  z-index: 66;\n  display: none;\n  @media (min-width: 992px) {\n    display: block;\n  }\n}\n.cart-btn {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  color: #fff;\n  background: #dd5c33;\n  border: none;\n  position: relative;\n  span {\n    background: red;\n    color: #fff;\n    border-radius: 50%;\n    height: 25px;\n    width: 25px;\n    position: absolute;\n    top: -5px;\n    right: -5px;\n  }\n}\n.cart-btn {\n  &:hover {\n    background: #ce5814;\n  }\n}\n.btn-trash {\n  color: rgba($color: #fff, $alpha: 0.4);\n  &:hover {\n    color: #98142b;\n  }\n}\n.input-group {\n  flex-wrap: nowrap;\n}\n</style>\n","import { render } from \"./BaseCartModal.vue?vue&type=template&id=18316cb7&scoped=true\"\nimport script from \"./BaseCartModal.vue?vue&type=script&lang=js\"\nexport * from \"./BaseCartModal.vue?vue&type=script&lang=js\"\n\nimport \"./BaseCartModal.vue?vue&type=style&index=0&id=18316cb7&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-18316cb7\"\n\nexport default script","import { render } from \"./FrontDesk.vue?vue&type=template&id=04f5afa2&scoped=true\"\nimport script from \"./FrontDesk.vue?vue&type=script&lang=js\"\nexport * from \"./FrontDesk.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-04f5afa2\"\n\nexport default script"],"sourceRoot":""}