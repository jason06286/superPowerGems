(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65211f3a"],{"159b":function(e,t,c){var a=c("da84"),r=c("fdbc"),o=c("17c2"),n=c("9112");for(var i in r){var s=a[i],l=s&&s.prototype;if(l&&l.forEach!==o)try{n(l,"forEach",o)}catch(d){l.forEach=o}}},"17c2":function(e,t,c){"use strict";var a=c("b727").forEach,r=c("a640"),o=r("forEach");e.exports=o?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"4de4":function(e,t,c){"use strict";var a=c("23e7"),r=c("b727").filter,o=c("1dde"),n=o("filter");a({target:"Array",proto:!0,forced:!n},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));c("b64b"),c("a4d3"),c("4de4"),c("e439"),c("159b"),c("dbb4");function a(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function r(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,a)}return c}function o(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?r(Object(c),!0).forEach((function(t){a(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):r(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}},"7dd8":function(e,t,c){"use strict";c.r(t);c("b64b"),c("b0c0");var a=c("7a23"),r=Object(a["T"])("data-v-b9a27180");Object(a["z"])("data-v-b9a27180");var o={class:"my-2"},n=Object(a["i"])("h2",{class:"fw-bold border-bottom border-3 border-orange pb-3 mb-3"}," 訂單列表 ",-1),i={class:"accordion",id:"accordionExample"},s={key:0,class:"accordion-body"},l={class:"d-flex justify-content-between"},d={class:"fw-bold"},b=Object(a["h"])(" 訂單時間: "),u={class:"mx-1"},O={key:0,class:"text-success"},f={key:1,class:"text-secondary"},p={class:"row"},j={class:"col-lg-6 col-12"},m={class:"p-4"},g=Object(a["i"])("h5",{class:"border-bottom border-2 border-orange pb-2 "}," 訂單內容 ",-1),h={class:" text-end"},v=Object(a["h"])(" 總金額:"),y={class:"m-2"},w=Object(a["h"])("元 "),k={class:"col-lg-6 col-12"},x={class:"form-group mb-3"},P=Object(a["i"])("label",{for:"name",class:"mb-2"},"Name *",-1),E={class:"form-group mb-3"},V=Object(a["i"])("label",{for:"email",class:"mb-2"},"Email *",-1),D={class:"form-group mb-3"},F=Object(a["i"])("label",{for:"tel",class:"mb-2"},"Phone *",-1),A={class:"form-group mb-3"},I=Object(a["i"])("label",{for:"address",class:"mb-2"},"Address *",-1),L={class:"d-flex justify-content-end w-100"},B={class:"d-flex justify-content-center mt-5"};Object(a["x"])();var C=r((function(e,t,c,C,N,S){var _=Object(a["F"])("BaseLoading"),q=Object(a["F"])("Field"),J=Object(a["F"])("ErrorMessage"),U=Object(a["F"])("Form"),$=Object(a["F"])("BasePagination");return Object(a["w"])(),Object(a["e"])(a["a"],null,[Object(a["i"])(_,{isLoading:C.isLoading},null,8,["isLoading"]),Object(a["i"])("div",o,[n,Object(a["i"])("div",i,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(C.orders.arr,(function(e){return Object(a["w"])(),Object(a["e"])("div",{class:"accordion-item",key:e.id},[Object(a["i"])("h2",{class:"accordion-header",id:"".concat(e.id,"6")},[Object(a["i"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(e.id),"aria-expanded":"false","aria-controls":e.id,onClick:function(t){return C.tempOrder.obj=JSON.parse(JSON.stringify(e))}}," 訂單編號:"+Object(a["I"])(e.id),9,["data-bs-target","aria-controls","onClick"])],8,["id"]),Object(a["i"])("div",{id:e.id,class:"accordion-collapse collapse","aria-labelledby":"".concat(e.id,"6"),"data-bs-parent":"#accordionExample"},[0!=Object.keys(C.tempOrder.obj).length&&C.tempOrder.obj.id===e.id?(Object(a["w"])(),Object(a["e"])("div",s,[Object(a["i"])("div",l,[Object(a["i"])("h4",d,[b,Object(a["i"])("span",u,Object(a["I"])(C.formatDate(C.tempOrder.obj.create_at)),1)]),C.tempOrder.obj.is_paid?(Object(a["w"])(),Object(a["e"])("h4",O,"已付款")):(Object(a["w"])(),Object(a["e"])("h4",f,"未付款"))]),Object(a["i"])("div",p,[Object(a["i"])("div",j,[Object(a["i"])("div",m,[g,(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["D"])(C.tempOrder.obj.products,(function(e){return Object(a["w"])(),Object(a["e"])("p",{class:"mb-2  border-bottom border-gray pb-2 ",key:e.id},Object(a["I"])(e.product.title)+"/"+Object(a["I"])(e.qty)+Object(a["I"])(e.product.unit),1)})),128)),Object(a["i"])("h5",h,[v,Object(a["i"])("span",y,Object(a["I"])(C.currency(C.tempOrder.obj.total)),1),w])])]),Object(a["i"])("div",k,[Object(a["i"])(U,null,{default:r((function(c){var r=c.errors;return[Object(a["i"])("div",x,[P,Object(a["i"])(q,{id:"name",name:"name",type:"text",class:["form-control",{"is-invalid":r["name"]}],placeholder:"請輸入 name",rules:"required",modelValue:C.tempOrder.obj.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return C.tempOrder.obj.user.name=e})},null,8,["class","modelValue"]),Object(a["i"])(J,{name:"name",class:"invalid-feedback"})]),Object(a["i"])("div",E,[V,Object(a["i"])(q,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":r["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:C.tempOrder.obj.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return C.tempOrder.obj.user.email=e})},null,8,["class","modelValue"]),Object(a["i"])(J,{name:"email",class:"invalid-feedback"})]),Object(a["i"])("div",D,[F,Object(a["i"])(q,{id:"tel",name:"tel",type:"tel",class:["form-control",{"is-invalid":r["tel"]}],placeholder:"請輸入 tel",rules:C.isPhone,modelValue:C.tempOrder.obj.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return C.tempOrder.obj.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["i"])(J,{name:"tel",class:"invalid-feedback"})]),Object(a["i"])("div",A,[I,Object(a["i"])(q,{id:"address",name:"address",type:"text",class:["form-control",{"is-invalid":r["address"]}],placeholder:"請輸入 address",rules:"required",modelValue:C.tempOrder.obj.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return C.tempOrder.obj.user.address=e})},null,8,["class","modelValue"]),Object(a["i"])(J,{name:"address",class:"invalid-feedback"})]),Object(a["i"])("div",L,[Object(a["i"])("button",{class:"btn btn-primary me-3",type:"button",onClick:t[5]||(t[5]=function(){return C.editOrder&&C.editOrder.apply(C,arguments)})}," 修改客戶資料 "),Object(a["i"])("button",{class:"btn btn-danger",type:"button",onClick:function(t){return C.delOrder(e.id)}}," 刪除訂單 ",8,["onClick"])])]})),_:2},1024)])])])):Object(a["f"])("",!0)],8,["id","aria-labelledby"])])})),128))]),Object(a["i"])("div",B,[Object(a["i"])($,{pagination:C.pagination,onGetNowpage:C.getOrders},null,8,["pagination","onGetNowpage"])])])],64)})),N=c("5530"),S=(c("ac1f"),c("5319"),c("99af"),c("dd87")),_=c("5d10"),q=c("bc3a"),J=c.n(q),U=c("2d24"),$=c("1336"),z={components:{BasePagination:S["a"],BaseLoading:_["a"]},setup:function(){var e=Object(a["A"])({arr:[]}),t=Object(a["A"])({obj:{}}),c=Object(a["A"])({obj:{}}),r=Object(U["a"])(),o=Object(a["B"])(!1);function n(e,t){r.fire({icon:"success",title:e,text:t})}function i(e,t){r.fire({icon:"error",title:e,text:t})}function s(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o.value=!0;var a=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/orders?page=").concat(c);J.a.defaults.headers.common.Authorization="".concat(a),J.a.get(r).then((function(c){console.log("produts",c),c.data.success&&(e.arr=c.data.orders,t.obj=c.data.pagination,o.value=!1)})).catch((function(e){console.log(e)}))}function l(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/orders/all");J.a.delete(e).then((function(e){e.data.success?(s(),n("刪除所有訂單","刪除所有訂單成功!")):i("Oops...",e.data.message),console.log("delete",e)})).catch((function(e){console.log(e)}))}function d(e){var t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/order/").concat(e);J.a.delete(t).then((function(e){e.data.success?(s(),n("刪除訂單","刪除訂單成功!")):i("Oops...",e.data.message),console.log("delete",e)})).catch((function(e){console.log(e)}))}function b(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("supergems","/admin/order/").concat(c.obj.id);J.a.put(e,{data:Object(N["a"])({},c.obj)}).then((function(e){e.data.success?(console.log("edit :>> ",e),s(),n("修改訂單","修改訂單成功!")):i("Oops...",e.data.message),console.log("edit",e)})).catch((function(e){console.log(e)}))}function u(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"}return Object(a["t"])((function(){return[s()]})),{orders:e,pagination:t,tempOrder:c,isLoading:o,getOrders:s,delOrder:d,delAllOrder:l,currency:$["a"],formatDate:$["b"],isPhone:u,editOrder:b}}};z.render=C,z.__scopeId="data-v-b9a27180";t["default"]=z},a640:function(e,t,c){"use strict";var a=c("d039");e.exports=function(e,t){var c=[][e];return!!c&&a((function(){c.call(null,t||function(){throw 1},1)}))}},b0c0:function(e,t,c){var a=c("83ab"),r=c("9bf2").f,o=Function.prototype,n=o.toString,i=/^\s*function ([^ (]*)/,s="name";a&&!(s in o)&&r(o,s,{configurable:!0,get:function(){try{return n.call(this).match(i)[1]}catch(e){return""}}})},b64b:function(e,t,c){var a=c("23e7"),r=c("7b0b"),o=c("df75"),n=c("d039"),i=n((function(){o(1)}));a({target:"Object",stat:!0,forced:i},{keys:function(e){return o(r(e))}})},dbb4:function(e,t,c){var a=c("23e7"),r=c("83ab"),o=c("56ef"),n=c("fc6a"),i=c("06cf"),s=c("8418");a({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){var t,c,a=n(e),r=i.f,l=o(a),d={},b=0;while(l.length>b)c=r(a,t=l[b++]),void 0!==c&&s(d,t,c);return d}})},e439:function(e,t,c){var a=c("23e7"),r=c("d039"),o=c("fc6a"),n=c("06cf").f,i=c("83ab"),s=r((function(){n(1)})),l=!i||s;a({target:"Object",stat:!0,forced:l,sham:!i},{getOwnPropertyDescriptor:function(e,t){return n(o(e),t)}})}}]);
//# sourceMappingURL=chunk-65211f3a.0734b5ae.js.map