(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e7ee9ca"],{"050e":function(t,e,c){"use strict";c("f99e")},"31da":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),n=Object(o["R"])("data-v-e3e4cb8c");Object(o["x"])("data-v-e3e4cb8c");var i={class:"my-2"},a=Object(o["i"])("h2",{class:"fw-bold border-bottom border-3 border-orange pb-3 mb-3"}," 產品列表 ",-1),l={class:"text-end"},r={class:"table-responsive-lg"},u={class:"table mt-4 table-hover"},d=Object(o["i"])("thead",null,[Object(o["i"])("tr",null,[Object(o["i"])("th",{width:"120"},"分類"),Object(o["i"])("th",null,"產品名稱"),Object(o["i"])("th",{width:"100"},"原價"),Object(o["i"])("th",{width:"100"},"售價"),Object(o["i"])("th",{width:"100"},"是否啟用"),Object(o["i"])("th",{width:"120"},"編輯"),Object(o["i"])("th",{width:"120"},"刪除")])],-1),b={class:"text-center"},s={class:"text-center"},p={class:"text-center"},j={key:0,class:"text-success"},O={key:1,class:"text-secondary"},m=Object(o["h"])(" 編輯 "),f=Object(o["i"])("i",{class:"bi bi-pen-fill"},null,-1),g={class:"d-flex justify-content-center mt-5"};Object(o["v"])();var v=n((function(t,e,c,n,v,h){var y=Object(o["D"])("BaseLoading"),P=Object(o["D"])("BaseDelteButton"),w=Object(o["D"])("BasePagination"),k=Object(o["D"])("BaseProductModal");return Object(o["u"])(),Object(o["e"])(o["a"],null,[Object(o["i"])(y,{isLoading:n.isLoading},null,8,["isLoading"]),Object(o["i"])("div",i,[a,Object(o["i"])("div",l,[Object(o["i"])("button",{class:"btn btn-orange text-white",type:"button",onClick:e[1]||(e[1]=function(t){return n.openProductModal({},!0)})}," 新增商品 ")]),Object(o["i"])("div",r,[Object(o["i"])("table",u,[d,Object(o["i"])("tbody",null,[(Object(o["u"])(!0),Object(o["e"])(o["a"],null,Object(o["B"])(n.products.arr,(function(t){return Object(o["u"])(),Object(o["e"])("tr",{key:t.id},[Object(o["i"])("td",null,Object(o["G"])(t.category),1),Object(o["i"])("td",null,Object(o["G"])(t.title),1),Object(o["i"])("td",b,Object(o["G"])(n.currency(t.origin_price)),1),Object(o["i"])("td",s,Object(o["G"])(n.currency(t.price)),1),Object(o["i"])("td",p,[t.is_enabled?(Object(o["u"])(),Object(o["e"])("span",j,"啟用")):(Object(o["u"])(),Object(o["e"])("span",O,"未啟用"))]),Object(o["i"])("td",null,[Object(o["i"])("button",{type:"button",class:"btn btn-orange btn-sm",onClick:function(e){return n.openProductModal(t,!1)}},[m,f],8,["onClick"])]),Object(o["i"])("td",null,[Object(o["i"])(P,{btnSmall:!0,onClick:function(e){return n.delProduct(t.id)}},null,8,["onClick"])])])})),128))])])])]),Object(o["i"])("div",g,[Object(o["i"])(w,{pagination:n.pagination,onGetNowpage:n.getProducts},null,8,["pagination","onGetNowpage"])]),Object(o["i"])(k,{ref:"productModal",product:n.tempProduct,newProduct:n.newProduct,onProductStatus:n.productStatus},null,8,["product","newProduct","onProductStatus"])],64)})),h=(c("ac1f"),c("5319"),c("99af"),c("241e")),y=c("dd87"),P=(c("a4d3"),c("e01a"),Object(o["R"])("data-v-12396d36"));Object(o["x"])("data-v-12396d36");var w={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},k={class:"modal-dialog modal-xl"},x={class:"modal-content border-0"},U={class:"modal-header bg-orange-600 text-white"},M={id:"productModalLabel",class:"modal-title"},S={key:0},_={key:1},B=Object(o["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),C={class:"modal-body"},V={class:"row"},K={class:"col-sm-4"},L={class:"mb-1"},D={class:"form-group my-2"},z=Object(o["i"])("label",{for:"imageUrl"},"輸入圖片網址",-1),G={class:"form-group my-2"},A=Object(o["i"])("label",{for:"imageUrl"},"或上傳圖片",-1),J={key:0},N={key:1},$={key:2},F={class:"col-sm-8"},I={class:"form-group"},R=Object(o["i"])("label",{for:"title"},"標題",-1),T={class:"row"},q={class:"form-group col-md-6"},E=Object(o["i"])("label",{for:"category"},"分類",-1),H={class:"form-group col-md-6"},Q=Object(o["i"])("label",{for:"price"},"單位",-1),W={class:"row"},X={class:"form-group col-md-6"},Y=Object(o["i"])("label",{for:"origin_price"},"原價",-1),Z={class:"form-group col-md-6"},tt=Object(o["i"])("label",{for:"price"},"售價",-1),et=Object(o["i"])("hr",null,null,-1),ct={class:"form-group"},ot=Object(o["i"])("label",{for:"description"},"產品描述",-1),nt={class:"form-group"},it=Object(o["i"])("label",{for:"content"},"說明內容",-1),at={class:"form-group"},lt={class:"form-check"},rt=Object(o["i"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),ut={class:"modal-footer"},dt=Object(o["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);Object(o["v"])();var bt=P((function(t,e,c,n,i,a){return Object(o["u"])(),Object(o["e"])("div",w,[Object(o["i"])("div",k,[Object(o["i"])("div",x,[Object(o["i"])("div",U,[Object(o["i"])("h5",M,[c.newProduct?(Object(o["u"])(),Object(o["e"])("span",S,"新增產品")):(Object(o["u"])(),Object(o["e"])("span",_,"修改產品"))]),B]),Object(o["i"])("div",C,[Object(o["i"])("div",V,[Object(o["i"])("div",K,[Object(o["i"])("div",L,[Object(o["i"])("div",D,[z,Object(o["P"])(Object(o["i"])("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.tempProduct.obj.imageUrl=t})},null,512),[[o["K"],n.tempProduct.obj.imageUrl]])]),Object(o["i"])("div",G,[A,Object(o["i"])("input",{type:"file",class:"form-control",ref:"fileInput",onChange:e[2]||(e[2]=function(){return n.uploadFile&&n.uploadFile.apply(n,arguments)})},null,544)]),Object(o["i"])("img",{class:"img-fluid",src:n.tempProduct.obj.imageUrl,alt:""},null,8,["src"])]),Array.isArray(n.tempProduct.obj.imagesUrl)?(Object(o["u"])(),Object(o["e"])("div",J,[Object(o["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=function(){return n.addPicture&&n.addPicture.apply(n,arguments)})}," 新增圖片 ")])):(Object(o["u"])(),Object(o["e"])("div",N,[Object(o["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[4]||(e[4]=function(){return n.newPicture&&n.newPicture.apply(n,arguments)})}," 新增圖片 ")])),Object(o["i"])("div",null,[Object(o["i"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[5]||(e[5]=function(){return n.delPicture&&n.delPicture.apply(n,arguments)})}," 刪除圖片 ")]),Array.isArray(n.tempProduct.obj.imagesUrl)?(Object(o["u"])(),Object(o["e"])("div",$,[(Object(o["u"])(!0),Object(o["e"])(o["a"],null,Object(o["B"])(n.tempProduct.obj.imagesUrl,(function(t){return Object(o["u"])(),Object(o["e"])("img",{class:"img-fluid my-2",key:t,src:t,alt:""},null,8,["src"])})),128))])):Object(o["f"])("",!0)]),Object(o["i"])("div",F,[Object(o["i"])("div",I,[R,Object(o["P"])(Object(o["i"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.obj.title=t})},null,512),[[o["K"],n.tempProduct.obj.title]])]),Object(o["i"])("div",T,[Object(o["i"])("div",q,[E,Object(o["P"])(Object(o["i"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.obj.category=t})},null,512),[[o["K"],n.tempProduct.obj.category]])]),Object(o["i"])("div",H,[Q,Object(o["P"])(Object(o["i"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.obj.unit=t})},null,512),[[o["K"],n.tempProduct.obj.unit]])])]),Object(o["i"])("div",W,[Object(o["i"])("div",X,[Y,Object(o["P"])(Object(o["i"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.obj.origin_price=t})},null,512),[[o["K"],n.tempProduct.obj.origin_price,void 0,{number:!0}]])]),Object(o["i"])("div",Z,[tt,Object(o["P"])(Object(o["i"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[10]||(e[10]=function(t){return n.tempProduct.obj.price=t})},null,512),[[o["K"],n.tempProduct.obj.price,void 0,{number:!0}]])])]),et,Object(o["i"])("div",ct,[ot,Object(o["P"])(Object(o["i"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[11]||(e[11]=function(t){return n.tempProduct.obj.description=t})},"\n                ",512),[[o["K"],n.tempProduct.obj.description]])]),Object(o["i"])("div",nt,[it,Object(o["P"])(Object(o["i"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[12]||(e[12]=function(t){return n.tempProduct.obj.content=t})},"\n                ",512),[[o["K"],n.tempProduct.obj.content]])]),Object(o["i"])("div",at,[Object(o["i"])("div",lt,[Object(o["P"])(Object(o["i"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[13]||(e[13]=function(t){return n.tempProduct.obj.is_enabled=t})},null,512),[[o["J"],n.tempProduct.obj.is_enabled,void 0,{number:!0}]]),rt])])])])]),Object(o["i"])("div",ut,[dt,Object(o["i"])("button",{type:"button",class:"btn btn-orange",onClick:e[14]||(e[14]=function(t){return n.emit("productStatus",n.tempProduct.obj)})}," 確認 ")])])])],512)})),st=c("bc3a"),pt=c.n(st),jt=c("7c2b"),Ot=c.n(jt),mt={props:{product:{type:Object,default:function(){return{}}},newProduct:{type:Boolean,default:function(){return!0}}},setup:function(t,e){var c=e.emit,n=Object(o["y"])({obj:{}}),i=Object(o["z"])(null),a=Object(o["z"])(null),l=[];function r(){l.show()}function u(){l.hide()}function d(){n.obj.imagesUrl=[],n.obj.imagesUrl.push(n.obj.imageUrl),n.obj.imageUrl=""}function b(){n.obj.imagesUrl.push(n.obj.imageUrl),n.obj.imageUrl=""}function s(){n.obj.imagesUrl.pop()}function p(){var t=a.value.files[0],e=new FormData;e.append("file-to-upload",t);var c="   ".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/admin/upload");pt.a.post(c,e).then((function(t){console.log(t),t.data.success&&(n.obj.imageUrl=t.data.imageUrl)})).catch((function(t){console.log(t)}))}return Object(o["N"])((function(){return t.product.obj}),(function(){n.obj=t.product.obj})),Object(o["s"])((function(){l=new Ot.a(i.value),console.log(i)})),{productModal:i,fileInput:a,tempProduct:n,emit:c,newPicture:d,showProductModal:r,hideProductModal:u,addPicture:b,delPicture:s,uploadFile:p}}};c("050e");mt.render=bt,mt.__scopeId="data-v-12396d36";var ft=mt,gt=c("5d10"),vt=c("2d24"),ht=c("1336"),yt={components:{BaseDelteButton:h["a"],BasePagination:y["a"],BaseProductModal:ft,BaseLoading:gt["a"]},setup:function(){var t=Object(o["y"])({arr:[]}),e=Object(o["y"])({obj:{}}),c=Object(o["z"])(null),n=Object(o["z"])(!1),i=Object(o["y"])({obj:{imagesUrl:[]}}),a=Object(vt["a"])(),l=Object(o["z"])(!1);function r(t,e){a.fire({icon:"success",title:t,text:e})}function u(t,e){a.fire({icon:"error",title:t,text:e})}function d(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;l.value=!0;var o=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/admin/products?page=").concat(c);pt.a.defaults.headers.common.Authorization="".concat(o),pt.a.get(n).then((function(c){console.log("produts",c),c.data.success&&(t.arr=c.data.products,e.obj=c.data.pagination,l.value=!1)})).catch((function(t){console.log(t)}))}function b(t){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/admin/product/").concat(t);pt.a.delete(e).then((function(t){t.data.success&&(d(),r("刪除","刪除商品成功!")),console.log("delete",t)})).catch((function(t){console.log(t)}))}function s(t,e){i.obj=JSON.parse(JSON.stringify(t)),n.value=e,c.value.showProductModal()}function p(t){i.obj=t;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/admin/product"),o="post";n.value||(e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason06286","/admin/product/").concat(t.id),o="put"),pt.a[o](e,{data:i.obj}).then((function(t){t.data.success?(d(),r(n.value?"新增":"修改",n.value?"新增商品成功!":"修改商品成功!")):u("Oops...",t.data.message),c.value.hideProductModal(),console.log(t)})).catch((function(t){console.log(t)}))}return Object(o["s"])((function(){d()})),{products:t,pagination:e,productModal:c,newProduct:n,tempProduct:i,isLoading:l,delProduct:b,getProducts:d,openProductModal:s,productStatus:p,currency:ht["a"]}}};yt.render=v,yt.__scopeId="data-v-e3e4cb8c";e["default"]=yt},e01a:function(t,e,c){"use strict";var o=c("23e7"),n=c("83ab"),i=c("da84"),a=c("5135"),l=c("861d"),r=c("9bf2").f,u=c("e893"),d=i.Symbol;if(n&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var b={},s=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof s?new d(t):void 0===t?d():d(t);return""===t&&(b[e]=!0),e};u(s,d);var p=s.prototype=d.prototype;p.constructor=s;var j=p.toString,O="Symbol(test)"==String(d("test")),m=/^Symbol\((.*)\)[^)]+$/;r(p,"description",{configurable:!0,get:function(){var t=l(this)?this.valueOf():this,e=j.call(t);if(a(b,t))return"";var c=O?e.slice(7,-1):e.replace(m,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:s})}},f99e:function(t,e,c){}}]);
//# sourceMappingURL=chunk-7e7ee9ca.6091d33d.js.map